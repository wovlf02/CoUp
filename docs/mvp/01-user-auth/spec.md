# MVP 기능 명세: 01. 사용자 인증 및 프로필

## 1. 개요

- 사용자는 소셜 계정을 통해 간편하게 서비스에 가입하고 로그인할 수 있다.
- 로그인한 사용자는 자신의 프로필 정보를 조회하고 수정할 수 있다.

## 2. 사용자 스토리 (User Stories)

### 2.1. 회원가입 및 로그인

- **US-1.1**: 비로그인 사용자는 소셜 로그인(Google, GitHub) 버튼을 통해 로그인을 시도할 수 있다.
- **US-1.2**: 처음 소셜 로그인을 시도하는 사용자는 자동으로 회원가입 처리되며, 서비스의 기본 사용자 역할이 부여된다.
- **US-1.3**: 로그인에 성공한 사용자는 이전에 머물던 페이지 또는 메인 대시보드로 리디렉션된다.
- **US-1.4**: 로그인한 사용자는 로그아웃할 수 있다. 로그아웃 시, 세션 정보는 만료되고 홈페이지로 이동한다.

### 2.2. 프로필 관리

- **US-2.1**: 로그인한 사용자는 자신의 프로필 페이지로 이동하여 현재 프로필 정보(닉네임, 이메일, 프로필 사진)를 조회할 수 있다.
- **US-2.2**: 사용자는 자신의 닉네임을 수정할 수 있다.
  - 닉네임은 고유해야 하며, 중복 시 에러 메시지를 표시한다.
  - 닉네임은 특정 길이 및 문자 규칙을 따라야 한다.
- **US-2.3**: 사용자는 자신의 프로필 사진을 변경할 수 있다.
  - 이미지 파일을 업로드하여 변경한다.
  - 업로드된 이미지는 S3에 저장되고, CDN을 통해 제공된다.
- **US-2.4**: 사용자는 자신의 계정을 탈퇴할 수 있다.
  - 탈퇴 시, 사용자의 모든 정보는 개인정보처리방침에 따라 처리된다. (예: 즉시 삭제 또는 유예 기간 후 삭제)

## 3. API 명세 (요약)

- `GET /api/v1/users/me`: 내 정보 조회
- `PATCH /api/v1/users/me`: 내 정보 수정
- `POST /api/v1/auth/logout`: 로그아웃
- `DELETE /api/v1/users/me`: 회원 탈퇴
- 소셜 로그인 관련 엔드포인트는 NextAuth.js가 처리한다.

## 4. 데이터 모델

- `User` 테이블
  - `id`: Int (PK)
  - `email`: String (Unique)
  - `name`: String (닉네임)
  - `imageUrl`: String
  - `provider`: String (e.g., "google", "github")
  - `providerId`: String
  - `role`: Enum (e.g., `USER`, `ADMIN`)
  - `createdAt`, `updatedAt`: DateTime
