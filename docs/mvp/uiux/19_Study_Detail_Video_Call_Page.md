# 19. 스터디 상세 페이지 (Study Detail - Video Call Page)

## 1. 목적
스터디 그룹 멤버들이 별도의 화상회의 툴 없이 CoUp 플랫폼 내에서 실시간으로 얼굴을 보며 함께 공부하고 소통할 수 있는 환경을 제공합니다.

## 2. 주요 요소
*   **상단 헤더**: CoUp 로고, 사용자 프로필 이미지/닉네임, 알림 아이콘, 검색 바 (전역 헤더)
*   **좌측 사이드바**: 주요 메뉴 (전역 사이드바)
*   **스터디 헤더**: 스터디명, 스터디 소개 요약 등 (Overview 페이지와 동일)
*   **탭 네비게이션**: 스터디 내의 주요 기능(개요, 채팅, 공지, 파일, 캘린더, 할 일, 설정)으로 이동하는 탭 메뉴
*   **비디오 그리드**: 참여자들의 비디오 화면을 그리드 형태로 표시
*   **컨트롤 바**: 마이크 켜기/끄기, 카메라 켜기/끄기, 화면 공유, 나가기 버튼
*   **참여자 목록**: 현재 화상 스터디에 참여 중인 멤버 목록
*   **채팅 오버레이**: 화상 스터디 중에도 텍스트 채팅을 할 수 있는 오버레이 또는 사이드 패널

## 3. 레이아웃
*   **2단 레이아웃**: 좌측 전역 사이드바, 우측 스터디 상세 콘텐츠 영역으로 구성됩니다.
*   **비디오 영역**: 스터디 상세 콘텐츠 영역 내에서 비디오 그리드가 대부분을 차지하며, 하단에 컨트롤 바가 고정됩니다.
*   **참여자 목록/채팅**: 비디오 영역 옆에 사이드 패널 형태로 표시되거나, 토글 버튼으로 열고 닫을 수 있습니다.
*   **반응형 디자인**: 모바일 환경에서는 비디오 레이아웃이 최적화되고, 컨트롤 바 및 기타 요소들이 터치하기 쉽게 배치됩니다.

## 4. 상호작용
*   **화상 스터디 시작/참여**: 스터디 그룹 페이지에서 '화상 스터디 시작하기' 버튼을 눌러 세션을 시작하거나 참여합니다.
*   **마이크/카메라 제어**: 컨트롤 바의 버튼을 클릭하여 자신의 마이크와 카메라를 켜고 끕니다.
    *   마이크 켜기/끄기: 아이콘 변경 (mic / mic_off) 및 상태 표시.
    *   카메라 켜기/끄기: 아이콘 변경 (videocam / videocam_off) 및 상태 표시.
*   **화면 공유**: '화면 공유' 버튼 클릭 시 자신의 화면을 다른 참여자들과 공유합니다. (전체 화면, 특정 애플리케이션, 브라우저 탭 공유 선택 가능)
*   **나가기**: '나가기' 버튼 클릭 시 화상 스터디 세션에서 나갑니다.
*   **다른 참여자 마이크 음소거**: 그룹장/관리자는 참여자 목록에서 특정 참여자의 마이크를 음소거할 수 있습니다. (아이콘 변경 및 상태 표시)
*   **텍스트 채팅**: 채팅 오버레이/패널을 통해 화상 스터디 중에도 텍스트 메시지를 주고받습니다.

## 5. 디자인 고려사항
*   **직관적인 컨트롤**: 마이크, 카메라, 화면 공유 등 주요 기능 버튼은 명확한 아이콘과 함께 제공하여 사용자가 쉽게 인지하고 사용할 수 있도록 합니다.
*   **참여자 상태 표시**: 각 참여자의 비디오 화면에 이름, 마이크/카메라 상태(켜짐/꺼짐)를 표시하여 현재 상태를 한눈에 파악할 수 있도록 합니다.
*   **그룹장/관리자 권한**: 다른 참여자 마이크 음소거 기능은 그룹장/관리자에게만 표시되거나 활성화됩니다.
*   **네트워크 상태 피드백**: 참여자들의 네트워크 상태가 좋지 않을 경우, 이를 시각적으로 알려주는 인디케이터를 제공할 수 있습니다.
*   **빈 상태 처리**: 아직 참여자가 없거나 비디오가 꺼져 있을 경우, 적절한 안내 메시지 또는 플레이스홀더 이미지를 표시합니다.

## 6. UI 요소 상세 (Detailed UI Elements)

### 6.1. 상단 헤더 (Global Header) 및 좌측 사이드바 (Left Sidebar)
*   메인 대시보드 페이지와 동일한 구성 및 스타일을 따릅니다.

### 6.2. 스터디 헤더 (Study Header) 및 탭 네비게이션 (Tab Navigation)
*   스터디 개요 페이지와 동일한 구성 및 스타일을 따릅니다.

### 6.3. 비디오 그리드 (Video Grid)
*   **구성**: 각 참여자의 비디오 스트림을 표시하는 영역.
*   **레이아웃**: 참여자 수에 따라 1x1, 1x2, 2x2 등 그리드 레이아웃이 동적으로 변경됩니다.
*   **스타일**: 각 비디오는 테두리, 이름, 마이크/카메라 상태 아이콘을 포함합니다.

### 6.4. 컨트롤 바 (Control Bar)
*   **구성**: 마이크, 카메라, 화면 공유, 나가기 버튼.
*   **위치**: 비디오 그리드 하단 중앙에 고정.
*   **스타일**: 배경 Neutral Dark Color (opacity 0.7), 둥근 모서리, 아이콘 버튼.
*   **버튼**:
    *   **마이크**: Material Icons (mic / mic_off), 클릭 시 토글.
    *   **카메라**: Material Icons (videocam / videocam_off), 클릭 시 토글.
    *   **화면 공유**: Material Icons (screen_share), 클릭 시 화면 공유 시작/중지.
    *   **나가기**: Material Icons (call_end), 경고 색상 (Accent Color Red 계열), 클릭 시 세션 종료.

### 6.5. 참여자 목록 (Participant List)
*   **구성**: 참여자 프로필 이미지, 닉네임, 마이크 상태 아이콘.
*   **위치**: 비디오 그리드 옆 사이드 패널.
*   **스타일**: 배경 흰색, 둥근 모서리, 스크롤 가능.
*   **그룹장/관리자 기능**: 다른 참여자 마이크 옆에 음소거 버튼 (Material Icons - volume_off) 표시.

### 6.6. 채팅 오버레이 (Chat Overlay)
*   **구성**: 채팅 메시지 목록, 메시지 입력 필드, 전송 버튼.
*   **위치**: 비디오 그리드 옆 사이드 패널 또는 토글 가능한 오버레이.
*   **스타일**: 스터디 상세 채팅 페이지와 유사.

## 7. 기술 아키텍처 (재확인)
*   **WebRTC**: 브라우저 간 P2P 통신을 위한 핵심 기술.
*   **시그널링 서버 (Node.js)**: WebRTC 연결 설정을 위한 초기 메타데이터(SDP, ICE 후보 등)를 교환하는 역할을 중재.
*   **STUN/TURN 서버**: P2P 연결을 위해 공인 IP 주소를 찾거나, 방화벽 등으로 직접 연결이 불가능할 경우 데이터를 중계.

## 8. 화면 시각화 (Visual Representation)

```
// 데스크톱 (Desktop View)
+--------------------------------------------------------------------------------------------------------+
| [CoUp Logo]                  [검색 바 - 스터디, 사용자 검색]               [🔔(1)] [👤 닉네임] |
+--------------------------------------------------------------------------------------------------------+
| +-------------------------+  +-----------------------------------------------------------------------+ |
| | [대시보드]                |  | +-------------------------------------------------------------------+ | |
| | [스터디 탐색]           |  | | [스터디 로고] **스터디명** (카테고리)                             | | |
| | [내 스터디]             |  | | 스터디 소개 요약...                                               | | |
| | [마이페이지]            |  | |                                       [스터디 가입/탈퇴 버튼]   | | |
| | [알림]                  |  | +-------------------------------------------------------------------+ | |
| |                         |  |                                                                       | |
| |                         |  | +-------------------------------------------------------------------+ | |
| |                         |  | | [개요] [채팅] [공지] [파일] [캘린더] [할 일] [화상 스터디] (선택됨) [설정] | | |
| |                         |  | +-------------------------------------------------------------------+ | |
| |                         |  |                                                                       | |
| |                         |  | +-------------------------------------------------------------------+ | |
| |                         |  | |                                                                   | | |
| |                         |  | | +---------------------------------------------------------------+ | | |
| |                         |  | | |                                                               | | | |
| |                         |  | | |                     [참여자 1 비디오]                         | | | |
| |                         |  | | |                                                               | | | |
| |                         |  | | +---------------------------------------------------------------+ | | |
| |                         |  | | +---------------------------------------------------------------+ | | |
| |                         |  | | |                                                               | | | |
| |                         |  | | |                     [참여자 2 비디오]                         | | | |
| |                         |  | | |                                                               | | | |
| |                         |  | | +---------------------------------------------------------------+ | | |
| |                         |  | |                                                                   | | |
| |                         |  | | +---------------------------------------------------------------+ | |
| |                         |  | | | [ 🎤 ] [ 📹 ] [ 🖥️ ] [ 📞 (빨간색) ]                         | | | |
| |                         |  | | +---------------------------------------------------------------+ | |
| |                         |  | +-------------------------------------------------------------------+ | |
| +-------------------------+  +-----------------------------------------------------------------------+ |
+--------------------------------------------------------------------------------------------------------+
```
```
// 모바일 (Mobile View)
+--------------------------------------------------------------------------------+
| [☰] [CoUp Logo]                 [검색] [🔔(1)] [👤] |
+--------------------------------------------------------------------------------+
| +-------------------------------------+                                        |
| | [스터디 로고] **스터디명** (카테고리) |                                        |
| | 스터디 소개 요약...                 |                                        |
| |                                     |                                        |
| | [개요] [채팅] [공지] [파일] [캘린더] [할 일] [화상 스터디] [설정] (스크롤 가능) |
| +-------------------------------------+                                        |
|                                                                                |
| +-------------------------------------+                                        |
| |                                     |                                        |
| |       [참여자 1 비디오]             |                                        |
| |                                     |                                        |
| +-------------------------------------+                                        |
| |                                     |                                        |
| |       [참여자 2 비디오]             |                                        |
| |                                     |                                        |
| +-------------------------------------+                                        |
|                                                                                |
| +-------------------------------------+                                        |
| | [ 🎤 ] [ 📹 ] [ 🖥️ ] [ 📞 (빨간색) ] |                                        |
| +-------------------------------------+                                        |
|                                                                                |
+--------------------------------------------------------------------------------+
```