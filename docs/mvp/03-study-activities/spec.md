# MVP 기능 명세: 03. 스터디 활동

## 1. 개요

- 스터디 그룹에 소속된 멤버들은 그룹 전용 공간에서 소통하고, 공지를 확인하며, 학습 자료와 일정을 공유할 수 있다.
- 실시간 채팅 기능은 시그널링 서버를 통해 처리된다.

## 2. 사용자 스토리 (User Stories)

### 2.1. 그룹 채팅

- **US-1.1**: 그룹 멤버는 그룹 상세 페이지 내의 채팅 탭으로 이동하여 실시간 채팅에 참여할 수 있다.
- **US-1.2**: 사용자가 채팅 탭에 처음 진입하면, 이전 채팅 내역의 일부(예: 최근 50개)를 볼 수 있다.
- **US-1.3**: 사용자는 스크롤을 위로 올려 이전 채팅 내역을 추가로 로드할 수 있다. (무한 스크롤)
- **US-1.4**: 사용자는 텍스트 메시지를 입력하고 전송할 수 있다.
- **US-1.5**: 내가 보낸 메시지는 오른쪽에, 다른 사람이 보낸 메시지는 왼쪽에 표시된다.
- **US-1.6**: 내가 속한 그룹에 새로운 메시지가 도착하면, 해당 그룹에 입장하지 않은 상태에서도 알림을 받을 수 있다. (알림 기능 명세 참조)

### 2.2. 공지사항

- **US-2.1**: 그룹 멤버는 그룹 내 공지사항 탭에서 모든 공지 목록을 최신순으로 볼 수 있다.
- **US-2.2**: 그룹장(`OWNER`) 또는 관리자(`ADMIN`)는 새로운 공지사항을 작성할 수 있다. (제목 + 내용)
- **US-2.3**: 공지 내용은 Markdown 형식으로 작성할 수 있다.
- **US-2.4**: 그룹장 또는 관리자는 기존 공지사항을 수정하거나 삭제할 수 있다.
- **US-2.5**: 새로운 공지사항이 등록되면 모든 그룹 멤버에게 알림이 간다.

### 2.3. 학습 자료실 (파일 공유)

- **US-3.1**: 그룹 멤버는 자료실 탭에서 그룹 내에 공유된 파일 목록을 볼 수 있다.
- **US-3.2**: 그룹 멤버는 파일을 업로드하여 그룹원들과 공유할 수 있다.
  - 파일 크기 제한이 있다. (예: 10MB)
  - 허용되는 파일 확장자 제한이 있을 수 있다. (예: `pdf`, `md`, `zip`, 이미지 파일 등)
- **US-3.3**: 그룹 멤버는 공유된 파일을 클릭하여 다운로드할 수 있다.
- **US-3.4**: 자신이 업로드한 파일은 삭제할 수 있다. 그룹장/관리자는 모든 파일을 삭제할 수 있다.

### 2.4. 스터디 캘린더 (일정 공유)

- **US-4.1**: 그룹 멤버는 캘린더 탭에서 월별/주별/일별 스터디 일정을 한눈에 볼 수 있다.
- **US-4.2**: 그룹장 또는 관리자는 새로운 일정을 등록할 수 있다.
  - 일정 제목, 설명, 시작 시간, 종료 시간을 포함한다.
- **US-4.3**: 등록된 일정은 캘린더에 시각적으로 표시된다.
- **US-4.4**: 그룹장 또는 관리자는 기존 일정을 수정하거나 삭제할 수 있다.
- **US-4.5**: 일정 시작 시간에 임박하면 관련 멤버들에게 알림을 보낼 수 있다. (Post-MVP)

## 3. API 명세 (요약)

### REST API (Business Server)
- `GET /api/v1/studies/{studyId}/messages`: 이전 채팅 내역 조회
- `POST /api/internal/v1/messages`: (내부) 채팅 메시지 저장
- `GET /api/v1/studies/{studyId}/notices`: 공지사항 목록 조회
- `POST /api/v1/studies/{studyId}/notices`: 공지사항 생성
- `GET /api/v1/studies/{studyId}/files`: 파일 목록 조회
- `POST /api/v1/studies/{studyId}/files`: 파일 업로드 (Presigned-URL 방식 등)
- `GET /api/v1/studies/{studyId}/events`: 캘린더 일정 조회
- `POST /api/v1/studies/{studyId}/events`: 캘린더 일정 생성

### WebSocket API (Signaling Server)
- `emit('send_message', ...)`: 클라이언트가 메시지 전송
- `on('new_message', ...)`: 클라이언트가 새 메시지 수신
