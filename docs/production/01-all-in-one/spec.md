# Production 기능 명세: 01. All-in-One 경험 강화

## 1. 개요

- MVP 출시 이후, 사용자가 CoUp 플랫폼을 떠나지 않고도 스터디의 모든 활동을 완결할 수 있도록 통합된 협업 도구를 제공한다.
- WebRTC 기반의 화상 스터디, 칸반 보드, 실시간 공유 문서 기능을 통해 파편화된 스터디 경험을 하나로 모은다.

## 2. 화상 스터디 (캠스터디)

- **목표**: 별도의 화상회의 툴(Zoom, Google Meet) 없이 플랫폼 내에서 얼굴을 보며 함께 공부하는 환경을 제공하여 몰입감과 유대감을 높인다.

### 2.1. 사용자 스토리

- **US-1.1**: 그룹 멤버는 스터디 그룹 페이지에서 '화상 스터디 시작하기' 버튼을 눌러 화상 스터디 세션을 시작하거나, 이미 진행 중인 세션에 참여할 수 있다.
- **US-1.2**: 사용자는 자신의 카메라와 마이크를 켜고 끌 수 있다.
- **US-1.3**: 사용자는 다른 참여자들의 비디오 화면을 그리드(Grid) 형태로 볼 수 있다.
- **US-1.4**: 사용자는 자신의 화면을 다른 참여자들과 공유할 수 있다. (전체 화면, 특정 애플리케이션, 브라우저 탭 공유)
- **US-1.5**: 화상 스터디 중에도 텍스트 채팅을 함께 사용할 수 있다.
- **US-1.6**: 그룹장/관리자는 특정 사용자의 마이크를 강제로 끄거나, 세션에서 제외시킬 수 있다.

### 2.2. 기술 아키텍처

- **WebRTC**: 브라우저 간 P2P 통신을 위한 핵심 기술. 별도 플러그인 없이 비디오, 오디오, 데이터 통신을 가능하게 한다.
- **시그널링 서버 (Node.js)**: WebRTC 연결 설정을 위한 초기 메타데이터(SDP, ICE 후보 등)를 교환하는 역할을 중재한다. 기존의 시그널링 서버를 확장하여 사용한다.
- **STUN/TURN 서버**: P2P 연결을 위해 공인 IP 주소를 찾거나, 방화벽 등으로 직접 연결이 불가능할 경우 데이터를 중계하는 서버. Google의 공용 STUN 서버를 사용하거나, 직접 TURN 서버를 구축(Coterun 등)한다.

## 3. 칸반 보드

- **목표**: 스터디 그룹의 과제, 프로젝트, 학습 계획 등을 시각적으로 관리하고 진행 상황을 공유하는 협업 도구를 제공한다.

### 3.1. 사용자 스토리

- **US-2.1**: 그룹 멤버는 칸반 보드 탭에서 스터디 과제들을 카드 형태로 볼 수 있다.
- **US-2.2**: 보드는 `To Do`, `In Progress`, `Done` 과 같은 컬럼(Column)으로 구성된다. (컬럼명은 커스터마이징 가능)
- **US-2.3**: 그룹 멤버는 새로운 카드를 생성할 수 있다. 카드에는 제목, 설명, 마감일, 담당자를 지정할 수 있다.
- **US-2.4**: 사용자는 카드를 드래그 앤 드롭하여 다른 컬럼으로 이동시킬 수 있다.
- **US-2.5**: 사용자는 특정 카드를 클릭하여 세부 내용을 확인하고, 댓글을 남겨 의견을 교환할 수 있다.

## 4. 공유 문서

- **목표**: 그룹원들이 함께 스터디 노트, 회의록, 자료 등을 실시간으로 동시에 편집할 수 있는 기능을 제공한다.

### 4.1. 사용자 스토리

- **US-3.1**: 그룹 멤버는 자료실 탭에서 '새 문서 만들기'를 통해 공유 문서를 생성할 수 있다.
- **US-3.2**: 여러 사용자가 동시에 같은 문서를 열고 편집할 수 있으며, 다른 사람의 커서 위치와 편집 내용이 실시간으로 반영된다.
- **US-3.3**: 문서는 자동으로 저장된다.
- **US-3.4**: 기본적인 텍스트 서식(볼드, 이탤릭, 목록, 헤더 등)을 지원한다.

### 4.2. 기술 아키텍처

- **CRDT (Conflict-free Replicated Data Type)** 또는 **OT (Operational Transformation)**: 동시 편집 시 발생하는 충돌을 해결하기 위한 핵심 알고리즘.
- **추천 라이브러리**: **Y.js** (CRDT 기반), **TipTap**, **BlockNote** 등 오픈소스 라이브러리를 활용하여 구현 복잡도를 낮춘다.
- **백엔드**: 변경 사항을 동기화하고 문서를 최종적으로 저장하기 위해 WebSocket(시그널링 서버)과 비즈니스 서버의 역할이 필요하다.
