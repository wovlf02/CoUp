# Production 기능 명세: 06. 협업 학습 도구

## 1. 개요

- 텍스트 채팅을 넘어, 다양한 형태의 학습 활동을 지원하는 고도화된 협업 도구를 제공한다.
- 시각적이고 인터랙티브한 학습 경험을 통해 스터디의 효율성과 재미를 극대화한다.

## 2. 공유 화이트보드

- **목표**: 그룹 멤버들이 실시간으로 아이디어를 스케치하고, 다이어그램을 그리며, 복잡한 문제를 시각적으로 함께 풀 수 있는 디지털 화이트보드를 제공한다.

### 2.1. 사용자 스토리

- **US-1.1**: 그룹 멤버는 스터디룸 내에서 '화이트보드' 탭을 열어 공유 화이트보드를 사용할 수 있다.
- **US-1.2**: 화이트보드에 참여한 모든 사용자의 커서가 각자의 이름과 함께 실시간으로 표시된다.
- **US-1.3**: 사용자는 다음과 같은 도구를 사용할 수 있다.
  - 다양한 색상과 굵기의 펜/브러시
  - 도형 그리기 (원, 사각형, 선)
  - 텍스트 입력
  - 스티커 메모 (포스트잇)
  - 이미지 업로드
- **US-1.4**: 화이트보드의 내용은 여러 페이지에 걸쳐 작성할 수 있으며, 자동으로 저장된다.
- **US-1.5**: 작성된 화이트보드 내용은 이미지 파일(PNG, JPG) 또는 PDF로 내보낼 수 있다.

### 2.2. 기술 아키텍처

- **라이브러리 활용**: **tldraw**, **Excalidraw**, **fabric.js** 등 검증된 오픈소스 라이브러리를 활용하여 구현 복잡도를 낮춘다.
- **실시간 동기화**: 모든 드로잉 데이터는 WebRTC 데이터 채널 또는 WebSocket(시그널링 서버)을 통해 다른 사용자들에게 실시간으로 전송되어 동기화된다.

## 3. 플래시카드 / 퀴즈

- **목표**: 어학, 자격증 시험 등 암기가 중요한 스터디를 위해, 그룹원들이 함께 플래시카드 덱을 만들고 퀴즈를 풀며 학습 내용을 점검할 수 있는 기능을 제공한다.

### 3.1. 사용자 스토리

- **US-2.1**: 그룹 멤버는 '플래시카드' 탭에서 여러 개의 카드 덱(Deck)을 생성하고 관리할 수 있다.
- **US-2.2**: 멤버들은 특정 덱에 '앞면'(질문/단어)과 '뒷면'(답/의미)으로 구성된 카드를 추가할 수 있다.
- **US-2.3**: 사용자는 '학습하기' 모드에서 덱의 카드를 하나씩 넘겨보며 암기할 수 있다. (클릭 시 뒷면 표시)
- **US-2.4**: 사용자는 '퀴즈 풀기' 모드를 시작할 수 있다. 시스템은 덱의 카드들을 랜덤하게 문제(객관식/주관식)로 출제한다.
- **US-2.5**: 퀴즈 종료 후, 점수와 틀린 문제가 표시되어 복습을 돕는다.
- **US-2.6**: 그룹 멤버들은 퀴즈 점수 랭킹을 통해 서로의 학습 성과를 확인하고 경쟁할 수 있다.

## 4. 문서 / PDF 주석

- **목표**: 그룹원들이 학습 자료(PDF 등)를 함께 보며, 특정 부분에 하이라이트를 하거나 메모를 남기는 등 비동기적인 협업 학습을 지원한다.

### 4.1. 사용자 스토리

- **US-3.1**: 그룹 멤버는 자료실에 PDF 파일을 업로드할 수 있다.
- **US-3.2**: 업로드된 PDF 파일을 클릭하면, 뷰어(Viewer)가 열리고 모든 그룹 멤버가 해당 문서를 볼 수 있다.
- **US-3.3**: 사용자는 뷰어에서 텍스트를 드래그하여 하이라이트하거나, 특정 영역에 핀(Pin)을 꽂아 댓글(주석)을 남길 수 있다.
- **US-3.4**: 다른 사람이 남긴 하이라이트와 주석을 볼 수 있으며, 주석에 답글을 달아 토론할 수 있다.
- **US-3.5**: '주석 모아보기' 기능을 통해 해당 문서에 달린 모든 주석을 한 페이지에서 확인할 수 있다.

### 4.2. 기술 아키텍처

- **PDF 렌더링**: **PDF.js** (Mozilla 개발) 라이브러리를 사용하여 브라우저에서 PDF 파일을 렌더링한다.
- **주석 데이터**: 주석의 내용, 위치(좌표), 작성자 등의 정보는 별도의 데이터 모델로 설계하여 Next.js API Routes의 DB에 저장한다.
