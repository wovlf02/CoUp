# 19. 관리자 - 스터디 관리 (Admin Studies Management)

> **화면 ID**: `ADMIN-03`  
> **라우트**: `/admin/studies`  
> **레이아웃**: 반응형 비율 기반 (모든 해상도 대응)  
> **구조**: 좌측 Admin Nav(12%) + 메인 콘텐츠(58%) + 우측 위젯(30%)  
> **렌더링**: CSR (실시간 검색/필터)  
> **권한**: SYSTEM_ADMIN  
> **색상**: 레드 계열 (관리자 테마)

---

## 📐 반응형 레이아웃 (비율 기반)

```
┌────────────┬────────────────────────────────────────────────────┬──────────────┐
│  Admin Nav │              Main Content (58%)                    │ Right Widget │
│   (12%)    │                                                    │   (30%)      │
│            │                                                    │              │
│            │  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │              │
│ 📊 대시보드 │  ┃  스터디 관리            전체 156개  [새로고침] ┃ │ 📊 스터디   │
│ 👥 사용자  │  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │   통계     │
│ 📚 스터디  │                                                    │              │
│ ⚠️ 신고   │  ┌────────────────────────────────────────────┐    │ 활성: 142  │
│ 📈 통계   │  │ [전체▼] [공개▼] [비공개▼]    [카테고리▼]  │    │ 비공개: 14 │
│ ⚙️ 설정   │  │                                            │    │ 신고됨: 5  │
│           │  │ 🔍 스터디명, 그룹장으로 검색...             │    │            │
│           │  └────────────────────────────────────────────┘    │ ━━━━━━━━━ │
│ ━━━━━━━━━ │                                                    │            │
│           │  ┌──────────────────────────────────────────────┐  │ 📂 카테고리│
│ 🏠 메인으로│  │☑│📚│스터디명│그룹장│멤버│공개│생성일│액션│ │   현황     │
│ 🚪 로그아웃│  ├──────────────────────────────────────────────┤  │            │
│           │  │☐│💻│코딩테스트│김철수│12/20│공개│11.01│[...]│ │ 프로그래밍 │
│  12%      │  │☐│💼│취업 준비│이영희│ 8/15│공개│11.02│[...]│ │   45개    │
│           │  │☐│📖│자격증 반│박민수│15/20│공개│11.03│[...]│ │            │
│           │  │☐│🔒│운동 루틴│최지은│ 5/10│비공│11.04│[...]│ │ 취업/자격증│
│           │  │☐│💻│알고리즘│정소현│18/25│공개│11.05│[...]│ │   28개    │
│           │  │☐│🗣️│영어회화│강민준│10/15│공개│11.06│[...]│ │            │
│           │  │☐│⚠️│디자인│윤서아│12/20│공개│11.07│[...]│ │ 어학       │
│           │  │☐│💻│웹개발│장도윤│ 7/10│공개│11.08│[...]│ │   15개    │
│           │  │☐│📚│독서모임│임하은│20/30│공개│11.09│[...]│ │            │
│           │  │☐│🏃│러닝크루│한예준│ 8/15│공개│11.10│[...]│ │ 운동/취미  │
│           │  │                                              │  │   8개     │
│           │  │ [...]                                        │  │            │
│           │  └──────────────────────────────────────────────┘  │ ━━━━━━━━━ │
│           │                                                    │            │
│           │  [☑ 선택한 스터디 처리]                            │ ⚡ 빠른    │
│           │  [숨김 처리] [공개 전환] [강제 삭제]               │   액션     │
│           │                                                    │            │
│           │  ← [1] 2 3 ... 16 →  [10개씩▼]                    │ [일괄숨김] │
│           │                                                    │ [일괄삭제] │
│           │                   58%                              │ [엑셀추출] │
└────────────┴────────────────────────────────────────────────────┴──────────────┘
```

---

## 🎨 섹션별 상세 설계

### 1. 필터 및 검색 바 (상단)

```
┌──────────────────────────────────────────────────────────────┐
│ [전체 ▼] [공개 ▼] [비공개 ▼]    [카테고리 ▼]   [고급 검색]  │
│                                                              │
│ 🔍 스터디명, 그룹장 이름으로 검색...                         │
└──────────────────────────────────────────────────────────────┘
```

**필터 옵션**:
1. **전체** - 모든 스터디
2. **공개** - visibility = 'PUBLIC'
3. **비공개** - visibility = 'PRIVATE'
4. **카테고리** - 프로그래밍, 취업/자격증, 어학, 운동/취미 등

**고급 검색 모달**:
```
┌─────────────────────────────────────┐
│ 🔍 고급 검색                        │
├─────────────────────────────────────┤
│                                     │
│ 생성 기간                            │
│ [2025-11-01] ~ [2025-11-17]        │
│                                     │
│ 카테고리                             │
│ ☑ 프로그래밍  ☑ 취업  ☑ 자격증      │
│ ☐ 어학  ☐ 운동  ☐ 취미             │
│                                     │
│ 멤버 수                              │
│ 최소 [1]명 ~ 최대 [50]명            │
│                                     │
│ 신고 여부                            │
│ ☐ 신고된 스터디만 표시               │
│                                     │
│ [초기화] [검색]                      │
└─────────────────────────────────────┘
```

---

### 2. 스터디 테이블 (메인)

```
┌────┬────┬────────┬────────┬────────┬────────┬────────┬────────┐
│ ☑  │ 📚 │ ID     │ 스터디명│ 그룹장  │ 멤버    │ 공개   │ 액션   │
├────┼────┼────────┼────────┼────────┼────────┼────────┼────────┤
│ ☐  │ 💻 │ 1      │코딩테스트│김철수  │ 12/20  │ 공개   │[...]   │
│    │    │        │스터디   │Google  │        │ PUBLIC │        │
│    │    │        │         │2025.11 │        │        │        │
├────┼────┼────────┼────────┼────────┼────────┼────────┼────────┤
│ ☐  │ 💼 │ 2      │취업준비 │이영희   │  8/15  │ 공개   │[...]   │
│    │    │        │         │GitHub  │        │ PUBLIC │        │
│    │    │        │         │2025.11 │        │        │        │
├────┼────┼────────┼────────┼────────┼────────┼────────┼────────┤
│ ☐  │ 🔒 │ 3      │운동루틴 │박민수   │  5/10  │ 비공개 │[...]   │
│    │    │        │         │Email   │        │PRIVATE │        │
│    │    │        │         │2025.11 │        │        │        │
├────┼────┼────────┼────────┼────────┼────────┼────────┼────────┤
│ ☐  │ ⚠️ │ 4      │디자인   │최지은   │ 12/20  │ 공개   │[...]   │
│    │    │        │스터디   │Google  │        │ 신고 2건│        │
│    │    │        │         │2025.11 │        │        │        │
└────┴────┴────────┴────────┴────────┴────────┴────────┴────────┘
```

**컬럼 구성**:
1. **체크박스**: 다중 선택
2. **카테고리 아이콘**: 
   - 💻 프로그래밍
   - 💼 취업
   - 📖 자격증
   - 🗣️ 어학
   - 🏃 운동
   - 🎨 디자인
   - 📚 기타
3. **ID**: 스터디 고유 ID
4. **스터디명**: 
   - 스터디 이름 (font-semibold)
   - 카테고리 텍스트 (text-xs)
5. **그룹장**: 
   - 이름
   - 가입 방법
   - 가입일
6. **멤버**: 현재/최대 (12/20)
7. **공개**: 
   - PUBLIC (초록색)
   - PRIVATE (회색)
   - 신고됨 (빨간색 배지)
8. **액션**: 드롭다운 메뉴

**신고 표시**:
```css
.reportedBadge {
  background: #FEE2E2;
  color: #DC2626;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
}

.reportedBadge::before {
  content: '⚠️ ';
  margin-right: 4px;
}
```

---

### 3. 액션 드롭다운 메뉴

```
[...] 클릭 시:

┌──────────────────┐
│ 👁️ 상세 보기     │
│ 👥 멤버 목록      │
│ 📊 활동 통계      │
│ ━━━━━━━━━━━━━━  │
│ 🔒 비공개 전환   │
│ 🌐 공개 전환     │
│ ━━━━━━━━━━━━━━  │
│ 👁️‍🗨️ 숨김 처리   │
│ 🗑️ 강제 삭제     │
└──────────────────┘
```

**기능별 설명**:
1. **상세 보기**: 스터디 상세 페이지로 이동
2. **멤버 목록**: 멤버 목록 모달
3. **활동 통계**: 메시지, 파일, 공지 통계
4. **비공개/공개 전환**: visibility 변경
5. **숨김 처리**: 검색 결과에서 제외 (신고 누적 시)
6. **강제 삭제**: 스팸/악의적 스터디 영구 삭제

---

### 4. 스터디 상세 모달

```
┌────────────────────────────────────────────────────────────┐
│ 스터디 상세 정보                                [✕]        │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  ┌──────────────────┐  ┌──────────────────────────────┐   │
│  │                  │  │ 기본 정보                    │   │
│  │    💻 코딩테스트 │  │                              │   │
│  │   (카테고리 아이콘)│  │ ID: 1                        │   │
│  │                  │  │ 이름: 코딩테스트 스터디       │   │
│  │  PUBLIC          │  │ 카테고리: 프로그래밍          │   │
│  │  멤버 12/20      │  │ 공개 여부: PUBLIC            │   │
│  │                  │  │ 생성일: 2025-11-01           │   │
│  └──────────────────┘  │ 마지막 활동: 5분 전           │   │
│                        └──────────────────────────────┘   │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │ 그룹장 정보                                        │   │
│  │                                                    │   │
│  │ 👤 김철수 (kim@example.com)                       │   │
│  │ Google 계정 · 2025-11-01 가입                     │   │
│  │ 생성 스터디: 2개                                  │   │
│  │ [사용자 상세보기]                                  │   │
│  └────────────────────────────────────────────────────┘   │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │ 활동 통계                                          │   │
│  │                                                    │   │
│  │ • 총 멤버: 12명 (OWNER 1, ADMIN 1, MEMBER 10)    │   │
│  │ • 보낸 메시지: 1,245개                            │   │
│  │ • 공지사항: 23개                                  │   │
│  │ • 업로드 파일: 45개 (128MB)                       │   │
│  │ • 캘린더 일정: 12개                               │   │
│  └────────────────────────────────────────────────────┘   │
│                                                            │
│  ┌────────────────────────────────────────────────────┐   │
│  │ 신고 내역                                          │   │
│  │                                                    │   │
│  │ • 받은 신고: 0건                                   │   │
│  │ • 그룹장 받은 신고: 0건                            │   │
│  └────────────────────────────────────────────────────┘   │
│                                                            │
│       [멤버 목록] [비공개 전환] [숨김 처리] [닫기]          │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

---

### 5. 숨김 처리 모달

```
┌─────────────────────────────────────┐
│ 👁️‍🗨️ 스터디 숨김 처리               │
├─────────────────────────────────────┤
│                                     │
│ 스터디: 코딩테스트 스터디            │
│                                     │
│ 숨김 처리 시 효과:                   │
│ • 검색 결과에서 제외됩니다           │
│ • 신규 가입이 불가능합니다           │
│ • 기존 멤버는 정상 이용 가능         │
│                                     │
│ 숨김 사유 (필수)                     │
│ [신고 누적                      ▼]  │
│                                     │
│ 상세 사유                            │
│ ┌─────────────────────────────────┐ │
│ │ 스팸 신고 2건 누적               │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ☑ 그룹장에게 이메일로 통보          │
│                                     │
│ ⚠️ 숨김 처리는 관리자만 해제 가능   │
│                                     │
│ [취소] [숨김 처리]                   │
└─────────────────────────────────────┘
```

---

### 6. 강제 삭제 모달

```
┌─────────────────────────────────────┐
│ 🗑️ 스터디 강제 삭제                 │
├─────────────────────────────────────┤
│                                     │
│ ⚠️ 경고: 이 작업은 되돌릴 수 없습니다│
│                                     │
│ 스터디: 코딩테스트 스터디            │
│ 멤버: 12명                          │
│                                     │
│ 삭제 시 효과:                        │
│ • 스터디와 모든 데이터 영구 삭제     │
│ • 채팅, 공지, 파일 모두 삭제         │
│ • 멤버들에게 알림 발송               │
│                                     │
│ 삭제 사유 (필수)                     │
│ [스팸/악의적 스터디             ▼]  │
│                                     │
│ 확인을 위해 "삭제"를 입력하세요      │
│ [ _____________ ]                   │
│                                     │
│ ☑ 그룹장 계정 정지 (7일)            │
│ ☑ 모든 멤버에게 이메일 통보         │
│                                     │
│ [취소] [영구 삭제]                   │
└─────────────────────────────────────┘
```

---

### 7. 우측 위젯 (30%)

**CSS (비율 기반)**:
```css
.rightWidget {
  width: 30%;
  min-width: 250px;
  max-width: 350px;
  padding: 20px;
}

@media (max-width: 1280px) {
  .rightWidget {
    width: 100%;
    max-width: 100%;
    margin-top: 20px;
  }
}
```

#### 7.1 스터디 통계

```
┌──────────────────┐
│ 📊 스터디 통계   │
├──────────────────┤
│                  │
│ 전체 스터디       │
│   156개          │
│                  │
│ ━━━━━━━━━━━━━━  │
│                  │
│ 활성: 142개      │
│ 비공개: 14개     │
│ 신고됨: 5개      │
│                  │
│ ━━━━━━━━━━━━━━  │
│                  │
│ 오늘 생성         │
│   3개            │
│                  │
│ 오늘 삭제         │
│   1개            │
│                  │
└──────────────────┘
```

---

#### 7.2 카테고리 현황

```
┌──────────────────┐
│ 📂 카테고리 현황 │
├──────────────────┤
│                  │
│ 💻 프로그래밍    │
│    45개          │
│ [검색]           │
│                  │
│ 💼 취업/자격증   │
│    28개          │
│ [검색]           │
│                  │
│ 🗣️ 어학         │
│    15개          │
│ [검색]           │
│                  │
│ 🏃 운동/취미     │
│    8개           │
│ [검색]           │
│                  │
│ 📚 기타          │
│    5개           │
│ [검색]           │
│                  │
└──────────────────┘
```

---

#### 7.3 빠른 액션

```
┌──────────────────┐
│ ⚡ 빠른 액션     │
├──────────────────┤
│                  │
│ [일괄 숨김]      │
│ (선택 스터디)    │
│                  │
│ [일괄 삭제]      │
│ (선택 스터디)    │
│                  │
│ [엑셀 추출]      │
│ (전체 목록)      │
│                  │
│ [CSV 다운로드]   │
│ (필터 적용)      │
│                  │
│ ━━━━━━━━━━━━━━  │
│                  │
│ [카테고리 관리]  │
│                  │
└──────────────────┘
```

---

#### 7.4 최근 생성 스터디

```
┌──────────────────┐
│ 🆕 최근 생성     │
├──────────────────┤
│                  │
│ • 💻 웹개발      │
│   5분 전 생성    │
│   [상세]         │
│                  │
│ • 📖 토익 공부   │
│   10분 전 생성   │
│   [상세]         │
│                  │
│ • 🏃 러닝크루    │
│   15분 전 생성   │
│   [상세]         │
│                  │
│ [더보기]         │
│                  │
└──────────────────┘
```

---

## 🔄 인터랙션 플로우

### 1. 스터디 검색

```
검색어 입력
  ↓
300ms 디바운스
  ↓
API: GET /api/v1/admin/studies?search={query}
  ↓
테이블 업데이트
```

### 2. 숨김 처리

```
[숨김 처리] 클릭
  ↓
숨김 처리 모달
  ↓
사유 입력
  ↓
API: PATCH /api/v1/admin/studies/{studyId}/hide
  Body: { reason, notifyOwner }
  ↓
성공 Toast
  ↓
테이블 업데이트 (회색 표시)
```

### 3. 강제 삭제

```
[강제 삭제] 클릭
  ↓
경고 모달
  ↓
"삭제" 입력 확인
  ↓
API: DELETE /api/v1/admin/studies/{studyId}
  Query: ?permanent=true&reason=...
  ↓
성공 Toast
  ↓
테이블에서 제거
```

---

## 📊 API 엔드포인트

### 1. 스터디 목록 조회

```javascript
GET /api/v1/admin/studies?page=1&limit=20&visibility=PUBLIC&category=PROGRAMMING

Response:
{
  studies: [
    {
      id: 1,
      name: '코딩테스트 스터디',
      category: 'PROGRAMMING',
      subCategory: 'ALGORITHM',
      visibility: 'PUBLIC',
      owner: { id: 1, name: '김철수', provider: 'GOOGLE' },
      memberCount: 12,
      maxMembers: 20,
      isHidden: false,
      reportCount: 0,
      createdAt: '2025-11-01T00:00:00Z',
      lastActivity: '2025-11-17T09:55:00Z'
    },
    // ...
  ],
  pagination: { total: 156, page: 1, limit: 20, totalPages: 8 },
  stats: { total: 156, public: 142, private: 14, reported: 5 }
}
```

### 2. 숨김 처리

```javascript
PATCH /api/v1/admin/studies/{studyId}/hide

Body:
{
  reason: 'REPORT_ACCUMULATED',
  details: '스팸 신고 2건 누적',
  notifyOwner: true
}

Response:
{
  success: true,
  study: { id: 1, isHidden: true, hiddenAt: '...' }
}
```

### 3. 강제 삭제

```javascript
DELETE /api/v1/admin/studies/{studyId}?permanent=true

Body:
{
  reason: 'SPAM',
  details: '악의적 스팸 스터디',
  suspendOwner: true,
  suspendDuration: '7_DAYS',
  notifyMembers: true
}

Response:
{
  success: true,
  deletedStudyId: 1,
  notifiedMembers: 12
}
```

---

## 📱 반응형 설계

### Desktop (1920px+)
- 12% Nav + 58% Content + 30% Widget

### Tablet (1024-1919px)
- 15% Nav + 85% Content (위젯 하단)

### Mobile (<1024px)
- 스터디 카드 레이아웃으로 전환

```
┌────────────────────────┐
│ 💻 코딩테스트 스터디    │
│                        │
│ 그룹장: 김철수         │
│ 멤버: 12/20           │
│ 공개 · 프로그래밍      │
│                        │
│ 생성: 11/01            │
│ 활동: 5분 전           │
│                        │
│ [상세] [숨김] [삭제]   │
└────────────────────────┘
```

---

## ✅ 구현 체크리스트

- [ ] 스터디 목록 API 연동
- [ ] 검색 및 필터
- [ ] 상세 정보 모달
- [ ] 숨김 처리 기능
- [ ] 강제 삭제 기능
- [ ] 공개/비공개 전환
- [ ] 일괄 처리
- [ ] 엑셀/CSV 추출
- [ ] 우측 위젯
- [ ] 반응형

---

**다음 화면**: `20_admin-reports.md` (신고 관리)
