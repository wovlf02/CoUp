# 화면 설계 - 02: 사용자 관리

> **파일**: 02-users.md
> **경로**: `/admin/users`, `/admin/users/[userId]`
> **목적**: 관리자가 플랫폼의 모든 사용자를 효율적으로 조회, 검색, 필터링하고, 특정 사용자에 대한 관리(상세 정보 확인, 제재 조치 등)를 수행할 수 있도록 합니다.

---

## 1. 사용자 목록 페이지 (`/admin/users`)

### 1.1 레이아웃 및 구성 요소

```
+----------------------------------------------------------------------+
| AdminHeader (페이지 제목: "사용자 관리")                             |
+----------------------------------------------------------------------+
| FilterPanel (상태, 역할, 가입일 등 필터)                             |
+-----------------------------------
| SearchBar (이름, 이메일 검색) | [CSV 내보내기] [일괄 작업▼] |
+----------------------------------------------------------------------+
|                                                                      |
|  UsersTable (사용자 목록 데이터 테이블)                              |
|                                                                      |
|                                                                      |
+----------------------------------------------------------------------+
| Pagination (페이지 이동)                                             |
+----------------------------------------------------------------------+
```

-   **FilterPanel**: 역할(ADMIN, USER), 상태(ACTIVE, SUSPENDED) 등 특정 조건으로 목록을 필터링하는 UI.
-   **SearchBar**: 특정 키워드로 사용자를 검색하는 입력창.
-   **UsersTable**: 실제 사용자 데이터를 표시하는 테이블.
-   **Pagination**: 많은 수의 사용자를 여러 페이지에 나누어 보여주기 위한 페이지네이션 컨트롤.

### 1.2 UX (사용자 흐름 및 인터랙션)

1.  **검색/필터링**:
    -   관리자가 `SearchBar`에 검색어를 입력하면, 500ms 디바운스(debounce) 후 자동으로 API를 호출하여 테이블 내용을 업데이트합니다. URL의 쿼리 파라미터(예: `?q=...`)도 함께 변경되어 페이지를 새로고침해도 검색 상태가 유지됩니다.
    -   `FilterPanel`에서 필터 조건을 변경하면, 즉시 API를 호출하여 테이블을 업데이트하고 URL 쿼리 파라미터(예: `?status=SUSPENDED`)도 변경됩니다.
2.  **상세 정보 확인**:
    -   `UsersTable`의 특정 사용자 행(row)을 클릭하면, 해당 사용자의 상세 정보를 보여주는 페이지(`/admin/users/[userId]`)로 이동하거나, 화면 우측에 상세 정보를 담은 사이드 패널(Side Panel)이 나타납니다. 후자의 경우 페이지 이동 없이 빠른 확인이 가능하여 UX가 더 좋습니다.
3.  **빠른 액션**:
    -   테이블의 각 행 끝에는 '수정', '정지' 등 자주 사용하는 액션을 위한 버튼/메뉴가 있습니다.
    -   '정지' 버튼을 클릭하면 아래에 설명된 **SuspendModal**이 화면 중앙에 나타납니다.
4.  **일괄 작업**:
    -   테이블의 체크박스를 통해 여러 사용자를 선택한 후, 상단의 '일괄 작업' 드롭다운 메뉴에서 '선택 항목 정지', '선택 항목 메시지 발송' 등의 작업을 수행할 수 있습니다.

---

## 2. 사용자 상세 정보 (사이드 패널 또는 페이지)

### 2.1 레이아웃 및 구성 요소

-   **UserProfileCard**: 사용자의 프로필 사진, 이름, 이메일, 역할, 현재 상태(ACTIVE, SUSPENDED) 등 핵심 정보를 요약해서 보여줍니다.
-   **ActionButtons**: '계정 정지', '경고 보내기', '역할 변경' 등 해당 사용자에 대해 수행할 수 있는 주요 액션 버튼들을 모아놓습니다.
-   **Tab-based Info**:
    -   **활동 통계 탭**: 가입일, 마지막 로그인, 작성한 게시글 수, 참여 중인 스터디 수 등 활동 지표를 보여줍니다.
    -   **제재 이력 탭**: 해당 사용자가 받았던 모든 경고, 정지 이력을 시간순 타임라인 형태로 보여줍니다.
    -   **신고 이력 탭**: 해당 사용자가 신고했거나, 신고받은 내역을 보여줍니다.

---

## 3. 핵심 모달(Modal) 설계

### 3.1 SuspendModal (계정 정지 모달)

-   **목적**: 관리자가 사용자를 정지시킬 때, 사유와 기간을 명확히 하고 실수를 방지하기 위해 사용됩니다.
-   **구성 요소**:
    -   **모달 제목**: `"{사용자 이름}"님을 정지하시겠습니까?`
    -   **정지 기간 선택**: 라디오 버튼 또는 드롭다운 (`1일`, `7일`, `30일`, `영구 정지`)
    -   **정지 사유 입력**: 텍스트 영역(Textarea). 최소 글자 수 제한(예: 10자)을 두어 책임감 있는 작성을 유도합니다.
    -   **사용자에게 알림**: 체크박스. 기본값은 `true`이며, 체크 시 정지 사실과 사유를 사용자에게 이메일로 통보합니다.
    -   **액션 버튼**: '취소'와 '정지 확정' 버튼. '정지 확정' 버튼은 사유가 입력되기 전까지 비활성화 상태로 둡니다.
-   **UX (사용자 흐름)**:
    1.  '정지' 버튼 클릭 시 모달이 나타납니다.
    2.  관리자가 기간을 선택하고 사유를 입력합니다.
    3.  '정지 확정' 버튼을 클릭하면 API(`POST /api/admin/users/[userId]/suspend`)가 호출됩니다.
    4.  호출이 진행되는 동안 버튼은 '처리 중...'과 같은 로딩 상태로 변경되고, 모달 내의 다른 컨트롤들은 비활성화됩니다.
    5.  처리가 성공하면 모달이 닫히고, 사용자 테이블 또는 상세 정보 UI가 새로운 'SUSPENDED' 상태로 자동 업데이트됩니다. 성공했다는 토스트(Toast) 알림이 화면 우측 상단에 나타납니다.

### 3.2 ChangeRoleModal (역할 변경 모달)

-   **목적**: `SYSTEM_ADMIN`이 다른 사용자의 역할을 변경(예: USER -> ADMIN)할 때 사용됩니다.
-   **구성 요소**:
    -   **모달 제목**: `"{사용자 이름}"님의 역할을 변경합니다.`
    -   **역할 선택**: 드롭다운 (`USER`, `ADMIN`, `SYSTEM_ADMIN`)
    -   **확인 버튼**: '역할 변경'
-   **UX**: 이 작업은 시스템에 큰 영향을 미치므로, '역할 변경' 버튼 클릭 시 "이 사용자는 이제 관리자 권한을 갖게 됩니다. 계속하시겠습니까?" 와 같은 2차 확인(Confirmation) 대화상자를 한 번 더 보여주는 것이 안전합니다.

---
**이전**: [01-dashboard.md](01-dashboard.md)
**다음**: [03-studies.md](03-studies.md)
