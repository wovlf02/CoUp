# ì‚¬ìš©ì ê´€ë¦¬ - ëª©ë¡ í˜ì´ì§€

> **í˜ì´ì§€ ê²½ë¡œ**: `/admin/users`  
> **ì»´í¬ë„ŒíŠ¸**: Server Component (ë©”ì¸) + Client Components (ê²€ìƒ‰, í…Œì´ë¸”)

---

## 1. í˜ì´ì§€ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì ê´€ë¦¬                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ê²€ìƒ‰ë°”]                           [í•„í„° ë²„íŠ¼] [ë‚´ë³´ë‚´ê¸° â–¼] â”‚
â”‚ ğŸ” ì´ë©”ì¼, ì´ë¦„, ID ê²€ìƒ‰...                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ 1,250ëª… | ACTIVE: 1,180 | SUSPENDED: 50 | DELETED: 20   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ [ì‚¬ìš©ì í…Œì´ë¸”]                                             â”‚
â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â–¡  â”‚ ì´ë¦„   â”‚ ì´ë©”ì¼       â”‚ ì—­í•    â”‚  ìƒíƒœ    â”‚  ì•¡ì…˜  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚â–¡  â”‚í™ê¸¸ë™  â”‚hong@coup.com â”‚USER    â”‚â—ACTIVE   â”‚[ìƒì„¸]  â”‚ â”‚
â”‚ â”‚â–¡  â”‚ê¹€ì² ìˆ˜  â”‚kim@coup.com  â”‚ADMIN   â”‚â—ACTIVE   â”‚[ìƒì„¸]  â”‚ â”‚
â”‚ â”‚â–¡  â”‚ì´ì˜í¬  â”‚lee@coup.com  â”‚USER    â”‚ğŸ”´SUSPENDEDâ”‚[í•´ì œ]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ [ì¼ê´„ ì„ íƒ: 0ê°œ] [ì¼ê´„ ë©”ì‹œì§€] [CSV ë‚´ë³´ë‚´ê¸°]               â”‚
â”‚                                                             â”‚
â”‚ â—€ 1 2 3 ... 63 â–¶                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Server Component (ë©”ì¸ í˜ì´ì§€)

```tsx
// app/admin/users/page.tsx
interface SearchParams {
  q?: string;
  role?: string;
  status?: string;
  page?: string;
}

export default async function UsersPage({
  searchParams
}: {
  searchParams: SearchParams
}) {
  const query = searchParams.q || '';
  const role = searchParams.role;
  const status = searchParams.status;
  const page = parseInt(searchParams.page || '1');
  
  // ì„œë²„ì—ì„œ ë°ì´í„° í˜ì¹­
  const { users, pagination } = await getUsers({
    query,
    role,
    status,
    page,
    limit: 20
  });
  
  return (
    <div className="users-page">
      <div className="page-header">
        <h1>ì‚¬ìš©ì ê´€ë¦¬</h1>
        <div className="actions">
          <Button variant="outline">í•„í„°</Button>
          <Button variant="outline">ë‚´ë³´ë‚´ê¸°</Button>
        </div>
      </div>
      
      {/* Client Component - ê²€ìƒ‰ */}
      <SearchBar defaultValue={query} />
      
      {/* í†µê³„ ìš”ì•½ */}
      <UserStats stats={pagination} />
      
      {/* Client Component - í…Œì´ë¸” */}
      <UsersTable 
        users={users}
        pagination={pagination}
      />
    </div>
  );
}
```

---

## 3. Client Components

### 3.1 SearchBar
```tsx
'use client';
import { useRouter, useSearchParams } from 'next/navigation';
import { useState } from 'react';

export function SearchBar({ defaultValue = '' }) {
  const router = useRouter();
  const searchParams = useSearchParams();
  const [query, setQuery] = useState(defaultValue);
  
  function handleSearch(e: React.FormEvent) {
    e.preventDefault();
    
    const params = new URLSearchParams(searchParams);
    if (query) {
      params.set('q', query);
    } else {
      params.delete('q');
    }
    params.delete('page'); // ê²€ìƒ‰ ì‹œ ì²« í˜ì´ì§€ë¡œ
    
    router.push(`/admin/users?${params.toString()}`);
  }
  
  return (
    <form onSubmit={handleSearch}>
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="ì´ë©”ì¼, ì´ë¦„, ID ê²€ìƒ‰..."
      />
      <button type="submit">ê²€ìƒ‰</button>
    </form>
  );
}
```

### 3.2 UsersTable
```tsx
'use client';
import { useState } from 'react';

export function UsersTable({ users, pagination }) {
  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);
  
  return (
    <>
      <table>
        <thead>
          <tr>
            <th>
              <input
                type="checkbox"
                checked={selectedUsers.length === users.length}
                onChange={toggleSelectAll}
              />
            </th>
            <th>ì´ë¦„</th>
            <th>ì´ë©”ì¼</th>
            <th>ì—­í• </th>
            <th>ìƒíƒœ</th>
            <th>ê°€ì…ì¼</th>
            <th>ì•¡ì…˜</th>
          </tr>
        </thead>
        <tbody>
          {users.map(user => (
            <UserRow 
              key={user.id}
              user={user}
              selected={selectedUsers.includes(user.id)}
              onSelect={() => toggleSelectUser(user.id)}
            />
          ))}
        </tbody>
      </table>
      
      {selectedUsers.length > 0 && (
        <BulkActionBar count={selectedUsers.length} />
      )}
      
      <Pagination {...pagination} />
    </>
  );
}
```

---

## 4. í•„í„° íŒ¨ë„ (ëª¨ë‹¬)

```tsx
'use client';
import { Dialog } from '@headlessui/react';

export function FilterPanel({ isOpen, onClose }) {
  return (
    <Dialog open={isOpen} onClose={onClose}>
      <div className="filter-panel">
        <h3>í•„í„°</h3>
        
        {/* ì—­í•  */}
        <fieldset>
          <legend>ì—­í• </legend>
          <Checkbox label="ì¼ë°˜ ì‚¬ìš©ì" value="USER" />
          <Checkbox label="ê´€ë¦¬ì" value="ADMIN" />
          <Checkbox label="ì‹œìŠ¤í…œ ê´€ë¦¬ì" value="SYSTEM_ADMIN" />
        </fieldset>
        
        {/* ìƒíƒœ */}
        <fieldset>
          <legend>ìƒíƒœ</legend>
          <Checkbox label="í™œì„±" value="ACTIVE" />
          <Checkbox label="ì •ì§€ë¨" value="SUSPENDED" />
          <Checkbox label="ì‚­ì œë¨" value="DELETED" />
        </fieldset>
        
        {/* ê°€ì…ì¼ */}
        <fieldset>
          <legend>ê°€ì…ì¼</legend>
          <DateRangePicker />
        </fieldset>
        
        <div className="actions">
          <Button onClick={onClose} variant="ghost">ì·¨ì†Œ</Button>
          <Button onClick={applyFilters}>ì ìš©</Button>
        </div>
      </div>
    </Dialog>
  );
}
```

---

## 5. URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°

```
/admin/users?q=hong&role=USER&status=ACTIVE&page=2

ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°:
- q: ê²€ìƒ‰ì–´
- role: USER | ADMIN | SYSTEM_ADMIN
- status: ACTIVE | SUSPENDED | DELETED
- page: í˜ì´ì§€ ë²ˆí˜¸
```

---

**ì‘ì„± ì™„ë£Œ**: 2025-11-27
# ëŒ€ì‹œë³´ë“œ - ì „ì²´ ê°œìš”

> **í˜ì´ì§€ ê²½ë¡œ**: `/admin/dashboard`  
> **ì»´í¬ë„ŒíŠ¸ íƒ€ì…**: Server Component (ë©”ì¸) + Client Components (ìœ„ì ¯)

---

## 1. ë ˆì´ì•„ì›ƒ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [4ê°œ í†µê³„ ì¹´ë“œ - ê°€ë¡œ ë°°ì¹˜]                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚ â”‚ì´ ì‚¬ìš©ì â”‚í™œì„±ìŠ¤í„°ë””â”‚ë¯¸ì²˜ë¦¬ì‹ ê³ â”‚  ì˜¤ëŠ˜DAU â”‚               â”‚
â”‚ â”‚  1,250   â”‚    85    â”‚    12    â”‚   456    â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [2ë‹¨ ë ˆì´ì•„ì›ƒ]                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ ì‹¤ì‹œê°„ í™œë™ ê·¸ë˜í”„     â”‚ ê¸´ê¸‰ ì•Œë¦¼ (ìµœê·¼ 24ì‹œê°„) â”‚         â”‚
â”‚ â”‚ (ì‹œê°„ëŒ€ë³„ í™œì„± ì‚¬ìš©ì) â”‚ - HIGH/URGENT ì‹ ê³       â”‚         â”‚
â”‚ â”‚                        â”‚ - ì‹œìŠ¤í…œ ì˜¤ë¥˜           â”‚         â”‚
â”‚ â”‚ [LineChart]            â”‚ [AlertList]            â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ìµœê·¼ ê´€ë¦¬ì í™œë™ ë¡œê·¸]                                      â”‚
â”‚ - í™ê¸¸ë™: ì‚¬ìš©ì ì •ì§€ (user123) - 10ë¶„ ì „                   â”‚
â”‚ - ê¹€ì² ìˆ˜: ì‹ ê³  ì²˜ë¦¬ ì™„ë£Œ (#12345) - 1ì‹œê°„ ì „                â”‚
â”‚ [ë”ë³´ê¸°]                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ì»´í¬ë„ŒíŠ¸ ë¶„í•´

### 2.1 StatCards (Server Component)
```tsx
// app/admin/dashboard/page.tsx
export default async function DashboardPage() {
  const stats = await getDashboardStats();
  
  return (
    <div className="grid grid-cols-4 gap-6">
      <StatCard 
        title="ì´ ì‚¬ìš©ì"
        value={stats.totalUsers}
        change={stats.userChange}
        trend="up"
        icon={<UsersIcon />}
      />
      {/* ë‚˜ë¨¸ì§€ ì¹´ë“œë“¤... */}
    </div>
  );
}
```

**ë°ì´í„° êµ¬ì¡°**:
```typescript
interface DashboardStats {
  totalUsers: number;
  totalUsersChange: number;      // ì „ì£¼ ëŒ€ë¹„ %
  activeStudies: number;
  activeStudiesChange: number;
  pendingReports: number;
  pendingReportsChange: number;
  dau: number;
  dauChange: number;
}
```

### 2.2 ActivityGraph (Client Component)
```tsx
'use client';
import { LineChart } from 'recharts';

export default function ActivityGraph({ data }) {
  return (
    <LineChart 
      data={data}
      xAxis={{ dataKey: 'hour' }}
      yAxis={{ dataKey: 'count' }}
    />
  );
}
```

### 2.3 AlertList (Server Component â†’ Client)
```tsx
// Server Component (ë°ì´í„° í˜ì¹­)
async function getUrgentAlerts() {
  return await prisma.report.findMany({
    where: {
      priority: { in: ['HIGH', 'URGENT'] },
      status: 'PENDING',
      createdAt: { gte: new Date(Date.now() - 24 * 60 * 60 * 1000) }
    },
    take: 10
  });
}

// Client Component (ì¸í„°ë™ì…˜)
'use client';
export function AlertItem({ alert }) {
  return (
    <div onClick={() => router.push(`/admin/reports/${alert.id}`)}>
      {alert.priority === 'URGENT' && 'ğŸ”´'}
      {alert.type} - {alert.targetName}
    </div>
  );
}
```

### 2.4 RecentLogs (Server Component)
```tsx
async function getRecentAdminLogs() {
  return await prisma.adminLog.findMany({
    take: 10,
    orderBy: { createdAt: 'desc' },
    include: {
      admin: { select: { name: true } }
    }
  });
}
```

---

## 3. ë°ì´í„° Fetching ì „ëµ

### ë³‘ë ¬ í˜ì¹­
```tsx
export default async function DashboardPage() {
  const [stats, activityData, alerts, logs] = await Promise.all([
    getDashboardStats(),
    getActivityData(),
    getUrgentAlerts(),
    getRecentAdminLogs()
  ]);
  
  return (
    <>
      <StatCards stats={stats} />
      <ActivityGraphClient data={activityData} />
      <AlertsList alerts={alerts} />
      <RecentLogs logs={logs} />
    </>
  );
}
```

### ìºì‹±
```tsx
export const revalidate = 60; // 1ë¶„ë§ˆë‹¤ ì¬ìƒì„±
```

---

## 4. ë°˜ì‘í˜• ë””ìì¸

```css
/* Desktop (>= 1024px) */
.stat-cards { grid-template-columns: repeat(4, 1fr); }
.two-column { grid-template-columns: 2fr 1fr; }

/* Tablet (768px - 1023px) */
@media (max-width: 1023px) {
  .stat-cards { grid-template-columns: repeat(2, 1fr); }
  .two-column { grid-template-columns: 1fr; }
}

/* Mobile (< 768px) */
@media (max-width: 767px) {
  .stat-cards { grid-template-columns: 1fr; }
}
```

---

**ì‘ì„± ì™„ë£Œ**: 2025-11-27

