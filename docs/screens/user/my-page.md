# 15. 마이페이지 (My Page)

> **화면 ID**: `MAIN-09`  
> **라우트**: `/me`  
> **레이아웃**: 좌측 네비게이션(15%) + 우측 콘텐츠(85%)  
> **렌더링**: CSR (개인정보)

---

## 📐 화면 구조

```
┌────────┬───────────────────────────────────────────────────────┐
│        │  Header                                               │
│        ├───────────────────────────────────────────────────────┤
│        │                                                       │
│  Nav   │  마이페이지                                            │
│  Bar   │                                                       │
│        │  ┌─────────────────────────────────────────────────┐  │
│ 🏠     │  │ 1. 프로필                                        │  │
│ 🔍     │  │                                                 │  │
│ 👥     │  │     [프로필 이미지]                              │  │
│ 📋     │  │         김철수                                   │  │
│ 🔔     │  │     kim@example.com                             │  │
│ 👤     │  │                                                 │  │
│        │  │ [프로필 수정]                                    │  │
│        │  └─────────────────────────────────────────────────┘  │
│        │                                                       │
│        │  ┌─────────────────────────────────────────────────┐  │
│        │  │ 2. 내 정보                                       │  │
│        │  │                                                 │  │
│        │  │ 이름                                             │  │
│        │  │ [김철수_______________________________]         │  │
│        │  │                                                 │  │
│        │  │ 자기소개 (선택)                                  │  │
│        │  │ [안녕하세요! 개발자입니다._____________]         │  │
│        │  │ [___________________________________]         │  │
│        │  │                                                 │  │
│        │  │                              [변경사항 저장]     │  │
│        │  └─────────────────────────────────────────────────┘  │
│        │                                                       │
│        │  ┌─────────────────────────────────────────────────┐  │
│        │  │ 3. 참여 중인 스터디 (4개)              [전체보기]│  │
│        │  │                                                 │  │
│        │  │ • 📚 코딩테스트 마스터 (OWNER)                  │  │
│        │  │ • 💼 취업 준비 스터디 (MEMBER)                  │  │
│        │  │ • 📖 영어 회화 (ADMIN)                          │  │
│        │  │ • 🏃 운동 루틴 (MEMBER)                         │  │
│        │  └─────────────────────────────────────────────────┘  │
│        │                                                       │
│        │  ┌─────────────────────────────────────────────────┐  │
│        │  │ 4. 계정 관리                                     │  │
│        │  │                                                 │  │
│        │  │ [로그아웃]                                       │  │
│        │  │ [계정 삭제]  ⚠️ 모든 데이터가 삭제됩니다         │  │
│        │  └─────────────────────────────────────────────────┘  │
│        │                                                       │
└────────┴───────────────────────────────────────────────────────┘
```

---

## 🎨 섹션별 상세 설계

### 1. 프로필 섹션
```
┌─────────────────────────────────────────────────────────┐
│ 1. 프로필                                                │
│                                                         │
│                   ┌────────────┐                        │
│                   │            │                        │
│                   │  [이미지]  │  128px × 128px         │
│                   │            │                        │
│                   └────────────┘                        │
│                                                         │
│                     김철수                              │
│                 kim@example.com                         │
│                                                         │
│              [프로필 이미지 변경]                        │
│                                                         │
│   Google 계정으로 가입 · 가입일: 2025년 11월 1일         │
└─────────────────────────────────────────────────────────┘
```

**프로필 이미지**:
- 크기: 128px × 128px
- 둥근 원형
- 클릭 또는 [변경] 버튼 → 이미지 업로드 모달

**정보**:
- 이름 (text-xl, Bold)
- 이메일 (text-sm, gray-600)
- 가입 방법 + 가입일 (text-xs, gray-500)

---

### 2. 내 정보 수정
```
┌─────────────────────────────────────────────────────────┐
│ 2. 내 정보                                               │
│                                                         │
│ 이름 *                                                   │
│ ┌───────────────────────────────────────────────────────┐│
│ │ 김철수                                                ││
│ └───────────────────────────────────────────────────────┘│
│                                                         │
│ 자기소개 (선택)                                          │
│ ┌───────────────────────────────────────────────────────┐│
│ │ 안녕하세요! 백엔드 개발자입니다.                       ││
│ │ 알고리즘과 시스템 설계에 관심이 많습니다.              ││
│ └───────────────────────────────────────────────────────┘│
│ 0/200자                                                  │
│                                                         │
│                                      [변경사항 저장]     │
└─────────────────────────────────────────────────────────┘
```

**필드**:
1. 이름 (필수, 2-50자)
2. 자기소개 (선택, 최대 200자)

---

### 3. 참여 중인 스터디
```
┌─────────────────────────────────────────────────────────┐
│ 3. 참여 중인 스터디 (4개)                      [전체보기]│
│                                                         │
│ • 📚 코딩테스트 마스터 스터디                           │
│   OWNER · 12명 · 마지막 활동: 1시간 전                  │
│   [이동하기]                                            │
│                                                         │
│ • 💼 취업 준비 스터디                                    │
│   MEMBER · 8명 · 마지막 활동: 3시간 전                  │
│   [이동하기]                                            │
│                                                         │
│ • 📖 영어 회화 스터디                                    │
│   ADMIN · 15명 · 마지막 활동: 1일 전                    │
│   [이동하기]                                            │
│                                                         │
│ • 🏃 운동 루틴 스터디                                    │
│   MEMBER · 5명 · 마지막 활동: 2일 전                    │
│   [이동하기]                                            │
└─────────────────────────────────────────────────────────┘
```

**스터디 아이템**:
- 카테고리 이모지 + 스터디명
- 역할 배지 + 멤버 수 + 마지막 활동
- [이동하기] 버튼 → `/studies/[studyId]`

---

### 4. 계정 관리
```
┌─────────────────────────────────────────────────────────┐
│ 4. 계정 관리                                             │
│                                                         │
│ ┌───────────────────────────────────────────────────────┐│
│ │ [로그아웃]                                            ││
│ │ 현재 기기에서 로그아웃합니다                           ││
│ └───────────────────────────────────────────────────────┘│
│                                                         │
│ ┌───────────────────────────────────────────────────────┐│
│ │ [계정 삭제]                                           ││
│ │ ⚠️ 계정을 삭제하면 모든 데이터가 영구적으로 삭제되며   ││
│ │    참여 중인 스터디에서 자동으로 탈퇴됩니다.           ││
│ │    이 작업은 되돌릴 수 없습니다.                       ││
│ └───────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────┘
```

**로그아웃**:
- 버튼 클릭 → 확인 없이 즉시 로그아웃
- `/sign-in`으로 리다이렉트

**계정 삭제**:
1. 버튼 클릭
2. 확인 다이얼로그:
   ```
   정말로 계정을 삭제하시겠습니까?
   
   삭제되는 데이터:
   - 프로필 정보
   - 참여 중인 모든 스터디 (OWNER인 스터디 포함)
   - 작성한 공지사항, 파일, 댓글 등
   
   삭제하려면 "삭제"를 입력하세요:
   [_____________________________]
   
   [취소]  [계정 삭제]
   ```
3. "삭제" 입력 확인
4. 계정 삭제 → 랜딩 페이지

---

## 🎬 인터랙션

### 프로필 이미지 변경
```javascript
const handleImageChange = async (file) => {
  // S3 업로드
  const { uploadUrl, fileUrl } = await getUploadUrl(file)
  await uploadToS3(uploadUrl, file)
  
  // DB 업데이트
  await api.patch('/api/v1/users/me', {
    imageUrl: fileUrl
  })
  
  toast.success('프로필 이미지가 변경되었습니다!')
  refetch()
}
```

### 정보 수정
```javascript
const handleUpdate = async (data) => {
  await api.patch('/api/v1/users/me', {
    name: data.name,
    bio: data.bio
  })
  
  toast.success('정보가 수정되었습니다!')
}
```

### 로그아웃
```javascript
const handleLogout = async () => {
  await signOut({ redirect: false })
  router.push('/sign-in')
}
```

### 계정 삭제
```javascript
const handleDeleteAccount = async (confirmText) => {
  if (confirmText !== '삭제') {
    toast.error('정확히 입력해주세요')
    return
  }
  
  await api.delete('/api/v1/users/me')
  
  toast.success('계정이 삭제되었습니다')
  await signOut({ redirect: false })
  router.push('/')
}
```

---

## 📱 반응형 설계

### Desktop
- 섹션별 카드 레이아웃
- 프로필 이미지: 128px

### Mobile
- 섹션 수직 배치
- 프로필 이미지: 96px
- 버튼: 전체 너비

---

## 📐 ASCII 스케치

```
┌──────┬──────────────────────────────────────────────────┐
│      │                                                  │
│ 🏠   │ 마이페이지                                        │
│ 🔍   │                                                  │
│ 👥   │ ┌──────────────────────────────────────────────┐│
│ 📋   │ │ 1. 프로필                                    ││
│ 🔔   │ │      [이미지]                                ││
│ 👤   │ │      김철수                                  ││
│      │ │  kim@example.com                            ││
│      │ └──────────────────────────────────────────────┘│
│      │                                                  │
│      │ ┌──────────────────────────────────────────────┐│
│      │ │ 2. 내 정보                                   ││
│      │ │ 이름: [김철수]                               ││
│      │ │ 자기소개: [___________]                      ││
│      │ └──────────────────────────────────────────────┘│
│      │                                                  │
│      │ ┌──────────────────────────────────────────────┐│
│      │ │ 3. 참여 스터디 (4개)                         ││
│      │ │ • 📚 코딩테스트 (OWNER)                      ││
│      │ │ • 💼 취업준비 (MEMBER)                       ││
│      │ └──────────────────────────────────────────────┘│
│      │                                                  │
│      │ ┌──────────────────────────────────────────────┐│
│      │ │ 4. 계정 관리                                 ││
│      │ │ [로그아웃] [계정 삭제]                       ││
│      │ └──────────────────────────────────────────────┘│
└──────┴──────────────────────────────────────────────────┘
```

---

## ✅ 완료 체크리스트

- [ ] 프로필 이미지 표시
- [ ] 프로필 이미지 변경
- [ ] 이름/자기소개 수정
- [ ] 참여 스터디 목록
- [ ] 스터디 이동 버튼
- [ ] 로그아웃 기능
- [ ] 계정 삭제 기능
- [ ] 가입 정보 표시

---

**다음 화면**: `16_notifications.md` (알림 목록)
