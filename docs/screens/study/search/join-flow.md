# 스터디 가입 플로우 (Study Join Flow)

> **화면 ID**: `STUDY-JOIN-01`  
> **라우트**: `/studies/[studyId]/join`  
> **목적**: 스터디 가입 신청 과정의 사용자 경험 최적화  
> **렌더링**: CSR

---

## ? 화면 목적

**"가입 의사 결정을 명확하고 편안하게"**
- 스터디 정보를 다시 한번 확인
- 가입 동기 및 자기소개 작성 (수동 승인 시)
- 스터디 규칙 동의
- 기대 사항 설정

---

## ? 화면 구조

```
┌────────┬───────────────────────────────────────────────────────┬──────────────────┐
│        │  ← 프리뷰로 돌아가기                                   │                  │
│  Nav   ├───────────────────────────────────────────────────────┤                  │
│  Bar   │  ? 코딩테스트 마스터 스터디 가입하기                  │  [스터디 요약]   │
│        │                                                       │                  │
│ ?     │  ┌─────────────────────────────────────────────────┐  │  ? 코딩테스트  │
│ ?     │  │ Step 1/3: 스터디 규칙 확인                      │  │  ? 12/20명       │
│ ?     │  │                                                 │  │  ? 프로그래밍    │
│ ?     │  │ 우리 스터디의 규칙을 확인해주세요                │  │  ? 자동 승인     │
│ ?     │  │                                                 │  │                  │
│ ?     │  │ ? 매일 오전 9시까지 문제 풀이 제출              │  │  ?????      │
│        │  │ ? 주 1회 코드 리뷰 참여 필수                   │  │  4.8 (24명)      │
│        │  │ ? 결석 시 사전 공지                            │  │                  │
│        │  │ ? 서로 존중하는 태도                           │  │  ? 이런 분께    │
│        │  │ ? 학습 자료 적극 공유                          │  │  추천해요        │
│        │  │                                                 │  │  ? 알고리즘 기초 │
│        │  │ [?] 위 규칙에 동의합니다                        │  │  ? 꾸준한 학습   │
│        │  │                                                 │  │  ? 협업 중시     │
│        │  └─────────────────────────────────────────────────┘  │                  │
│        │                                                       │  ? 참고사항     │
│        │  ┌─────────────────────────────────────────────────┐  │  가입 후 바로    │
│        │  │ Step 2/3: 간단한 자기소개 (선택)                │  │  채팅 가능!      │
│        │  │                                                 │  │                  │
│        │  │ 자기소개 (선택)                                  │  │                  │
│        │  │ ┌─────────────────────────────────────────────┐│  │                  │
│        │  │ │안녕하세요! 백엔드 개발자 준비 중인           ││  │                  │
│        │  │ │김철수입니다. 함께 성장하고 싶습니다!         ││  │                  │
│        │  │ └─────────────────────────────────────────────┘│  │                  │
│        │  │ 0/300자                                         │  │                  │
│        │  │                                                 │  │                  │
│        │  │ 가입 동기 (선택)                                 │  │                  │
│        │  │ ( ) 취업 준비  (?) 실력 향상  ( ) 네트워킹     │  │                  │
│        │  └─────────────────────────────────────────────────┘  │                  │
│        │                                                       │                  │
│        │  ┌─────────────────────────────────────────────────┐  │                  │
│        │  │ Step 3/3: 알림 설정                             │  │                  │
│        │  │                                                 │  │                  │
│        │  │ [?] 새 공지 알림 받기                           │  │                  │
│        │  │ [?] 채팅 메시지 알림 받기                       │  │                  │
│        │  │ [ ] 일정 알림 받기                              │  │                  │
│        │  └─────────────────────────────────────────────────┘  │                  │
│        │                                                       │                  │
│        │                           [취소]  [? 가입하기]      │                  │
│        │                                                       │                  │
└────────┴───────────────────────────────────────────────────────┴──────────────────┘
```

---

## ? 섹션별 상세 설계

### Step 1: 스터디 규칙 확인

```
┌─────────────────────────────────────────────────────────┐
│ Step 1/3: 스터디 규칙 확인                   [1] 2  3   │
│                                                         │
│ 우리 스터디의 규칙을 확인해주세요                        │
│                                                         │
│ ? 매일 오전 9시까지 문제 풀이 제출                      │
│ ? 주 1회 코드 리뷰 참여 필수                            │
│ ? 결석 시 사전 공지                                     │
│ ? 서로 존중하는 태도                                    │
│ ? 학습 자료 적극 공유                                   │
│                                                         │
│ ? 상세 규칙 보기 →                                      │
│                                                         │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ [?] 위 규칙을 모두 확인했으며 동의합니다            │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ ?? 규칙을 지키지 않을 경우 강퇴될 수 있습니다            │
└─────────────────────────────────────────────────────────┘
```

**표시 정보**:
- 스터디의 핵심 규칙 5개 (최대)
- 전체 규칙 링크 (모달 또는 새 페이지)
- 필수 동의 체크박스

**검증**:
- 체크박스 미선택 시 다음 단계 비활성화

---

### Step 2: 자기소개 및 가입 동기

```
┌─────────────────────────────────────────────────────────┐
│ Step 2/3: 간단한 자기소개                    1 [2] 3    │
│                                                         │
│ 스터디원들에게 자신을 소개해주세요 (선택)                │
│                                                         │
│ 자기소개                                                 │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 안녕하세요! 백엔드 개발자 준비 중인                  │ │
│ │ 김철수입니다. 함께 성장하고 싶습니다!                │ │
│ │                                                     │ │
│ └─────────────────────────────────────────────────────┘ │
│ 85/300자                                                │
│                                                         │
│ 가입 동기                                                │
│ ( ) 취업 준비  (?) 실력 향상  ( ) 네트워킹              │
│ ( ) 자격증    ( ) 기타                                  │
│                                                         │
│ 현재 실력 수준 (알고리즘의 경우)                         │
│ ( ) 입문  (?) 초급  ( ) 중급  ( ) 고급                  │
│                                                         │
│ ? 이 정보는 그룹장이 승인 시 참고용으로 사용됩니다      │
└─────────────────────────────────────────────────────────┘
```

**자동 승인 스터디**:
- 이 단계 스킵 또는 간소화
- 자기소개만 표시 (선택)

**수동 승인 스터디**:
- 자기소개: 300자 제한
- 가입 동기: 선택
- 실력 수준: 선택
- 그룹장이 승인 시 참고

---

### Step 3: 알림 설정

```
┌─────────────────────────────────────────────────────────┐
│ Step 3/3: 알림 설정                          1  2 [3]   │
│                                                         │
│ 어떤 알림을 받고 싶으신가요?                             │
│                                                         │
│ [?] 새 공지 알림 받기                                   │
│     새로운 공지가 작성되면 알림을 보내드립니다           │
│                                                         │
│ [?] 채팅 메시지 알림 받기                               │
│     채팅에 새 메시지가 오면 알림을 보내드립니다          │
│                                                         │
│ [?] 일정 알림 받기                                      │
│     다가오는 일정을 미리 알려드립니다                    │
│                                                         │
│ [ ] 할일 마감 알림 받기                                 │
│     할일 마감일이 다가오면 알림을 보내드립니다           │
│                                                         │
│ 알림 채널                                                │
│ [?] 웹 푸시  [?] 이메일  [ ] 카카오톡                  │
│                                                         │
│ ? 알림 설정은 나중에 변경할 수 있습니다                 │
└─────────────────────────────────────────────────────────┘
```

**기본값**:
- 새 공지: ON
- 채팅 메시지: ON
- 일정: ON
- 할일 마감: OFF

**알림 채널**:
- 웹 푸시: 기본 ON
- 이메일: 기본 ON
- 카카오톡: 선택 (연동 필요)

---

## ? 가입 완료 후 처리

### 자동 승인 스터디
```javascript
const handleJoin = async () => {
  const response = await api.post(`/api/v1/studies/${studyId}/join`, {
    agreeToRules: true,
    introduction: data.introduction,
    purpose: data.purpose,
    level: data.level,
    notifications: data.notifications
  })
  
  // 즉시 MEMBER 상태로 가입
  toast.success('? 가입이 완료되었습니다!')
  
  // 환영 메시지 표시
  showWelcomeModal({
    studyName: study.name,
    nextSteps: [
      '채팅에서 인사하기',
      '공지사항 확인하기',
      '프로필 완성하기'
    ]
  })
  
  // 3초 후 스터디 대시보드로 이동
  setTimeout(() => {
    router.push(`/my-studies/${studyId}`)
  }, 3000)
}
```

### 수동 승인 스터디
```javascript
const handleJoinRequest = async () => {
  await api.post(`/api/v1/studies/${studyId}/join`, {
    agreeToRules: true,
    introduction: data.introduction,
    purpose: data.purpose,
    level: data.level,
    message: data.message // 그룹장에게 전달할 메시지
  })
  
  // PENDING 상태로 가입
  toast.success('가입 신청이 완료되었습니다!')
  
  // 대기 안내 모달
  showPendingModal({
    studyName: study.name,
    owner: study.owner.name,
    message: '그룹장이 승인하면 알림을 보내드립니다'
  })
  
  // 스터디 탐색으로 이동
  router.push('/studies')
}
```

---

## ? 가입 완료 모달 (환영 메시지)

### 자동 승인 - 환영 모달
```
┌────────────────────────────────────────────────────────┐
│                    ? 환영합니다! ?                   │
├────────────────────────────────────────────────────────┤
│                                                        │
│  "코딩테스트 마스터 스터디"의                           │
│  멤버가 되신 것을 축하합니다!                           │
│                                                        │
│  ? 다음 단계를 시작해보세요                            │
│                                                        │
│  1?? 채팅에서 스터디원들에게 인사하기                   │
│  2?? 공지사항 확인하기                                  │
│  3?? 프로필 완성하기                                    │
│                                                        │
│  ? 궁금한 점이 있다면 그룹장에게 문의하세요           │
│                                                        │
│                        [스터디 시작하기 →]             │
│                                                        │
│  3초 후 자동으로 이동합니다...                          │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 수동 승인 - 대기 모달
```
┌────────────────────────────────────────────────────────┐
│              ? 가입 신청이 완료되었습니다              │
├────────────────────────────────────────────────────────┤
│                                                        │
│  "코딩테스트 마스터 스터디"에                           │
│  가입 신청하셨습니다                                    │
│                                                        │
│  ? 현재 상태: 승인 대기 중                             │
│  ? 담당자: 김철수 (그룹장)                             │
│                                                        │
│  ? 승인되면 알림을 보내드립니다                        │
│     (평균 승인 시간: 1일 이내)                          │
│                                                        │
│  그동안 다른 스터디도 둘러보세요                        │
│                                                        │
│              [다른 스터디 보기]  [확인]                │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## ? 반응형 설계

### Desktop (1280px+)
- 좌측: 메인 폼 (70%)
- 우측: 스터디 요약 위젯 (30%)
- Step 진행 표시: 상단

### Tablet (768-1279px)
- 메인 폼: 전체 너비
- 우측 위젯: 상단으로 이동 (접을 수 있음)

### Mobile (<768px)
- 메인 폼: 전체 너비
- Step: 하단 고정 진행바
- 우측 위젯: 최소화 (펼치기 버튼)

---

## ? 우측 위젯: 스터디 요약

```
┌─────────────────────────────────┐
│ ? 코딩테스트 마스터             │
│                                 │
│ ? 12/20명                       │
│ ? 프로그래밍                    │
│ ? 자동 승인                     │
│                                 │
│ ????? 4.8               │
│ (24명 평가)                     │
│                                 │
│ ? 이런 분께 추천해요            │
│ ? 알고리즘 기초 탄탄히          │
│ ? 꾸준한 학습 원하시는 분       │
│ ? 협업을 중시하는 분            │
│                                 │
│ ? 참고사항                      │
│ 가입 후 바로 채팅 가능!         │
│ 첫 주는 적응 기간이에요         │
└─────────────────────────────────┘
```

---

## ? 상태 관리

### 멀티 스텝 폼 상태
```javascript
const [currentStep, setCurrentStep] = useState(1)
const [formData, setFormData] = useState({
  agreeToRules: false,
  introduction: '',
  purpose: '',
  level: '',
  notifications: {
    notice: true,
    chat: true,
    event: true,
    task: false
  }
})

const handleNext = () => {
  if (validateCurrentStep()) {
    setCurrentStep(prev => prev + 1)
  }
}

const handleBack = () => {
  setCurrentStep(prev => prev - 1)
}
```

---

## ? 완료 체크리스트

### Phase 1: 기본 구조
- [ ] 멀티 스텝 폼 레이아웃
- [ ] 진행 표시 (1/3, 2/3, 3/3)
- [ ] 뒤로/다음 버튼
- [ ] 우측 스터디 요약 위젯

### Phase 2: Step 1 - 규칙 확인
- [ ] 스터디 규칙 표시
- [ ] 동의 체크박스
- [ ] 상세 규칙 모달

### Phase 3: Step 2 - 자기소개
- [ ] 자기소개 입력 (300자 제한)
- [ ] 가입 동기 선택
- [ ] 실력 수준 선택
- [ ] 자동 승인 시 단순화

### Phase 4: Step 3 - 알림 설정
- [ ] 알림 항목 체크박스
- [ ] 알림 채널 선택
- [ ] 기본값 설정

### Phase 5: 가입 처리
- [ ] 자동 승인: 즉시 MEMBER
- [ ] 수동 승인: PENDING 상태
- [ ] 환영 모달 (자동)
- [ ] 대기 모달 (수동)
- [ ] 리다이렉트 처리

### Phase 6: UX 개선
- [ ] 로딩 상태
- [ ] 에러 처리
- [ ] 폼 검증
- [ ] 반응형 테스트

---

## ? UX 개선 포인트

1. **진행 상황 시각화**
   - 사용자가 어느 단계인지 명확히 표시
   - 남은 단계 안내

2. **선택적 정보 수집**
   - 필수: 규칙 동의만
   - 선택: 자기소개, 동기
   - 부담 최소화

3. **즉각적인 피드백**
   - 자동 승인: 환영 메시지 + 빠른 진입
   - 수동 승인: 명확한 대기 안내

4. **컨텍스트 유지**
   - 우측에 스터디 정보 항상 표시
   - 돌아가기 링크 제공

5. **기대 설정**
   - 다음 단계 안내
   - 평균 승인 시간 표시
   - 추천 활동 제시

---

**다음 화면**: `08_study-approval-management.md` (승인 관리 - 그룹장용)
