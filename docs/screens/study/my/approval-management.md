# 스터디 가입 승인 관리 (Study Approval Management)

> **화면 ID**: `STUDY-ADMIN-01`  
> **라우트**: `/my-studies/[studyId]/approvals`  
> **권한**: OWNER, ADMIN  
> **목적**: 가입 신청 승인/거절 관리  
> **렌더링**: CSR

---

## ? 화면 목적

**"효율적인 멤버 심사 프로세스"**
- 가입 신청자 정보 한눈에 파악
- 빠른 승인/거절 처리
- 승인 기준 일관성 유지
- 거절 사유 기록

---

## ? 화면 구조

```
┌────────┬───────────────────────────────────────────────────────┬──────────────────┐
│        │  [개요] [채팅] [공지] [파일] [캘린더] [할일] [설정]   │                  │
│  Nav   ├───────────────────────────────────────────────────────┤  우측 위젯       │
│  Bar   │  ?? 승인 대기 중 (3명)                               │                  │
│        │                                                       │  ? 승인 통계    │
│ ?     │  ┌─────────────────────────────────────────────────┐  │  이번 달         │
│ ?     │  │ ? 김철수                          [프로필 보기] │  │  ? 신청: 15명   │
│ ?     │  │                                                 │  │  ? 승인: 12명   │
│ ?     │  │ ? kim@example.com                              │  │  ? 거절: 3명    │
│ ?     │  │ ? 신청일: 2025.11.06 10:30                     │  │  승인률: 80%    │
│ ?     │  │                                                 │  │                  │
│        │  │ ? 자기소개                                      │  │  ? 평균 처리    │
│        │  │ "안녕하세요! 백엔드 개발자 준비 중인            │  │  시간: 4.5시간  │
│        │  │  김철수입니다. 알고리즘 실력을 키우고 싶어      │  │                  │
│        │  │  가입 신청합니다."                               │  │  ? 알림         │
│        │  │                                                 │  │  새 신청 시      │
│        │  │ ? 가입 동기: 실력 향상                         │  │  알림 받기       │
│        │  │ ? 실력 수준: 초급                              │  │  [ON]           │
│        │  │                                                 │  │                  │
│        │  │                    [? 승인] [? 거절] [보류]   │  │  ? 빠른 메모    │
│        │  └─────────────────────────────────────────────────┘  │  승인 기준:      │
│        │                                                       │  - 자기소개 작성│
│        │  ┌─────────────────────────────────────────────────┐  │  - 실력 적합    │
│        │  │ ? 이영희                          [프로필 보기] │  │  - 성실성       │
│        │  │                                                 │  │                  │
│        │  │ ? lee@example.com                              │  │                  │
│        │  │ ? 신청일: 2025.11.05 14:20                     │  │                  │
│        │  │                                                 │  │                  │
│        │  │ ? 자기소개                                      │  │                  │
│        │  │ "프론트엔드 개발자입니다. 함께 성장하고         │  │                  │
│        │  │  싶습니다!"                                      │  │                  │
│        │  │                                                 │  │                  │
│        │  │                    [? 승인] [? 거절] [보류]   │  │                  │
│        │  └─────────────────────────────────────────────────┘  │                  │
│        │                                                       │                  │
└────────┴───────────────────────────────────────────────────────┴──────────────────┘
```

---

## ? 섹션별 상세 설계

### 1. 헤더 - 대기 알림

```
?? 승인 대기 중 (3명)                    [모두 승인] [필터 ▼]
```

**좌측**: 대기 중인 신청 수
**우측**: 
- [모두 승인]: 한 번에 모두 승인 (확인 필요)
- [필터]: 신청일순/이름순 정렬

---

### 2. 신청자 카드 (상세)

```
┌─────────────────────────────────────────────────────────┐
│ ? 김철수                                  [프로필 보기] │
│                                                         │
│ ? kim@example.com                                      │
│ ? 신청일: 2025.11.06 10:30 (5시간 전)                  │
│                                                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                         │
│ ? 자기소개                                              │
│ "안녕하세요! 백엔드 개발자 준비 중인 김철수입니다.      │
│  알고리즘 실력을 키우고 싶어 가입 신청합니다.           │
│  매일 꾸준히 참여하겠습니다!"                            │
│                                                         │
│ ? 가입 동기: 실력 향상                                  │
│ ? 실력 수준: 초급                                       │
│ ?? 관심 태그: #알고리즘 #코딩테스트 #백준              │
│                                                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                         │
│ ? 추가 정보                                             │
│ ? GitHub: github.com/kimcs                              │
│ ? 활동 기록: 스터디 3개 참여 중                          │
│ ? 출석률: 85% (다른 스터디 기준)                         │
│                                                         │
│                                                         │
│        [? 승인하기] [? 거절하기] [? 메시지 보내기]   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**표시 정보**:
1. **기본 정보**
   - 이름
   - 이메일
   - 신청 일시 (상대 시간)
   
2. **자기소개**
   - 사용자가 작성한 자기소개 전문
   
3. **추가 정보**
   - 가입 동기 (선택한 항목)
   - 실력 수준
   - 관심 태그
   
4. **활동 기록** (있는 경우)
   - GitHub 프로필
   - 다른 스터디 참여 이력
   - 출석률

**액션 버튼**:
- [? 승인하기]: 즉시 승인
- [? 거절하기]: 거절 사유 입력 모달
- [? 메시지 보내기]: DM 발송

---

### 3. 승인 확인 다이얼로그

```
┌────────────────────────────────────────────────────────┐
│ ? 가입 승인                                           │
├────────────────────────────────────────────────────────┤
│                                                        │
│  "김철수"님의 가입을 승인하시겠습니까?                  │
│                                                        │
│  ? 승인 후 처리 사항                                   │
│  ? 즉시 MEMBER 권한 부여                               │
│  ? 환영 메시지 자동 발송                               │
│  ? 스터디 대시보드 접근 가능                           │
│                                                        │
│  ? 환영 메시지 (선택)                                  │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 환영합니다! 채팅에서 인사 나눠주세요 ?          │  │
│  └──────────────────────────────────────────────────┘  │
│  0/200자                                               │
│                                                        │
│                              [취소]  [승인하기]        │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

### 4. 거절 확인 다이얼로그

```
┌────────────────────────────────────────────────────────┐
│ ? 가입 거절                                           │
├────────────────────────────────────────────────────────┤
│                                                        │
│  "김철수"님의 가입을 거절하시겠습니까?                  │
│                                                        │
│  거절 사유 (필수)                                       │
│  ┌──────────────────────────────────────────────────┐  │
│  │ ( ) 스터디 수준과 맞지 않음                      │  │
│  │ ( ) 정원 초과                                    │  │
│  │ ( ) 자기소개 미흡                                │  │
│  │ (?) 기타                                         │  │
│  │                                                  │  │
│  │ [상세 사유 입력]                                 │  │
│  │ ┌────────────────────────────────────────────┐  │  │
│  │ │ 현재 초급 레벨 모집을 하지 않고 있습니다    │  │  │
│  │ └────────────────────────────────────────────┘  │  │
│  │ 0/300자                                          │  │
│  └──────────────────────────────────────────────────┘  │
│                                                        │
│  [?] 거절 사유를 신청자에게 전달                        │
│                                                        │
│  ?? 거절된 신청자는 다시 신청할 수 있습니다             │
│                                                        │
│                              [취소]  [거절하기]        │
│                                                        │
└────────────────────────────────────────────────────────┘
```

**거절 사유**:
- 스터디 수준과 맞지 않음
- 정원 초과
- 자기소개 미흡
- 기타 (직접 입력)

**사유 전달 옵션**:
- 체크: 신청자에게 사유 전달 (이메일/알림)
- 미체크: 단순 거절 처리

---

## ? 인터랙션 흐름

### 승인 처리
```javascript
const handleApprove = async (applicantId, welcomeMessage) => {
  try {
    await api.post(`/api/v1/studies/${studyId}/approvals/${applicantId}/approve`, {
      welcomeMessage: welcomeMessage || null
    })
    
    toast.success('가입이 승인되었습니다!')
    
    // 신청자에게 알림 발송 (자동)
    // - 이메일: "가입이 승인되었습니다"
    // - 웹 푸시: "코딩테스트 마스터 스터디 가입 승인"
    
    refetch()
  } catch (error) {
    toast.error('승인 처리 중 오류가 발생했습니다')
  }
}
```

### 거절 처리
```javascript
const handleReject = async (applicantId, reason, detailMessage, notify) => {
  try {
    await api.post(`/api/v1/studies/${studyId}/approvals/${applicantId}/reject`, {
      reason,
      detailMessage,
      notifyApplicant: notify
    })
    
    toast.success('가입이 거절되었습니다')
    
    if (notify) {
      // 신청자에게 거절 사유 전달
      // - 이메일: "가입 신청이 거절되었습니다" + 사유
    }
    
    refetch()
  } catch (error) {
    toast.error('거절 처리 중 오류가 발생했습니다')
  }
}
```

### 일괄 승인
```javascript
const handleApproveAll = async () => {
  if (!confirm(`대기 중인 ${pendingCount}명을 모두 승인하시겠습니까?`)) {
    return
  }
  
  try {
    await api.post(`/api/v1/studies/${studyId}/approvals/approve-all`)
    
    toast.success(`${pendingCount}명의 가입이 승인되었습니다!`)
    refetch()
  } catch (error) {
    toast.error('일괄 승인 중 오류가 발생했습니다')
  }
}
```

---

## ? 우측 위젯

### 1?? 승인 통계

```
┌─────────────────────────────────┐
│ ? 승인 통계                     │
│                                 │
│ 이번 달                         │
│ ? 신청: 15명                    │
│ ? 승인: 12명 ???????????????   │
│ ? 거절: 3명  ???????????????   │
│                                 │
│ 승인률: 80%                     │
│                                 │
│ ? 평균 처리 시간                │
│ 4.5시간                         │
│                                 │
│ [전체 통계 보기 →]              │
└─────────────────────────────────┘
```

---

### 2?? 알림 설정

```
┌─────────────────────────────────┐
│ ? 알림 설정                     │
│                                 │
│ 새 가입 신청 시                  │
│ [?] 즉시 알림 받기              │
│                                 │
│ 알림 채널                        │
│ [?] 웹 푸시                     │
│ [?] 이메일                      │
│ [ ] 카카오톡                    │
│                                 │
│ [설정 변경]                     │
└─────────────────────────────────┘
```

---

### 3?? 빠른 메모 (승인 기준)

```
┌─────────────────────────────────┐
│ ? 승인 기준 메모                │
│                                 │
│ ? 자기소개 작성 여부            │
│ ? 실력 수준 적합성              │
│ ? 성실한 태도                   │
│ ? 가입 동기 명확                │
│                                 │
│ [편집]                          │
└─────────────────────────────────┘
```

---

## ? 반응형 설계

### Desktop (1280px+)
- 신청자 카드: 전체 너비
- 우측 위젯: 고정 (30%)

### Tablet (768-1279px)
- 신청자 카드: 전체 너비
- 우측 위젯: 상단 또는 접기

### Mobile (<768px)
- 신청자 카드: 전체 너비
- 버튼: 아이콘만
- 우측 위젯: 하단 시트

---

## ? 실시간 알림

### 새 신청 알림
```javascript
// WebSocket 이벤트
socket.on('new_application', ({ applicant }) => {
  // 브라우저 푸시 알림
  if (Notification.permission === 'granted') {
    new Notification('새 가입 신청', {
      body: `${applicant.name}님이 가입 신청했습니다`,
      icon: '/icons/logo.png',
      badge: '/icons/badge.png'
    })
  }
  
  // Toast 알림
  toast.info(`${applicant.name}님이 가입 신청했습니다`)
  
  // 카운트 업데이트
  refetch()
})
```

---

## ? 스타일 코드

```css
/* 신청자 카드 */
.applicant-card {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: 12px;
  padding: 24px;
  margin-bottom: 16px;
  transition: all 0.2s ease;
}

.applicant-card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--primary-200);
}

/* 신청자 정보 */
.applicant-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.applicant-name {
  font-size: 18px;
  font-weight: 700;
  color: var(--gray-900);
}

.applicant-meta {
  display: flex;
  flex-direction: column;
  gap: 4px;
  color: var(--gray-600);
  font-size: 14px;
  margin-bottom: 16px;
}

/* 자기소개 */
.applicant-introduction {
  background: var(--gray-50);
  border-left: 3px solid var(--primary-500);
  padding: 16px;
  border-radius: 8px;
  margin: 16px 0;
  line-height: 1.6;
  color: var(--gray-700);
}

/* 액션 버튼 */
.action-buttons {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 16px;
}

.btn-approve {
  background: var(--success-500);
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

.btn-reject {
  background: var(--danger-500);
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

.btn-message {
  background: var(--gray-100);
  color: var(--gray-700);
  padding: 10px 20px;
  border-radius: 8px;
  border: 1px solid var(--gray-300);
  font-weight: 600;
  cursor: pointer;
}
```

---

## ? 완료 체크리스트

### Phase 1: 기본 구조
- [ ] 신청자 목록 표시
- [ ] 신청자 카드 디자인
- [ ] 정렬/필터 기능

### Phase 2: 승인 기능
- [ ] 개별 승인
- [ ] 일괄 승인
- [ ] 환영 메시지 작성

### Phase 3: 거절 기능
- [ ] 개별 거절
- [ ] 거절 사유 선택
- [ ] 사유 전달 옵션

### Phase 4: 추가 기능
- [ ] 신청자 프로필 보기
- [ ] DM 발송
- [ ] 승인 통계 위젯
- [ ] 실시간 알림

### Phase 5: 관리자 도구
- [ ] 빠른 메모 (승인 기준)
- [ ] 알림 설정
- [ ] 승인 이력 조회

---

## ? UX 개선 포인트

1. **빠른 결정 지원**
   - 중요 정보 상단 배치
   - 원클릭 승인/거절
   
2. **일관성 유지**
   - 승인 기준 메모 제공
   - 거절 사유 템플릿
   
3. **투명성**
   - 거절 사유 전달 옵션
   - 승인 통계 공개
   
4. **효율성**
   - 일괄 승인 기능
   - 실시간 알림
   
5. **맥락 제공**
   - 신청자의 다른 스터디 활동 이력
   - 출석률 등 신뢰도 지표

---

**이전 화면**: `07_study-join-flow.md` (가입 플로우)  
**다음 화면**: `09_study-member-profile.md` (멤버 프로필)

