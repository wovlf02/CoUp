# 멤버 관리 페이지 설계

## 📋 개요
스터디의 OWNER 및 ADMIN이 멤버들을 관리하고 가입 신청을 승인/거절할 수 있는 페이지

## 🎯 주요 기능

### 1. 멤버 목록 관리
- 현재 스터디에 속한 모든 멤버 표시
- 역할별 필터링 (OWNER, ADMIN, MEMBER)
- 멤버 검색 기능
- 멤버 정보 표시:
  - 이름, 이메일
  - 역할 (OWNER / ADMIN / MEMBER)
  - 가입일
  - 최근 활동일
  - 출석률, 참여도

### 2. 역할 관리 (OWNER만 가능)
- 멤버를 ADMIN으로 승격
- ADMIN을 MEMBER로 강등
- OWNER 권한 이양

### 3. 멤버 강퇴 (OWNER, ADMIN 가능)
- 멤버 강퇴 기능
- 강퇴 사유 입력
- 확인 모달

### 4. 가입 신청 관리
- 대기 중인 가입 신청 목록
- 신청자 정보 표시:
  - 이름, 이메일
  - 신청 날짜
  - 신청 메시지
- 승인/거절 기능
- 거절 시 사유 입력 (선택사항)

### 5. 통계 및 현황
- 총 멤버 수
- 역할별 인원 수
- 대기 중인 신청 수
- 최근 가입한 멤버

## 🎨 UI 구조

```
┌─────────────────────────────────────────────────────────────────┐
│ ← 내 스터디 목록                                                    │
│                                                                   │
│ 📚 [스터디명]                                    👑 OWNER/⭐ ADMIN   │
│ 👥 10/20명                                                        │
├─────────────────────────────────────────────────────────────────┤
│ 📊 개요 | 💬 채팅 | 📢 공지 | 📁 파일 | 📅 캘린더 | ✅ 할일 |      │
│ 📹 화상 | [👥 멤버] | ⚙️ 설정                                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│ ┌─────────────────────────────────────┐ ┌────────────────────┐  │
│ │ 👥 멤버 관리                    + 초대 │ │ 📊 멤버 현황        │  │
│ ├─────────────────────────────────────┤ ├────────────────────┤  │
│ │ [전체 10] [OWNER 1] [ADMIN 2]       │ │ 총 멤버: 10명       │  │
│ │ [MEMBER 7]                          │ │ • OWNER: 1명       │  │
│ │                                     │ │ • ADMIN: 2명       │  │
│ │ 🔍 [검색...]                        │ │ • MEMBER: 7명      │  │
│ │                                     │ │                    │  │
│ │ ┌─────────────────────────────────┐ │ │ 💬 가입 신청        │  │
│ │ │ 홍길동 👑 OWNER                  │ │ │ 대기 중: 3건       │  │
│ │ │ hong@example.com                │ │ │                    │  │
│ │ │ 가입: 2024-01-01                │ │ │ [신청 관리 →]     │  │
│ │ │ 출석률: 95%                     │ │ └────────────────────┘  │
│ │ └─────────────────────────────────┘ │                         │
│ │ ┌─────────────────────────────────┐ │ ┌────────────────────┐  │
│ │ │ 김철수 ⭐ ADMIN                 │ │ │ 📈 활동 통계        │  │
│ │ │ kim@example.com                 │ │ ├────────────────────┤  │
│ │ │ [강등] [강퇴]                   │ │ │ 최근 7일 활동:      │  │
│ │ └─────────────────────────────────┘ │ │ • 평균 출석률: 87% │  │
│ │ ┌─────────────────────────────────┐ │ │ • 메시지: 142건    │  │
│ │ │ 이영희 👤 MEMBER                │ │ │ • 파일 업로드: 8건 │  │
│ │ │ lee@example.com                 │ │ └────────────────────┘  │
│ │ │ [승격] [강퇴]                   │ │                         │
│ │ └─────────────────────────────────┘ │                         │
│ └─────────────────────────────────────┘                         │
│                                                                   │
│ ┌──────────────────────────────────────────────────────────────┐│
│ │ 🔔 가입 신청 (3)                                              ││
│ ├──────────────────────────────────────────────────────────────┤│
│ │ ┌────────────────────────────────────────────────────────────┐│
│ │ │ 박민수 (park@example.com)                                  ││
│ │ │ 신청일: 2024-01-15                                         ││
│ │ │ 메시지: "알고리즘 스터디에 참여하고 싶습니다..."            ││
│ │ │ [✅ 승인] [❌ 거절]                                        ││
│ │ └────────────────────────────────────────────────────────────┘│
│ └──────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

## 📊 데이터 구조

### StudyMember
```typescript
interface StudyMember {
  id: string;
  userId: string;
  studyId: string;
  role: 'OWNER' | 'ADMIN' | 'MEMBER';
  joinedAt: Date;
  lastActiveAt: Date;
  user: {
    id: string;
    name: string;
    email: string;
    image?: string;
  };
  stats?: {
    attendanceRate: number;
    messageCount: number;
    fileCount: number;
  };
}
```

### JoinRequest
```typescript
interface JoinRequest {
  id: string;
  userId: string;
  studyId: string;
  status: 'PENDING' | 'APPROVED' | 'REJECTED';
  message?: string;
  rejectionReason?: string;
  createdAt: Date;
  decidedAt?: Date;
  decidedBy?: string;
  user: {
    id: string;
    name: string;
    email: string;
    image?: string;
  };
}
```

## 🔌 API 엔드포인트

### 멤버 관리
- `GET /api/studies/[studyId]/members` - 멤버 목록 조회
- `PATCH /api/studies/[studyId]/members/[memberId]/role` - 역할 변경
- `DELETE /api/studies/[studyId]/members/[memberId]` - 멤버 강퇴
- `POST /api/studies/[studyId]/members/transfer-ownership` - 오너 권한 이양

### 가입 신청 관리
- `GET /api/studies/[studyId]/join-requests` - 가입 신청 목록
- `PATCH /api/studies/[studyId]/join-requests/[requestId]/approve` - 승인
- `PATCH /api/studies/[studyId]/join-requests/[requestId]/reject` - 거절

## 🔒 권한 관리

### OWNER
- 모든 멤버 관리 가능
- ADMIN 임명/해임
- OWNER 권한 이양
- 가입 신청 승인/거절

### ADMIN
- MEMBER 강퇴 (OWNER, ADMIN 제외)
- 가입 신청 승인/거절

### MEMBER
- 멤버 관리 탭 접근 불가

## 🎯 사용자 시나리오

### 시나리오 1: 멤버 역할 변경 (OWNER)
1. 멤버 관리 탭 진입
2. 특정 멤버 선택
3. "승격" 버튼 클릭
4. 확인 모달에서 승격 확인
5. 역할이 ADMIN으로 변경됨

### 시나리오 2: 멤버 강퇴 (OWNER/ADMIN)
1. 멤버 관리 탭 진입
2. 특정 멤버 선택
3. "강퇴" 버튼 클릭
4. 확인 모달에서 강퇴 사유 입력
5. 멤버가 스터디에서 제거됨

### 시나리오 3: 가입 신청 승인 (OWNER/ADMIN)
1. 멤버 관리 탭 진입
2. "가입 신청" 섹션으로 이동
3. 신청 내용 확인
4. "승인" 버튼 클릭
5. 신청자가 스터디 멤버로 추가됨

### 시나리오 4: 가입 신청 거절 (OWNER/ADMIN)
1. 멤버 관리 탭 진입
2. "가입 신청" 섹션으로 이동
3. 신청 내용 확인
4. "거절" 버튼 클릭
5. 거절 사유 입력 (선택사항)
6. 신청이 거절됨

## 📱 반응형 디자인

### 데스크톱 (1200px+)
- 2단 레이아웃 (멤버 목록 70% + 우측 위젯 30%)
- 가입 신청은 하단에 전체 너비로 표시

### 태블릿 (768px ~ 1199px)
- 2단 레이아웃 (멤버 목록 65% + 우측 위젯 35%)

### 모바일 (< 768px)
- 1단 레이아웃 (세로 스택)
- 우측 위젯이 상단으로 이동
- 멤버 카드 간소화

## 🎨 스타일 가이드

### 색상
- OWNER 배지: 빨간색 (#fee2e2 / #dc2626)
- ADMIN 배지: 보라색 (#ede9fe / #7c3aed)
- MEMBER 배지: 회색 (#f3f4f6 / #6b7280)
- 승인 버튼: 초록색 (#10b981)
- 거절/강퇴 버튼: 빨간색 (#ef4444)

### 레이아웃
- 공지 탭과 동일한 헤더 및 탭 스타일
- 카드 기반 디자인
- 파스텔 배경색 사용

## 🔔 알림

### 멤버 역할 변경 시
- 해당 멤버에게 이메일 알림
- 스터디 공지에 자동 게시 (선택사항)

### 멤버 강퇴 시
- 해당 멤버에게 이메일 알림
- 강퇴 사유 포함

### 가입 신청 승인/거절 시
- 신청자에게 이메일 알림
- 승인: 스터디 초대 링크 포함
- 거절: 거절 사유 포함 (입력한 경우)

## 🚀 향후 개선 사항

1. 멤버 일괄 관리 기능
2. 멤버 활동 상세 로그
3. 멤버 초대 기능 (이메일/링크)
4. 멤버 그룹 관리
5. 역할별 권한 세부 설정
6. 멤버 메모 기능

