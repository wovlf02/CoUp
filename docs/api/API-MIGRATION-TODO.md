# ğŸ”„ API í´ë¼ì´ì–¸íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜ TODO ë¦¬ìŠ¤íŠ¸

**ìƒì„±ì¼**: 2025-11-29  
**ì™„ë£Œì¼**: 2025-11-29  
**ìµœì¢… ì ê²€**: 2025-11-29  
**ëª©ì **: ê¸°ì¡´ `fetch()` í˜¸ì¶œì„ ì¤‘ì•™í™”ëœ `api` í´ë¼ì´ì–¸íŠ¸ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

---

## ğŸ“Š ë§ˆì´ê·¸ë ˆì´ì…˜ í˜„í™©

### âœ… ì™„ë£Œ (26ê°œ Client Components)
- [x] `/src/app/admin/page.jsx` - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- [x] `/src/app/admin/users/_components/UserList.jsx` - ì‚¬ìš©ì ëª©ë¡
- [x] `/src/app/(auth)/sign-in/page.jsx` - ë¡œê·¸ì¸ í˜ì´ì§€
- [x] `app/admin/reports/[reportId]/_components/ReportActions.jsx` - ì‹ ê³  ì²˜ë¦¬ ì•¡ì…˜
- [x] `app/admin/studies/[studyId]/_components/StudyActions.jsx` - ìŠ¤í„°ë”” ê´€ë¦¬ ì•¡ì…˜
- [x] `app/admin/analytics/_components/OverviewCharts.jsx` - ì „ì²´ í†µê³„ ê°œìš”
- [x] `app/admin/analytics/_components/StudyAnalytics.jsx` - ìŠ¤í„°ë”” ë¶„ì„
- [x] `app/admin/analytics/_components/UserAnalytics.jsx` - ì‚¬ìš©ì ë¶„ì„
- [x] `app/admin/settings/_components/SettingsForm.jsx` - ì„¤ì • í¼
- [x] `app/admin/settings/_components/SettingsHistory.jsx` - ì„¤ì • ë³€ê²½ ì´ë ¥
- [x] `app/admin/audit-logs/_components/LogFilters.jsx` - ë¡œê·¸ í•„í„°
- [x] `app/admin/audit-logs/_components/LogTable.jsx` - ë¡œê·¸ í…Œì´ë¸”
- [x] `app/admin/users/[userId]/_components/UserActions.jsx` - ì‚¬ìš©ì ì•¡ì…˜
- [x] `app/my-studies/[studyId]/chat/page.jsx` - ìŠ¤í„°ë”” ì±„íŒ… (íŒŒì¼ ì—…ë¡œë“œ POST + ë©”ì‹œì§€ ìˆ˜ì • PATCH)
- [x] `app/my-studies/[studyId]/video-call/page.jsx` - í™”ìƒíšŒì˜ íŒŒì¼ ì—…ë¡œë“œ (FormData)
- [x] `app/notifications/page.jsx` - ì•Œë¦¼ ëª©ë¡ (GET)
- [x] `app/notifications/page.jsx` - ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ (POST)
- [x] `app/notifications/page.jsx` - ì „ì²´ ì½ìŒ ì²˜ë¦¬ (POST)
- [x] `app/notifications/page.jsx` - ì•Œë¦¼ ì‚­ì œ (DELETE)
- [x] `app/user/settings/components/NotificationSettings.jsx` - ì•Œë¦¼ ì„¤ì • (PUT)
- [x] `app/user/settings/components/PasswordChange.jsx` - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ (PUT)
- [x] `app/user/settings/components/ProfileEdit.jsx` - ì•„ë°”íƒ€ ì—…ë¡œë“œ (POST FormData)
- [x] `app/user/settings/components/ProfileEdit.jsx` - í”„ë¡œí•„ ì €ì¥ (PUT)
- [x] `app/user/settings/components/ThemeSettings.jsx` - í…Œë§ˆ ì„¤ì • (PUT)

### ğŸ“ Server Component (fetch ìœ ì§€, 5ê°œ)
- [x] `app/admin/reports/[reportId]/page.jsx` - ì‹ ê³  ìƒì„¸ (Server Component)
- [x] `app/admin/reports/_components/ReportList.jsx` - ì‹ ê³  ëª©ë¡ (Server Component)
- [x] `app/admin/studies/[studyId]/page.jsx` - ìŠ¤í„°ë”” ìƒì„¸ (Server Component)
- [x] `app/admin/studies/_components/StudyList.jsx` - ìŠ¤í„°ë”” ëª©ë¡ (Server Component)
- [x] `app/admin/users/[userId]/page.jsx` - ì‚¬ìš©ì ìƒì„¸ (Server Component)

### ğŸ”„ ì§„í–‰ ì¤‘ (0ê°œ)

### â³ ëŒ€ê¸° ì¤‘ (0ê°œ íŒŒì¼)

**âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ 100% ì™„ë£Œ!**

---

## ğŸ“ˆ í†µê³„

- **ì´ Client Components**: 26ê°œ âœ…
- **ì´ Server Components**: 5ê°œ âœ…
- **ì´ API í˜¸ì¶œ ìˆ˜**: 45+ ê°œ
- **FormData ì²˜ë¦¬**: 3ê°œ íŒŒì¼
- **ì»´íŒŒì¼ ì—ëŸ¬**: 0ê°œ âœ…

---

## ğŸ“‹ ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ìƒ íŒŒì¼

### 1. ê´€ë¦¬ì - ë¶„ì„ (3ê°œ)
- [ ] `app/admin/analytics/_components/OverviewCharts.jsx`
  - Line 20: `fetch('/api/admin/analytics/overview')`
  - **ë³€ê²½**: `api.get('/api/admin/analytics/overview')`

- [ ] `app/admin/analytics/_components/StudyAnalytics.jsx`
  - Line 22: `fetch(...)` 
  - **ë³€ê²½**: `api.get(...)` with params

- [ ] `app/admin/analytics/_components/UserAnalytics.jsx`
  - Line 22: `fetch(...)`
  - **ë³€ê²½**: `api.get(...)` with params

---

### 2. ê´€ë¦¬ì - ê°ì‚¬ ë¡œê·¸ (2ê°œ)
- [ ] `app/admin/audit-logs/_components/LogFilters.jsx`
  - Line 40: `fetch('/api/admin/audit-logs?limit=1')`
  - **ë³€ê²½**: `api.get('/api/admin/audit-logs', { limit: 1 })`

- [ ] `app/admin/audit-logs/_components/LogTable.jsx`
  - Line 64: `fetch(\`/api/admin/audit-logs?${params}\`)`
  - **ë³€ê²½**: `api.get('/api/admin/audit-logs', paramsObject)`

---

### 3. ê´€ë¦¬ì - ì‹ ê³  (3ê°œ)
- [ ] `app/admin/reports/[reportId]/_components/ReportActions.jsx`
  - Line 38: `fetch(\`/api/admin/reports/${report.id}/assign\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/reports/${report.id}/assign\`, data)`
  - Line 81, 119, 156: `fetch(...)/process` (POST)
    - **ë³€ê²½**: `api.post(\`/api/admin/reports/${report.id}/process\`, data)`

- [ ] `app/admin/reports/[reportId]/page.jsx`
  - Line 10: `fetch(\`/api/admin/reports/${reportId}\`)`
  - **ë³€ê²½**: `api.get(\`/api/admin/reports/${reportId}\`)`

- [ ] `app/admin/reports/_components/ReportList.jsx`
  - Line 18: `fetch(\`/api/admin/reports?${params}\`)`
  - **ë³€ê²½**: `api.get('/api/admin/reports', paramsObject)`

---

### 4. ê´€ë¦¬ì - ì„¤ì • (2ê°œ)
- [ ] `app/admin/settings/_components/SettingsForm.jsx`
  - Line 31: `fetch('/api/admin/settings')` (GET)
    - **ë³€ê²½**: `api.get('/api/admin/settings')`
  - Line 84: `fetch('/api/admin/settings', { method: 'POST' })`
    - **ë³€ê²½**: `api.post('/api/admin/settings', data)`
  - Line 112: `fetch('/api/admin/settings/cache/clear', { method: 'POST' })`
    - **ë³€ê²½**: `api.post('/api/admin/settings/cache/clear')`

- [ ] `app/admin/settings/_components/SettingsHistory.jsx`
  - Line 15: `fetch(\`/api/admin/settings/history?page=${page}&limit=10\`)`
  - **ë³€ê²½**: `api.get('/api/admin/settings/history', { page, limit: 10 })`

---

### 5. ê´€ë¦¬ì - ìŠ¤í„°ë”” (2ê°œ)
- [ ] `app/admin/studies/[studyId]/_components/StudyActions.jsx`
  - Line 35, 69: `fetch(\`/api/admin/studies/${studyId}/hide\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/studies/${studyId}/hide\`, data)`
  - Line 98, 132: `fetch(\`/api/admin/studies/${studyId}/close\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/studies/${studyId}/close\`, data)`
  - Line 170: `fetch(..., { method: 'DELETE' })`
    - **ë³€ê²½**: `api.delete(...)`

- [ ] `app/admin/studies/[studyId]/page.jsx`
  - Line 14: `fetch(\`/api/admin/studies/${studyId}\`)`
  - **ë³€ê²½**: `api.get(\`/api/admin/studies/${studyId}\`)`

- [ ] `app/admin/studies/_components/StudyList.jsx`
  - Line 26: `fetch(\`/api/admin/studies?${params}\`)`
  - **ë³€ê²½**: `api.get('/api/admin/studies', paramsObject)`

---

### 6. ê´€ë¦¬ì - ì‚¬ìš©ì (2ê°œ)
- [ ] `app/admin/users/[userId]/_components/UserActions.jsx`
  - Line 22: `fetch(\`/api/admin/users/${user.id}/warn\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/users/${user.id}/warn\`, data)`
  - Line 46: `fetch(\`/api/admin/users/${user.id}/suspend\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/users/${user.id}/suspend\`, data)`
  - Line 72: `fetch(\`/api/admin/users/${user.id}/unsuspend\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/admin/users/${user.id}/unsuspend\`)`

- [ ] `app/admin/users/[userId]/page.jsx`
  - Line 12: `fetch(...)`
  - **ë³€ê²½**: `api.get(...)`

---

### 7. ì¼ë°˜ ì‚¬ìš©ì - ìŠ¤í„°ë”” (1ê°œ)
- [ ] `app/my-studies/[studyId]/chat/page.jsx`
  - Line 234: `fetch(\`/api/studies/${studyId}/files\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/studies/${studyId}/files\`, formData)` 
    - **ì£¼ì˜**: FormData ì²˜ë¦¬ í•„ìš”
  - Line 264: `fetch(\`/api/studies/${studyId}/chat\`, { method: 'POST' })`
    - **ë³€ê²½**: `api.post(\`/api/studies/${studyId}/chat\`, data)`

---

### 8. ì¶”ê°€ í™•ì¸ í•„ìš” (ê¸°íƒ€ íŒŒì¼)
- [ ] ëª¨ë“  ì»´í¬ë„ŒíŠ¸ íŒŒì¼ ì¬ê²€ìƒ‰
- [ ] useApi.js í›… ì‚¬ìš©í•˜ëŠ” íŒŒì¼ ì°¾ê¸°
- [ ] axios ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸

---

## ğŸ”§ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒ¨í„´

### GET ìš”ì²­
```javascript
// Before
const res = await fetch('/api/endpoint?param=value')
const data = await res.json()

// After
import api from '@/lib/api'
const data = await api.get('/api/endpoint', { param: 'value' })
```

### POST ìš”ì²­
```javascript
// Before
const res = await fetch('/api/endpoint', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
})

// After
import api from '@/lib/api'
const result = await api.post('/api/endpoint', data)
```

### PATCH ìš”ì²­
```javascript
// Before
const res = await fetch('/api/endpoint', {
  method: 'PATCH',
  body: JSON.stringify(data)
})

// After
import api from '@/lib/api'
const result = await api.patch('/api/endpoint', data)
```

### DELETE ìš”ì²­
```javascript
// Before
const res = await fetch('/api/endpoint', { method: 'DELETE' })

// After
import api from '@/lib/api'
const result = await api.delete('/api/endpoint')
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. FormData ì²˜ë¦¬
```javascript
// FormDataëŠ” í—¤ë”ë¥¼ ë¹„ì›Œì•¼ í•¨
const formData = new FormData()
formData.append('file', file)

// api.jsì—ì„œëŠ” ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©
await api.post('/api/upload', formData, {
  headers: {} // Content-Typeì„ ìë™ìœ¼ë¡œ ì„¤ì •í•˜ë„ë¡ ë¹„ì›€
})
```

### 2. Query Parameters
```javascript
// Before: ìˆ˜ë™ìœ¼ë¡œ URLSearchParams ìƒì„±
const params = new URLSearchParams()
params.set('page', 1)
params.set('limit', 20)
const res = await fetch(`/api/users?${params}`)

// After: ê°ì²´ë¡œ ì „ë‹¬
const result = await api.get('/api/users', { page: 1, limit: 20 })
```

### 3. ì—ëŸ¬ í•¸ë“¤ë§
```javascript
import { ApiError } from '@/lib/api'

try {
  const result = await api.get('/api/endpoint')
} catch (error) {
  if (error instanceof ApiError) {
    console.log('Status:', error.status)
    console.log('Message:', error.message)
  }
}
```

---

## ğŸ“ˆ ì§„í–‰ ìƒí™©

- **ì´ íŒŒì¼ ìˆ˜**: 31ê°œ
- **ì™„ë£Œ**: 3ê°œ (10%)
- **ë‚¨ì€ ì‘ì—…**: 28ê°œ (90%)

---

## ğŸ¯ ìš°ì„ ìˆœìœ„

### High Priority (ê´€ë¦¬ì ê¸°ëŠ¥)
1. âœ… ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
2. âœ… ì‚¬ìš©ì ê´€ë¦¬
3. ì‹ ê³  ì²˜ë¦¬ (3ê°œ íŒŒì¼)
4. ìŠ¤í„°ë”” ê´€ë¦¬ (3ê°œ íŒŒì¼)
5. ë¶„ì„ (3ê°œ íŒŒì¼)

### Medium Priority
6. ì„¤ì • (2ê°œ íŒŒì¼)
7. ê°ì‚¬ ë¡œê·¸ (2ê°œ íŒŒì¼)

### Low Priority
8. ì¼ë°˜ ì‚¬ìš©ì ê¸°ëŠ¥ (1ê°œ íŒŒì¼)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-29

