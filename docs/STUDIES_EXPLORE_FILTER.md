# ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ í•„í„°ë§ ìˆ˜ì •

## ğŸ“‹ ìˆ˜ì • ì¼ì
2025-01-21

## ğŸ¯ ëª©í‘œ
ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ìê°€ ì´ë¯¸ ì†Œì†ëœ ìŠ¤í„°ë””ëŠ” í‘œì‹œë˜ì§€ ì•Šë„ë¡ í•„í„°ë§

## âŒ ë¬¸ì œì 

### Before:
- ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ì— ëª¨ë“  ê³µê°œ ìŠ¤í„°ë””ê°€ í‘œì‹œë¨
- ì‚¬ìš©ìê°€ ì´ë¯¸ ì†Œì†ëœ ìŠ¤í„°ë””ë„ íƒìƒ‰ ëª©ë¡ì— ë‚˜íƒ€ë‚¨
- ì¤‘ë³µë˜ëŠ” ì •ë³´ë¡œ ì¸í•œ í˜¼ë€
- ë¶ˆí•„ìš”í•œ ìŠ¤í„°ë””ê°€ íƒìƒ‰ ëª©ë¡ì„ ì°¨ì§€í•¨

## âœ… í•´ê²° ë°©ë²•

### í•„í„°ë§ ë¡œì§ ì¶”ê°€

#### ìˆ˜ì •ëœ íŒŒì¼:
**íŒŒì¼**: `coup/src/app/studies/page.jsx`

### ë³€ê²½ì‚¬í•­:

#### 1. useMyStudies í›… import
```javascript
// Before
import { useStudies } from '@/lib/hooks/useApi';

// After
import { useStudies, useMyStudies } from '@/lib/hooks/useApi';
```

#### 2. ë‚´ ìŠ¤í„°ë”” ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ë° í•„í„°ë§
```javascript
// Before: ëª¨ë“  ê³µê°œ ìŠ¤í„°ë”” í‘œì‹œ
const { data, isLoading, error } = useStudies(queryParams);
const studies = data?.data || [];

// After: ë‚´ ìŠ¤í„°ë”” ì œì™¸
const { data, isLoading, error } = useStudies(queryParams);

// ë‚´ ìŠ¤í„°ë”” ëª©ë¡ ê°€ì ¸ì˜¤ê¸° (í•„í„°ë§ìš©)
const { data: myStudiesData } = useMyStudies({ limit: 100 });
const myStudyIds = (myStudiesData?.data || []).map(s => s.study?.id || s.studyId);

// ë‚´ ìŠ¤í„°ë””ë¥¼ ì œì™¸í•œ ëª©ë¡
const studies = (data?.data || []).filter(study => !myStudyIds.includes(study.id));
```

### ì‘ë™ ì›ë¦¬:

1. **ë‚´ ìŠ¤í„°ë”” ëª©ë¡ ì¡°íšŒ**
   - `useMyStudies({ limit: 100 })` - ì‚¬ìš©ìê°€ ì†Œì†ëœ ëª¨ë“  ìŠ¤í„°ë”” ê°€ì ¸ì˜¤ê¸°
   - ì¶©ë¶„íˆ í° limit ê°’ìœ¼ë¡œ ì „ì²´ ëª©ë¡ í™•ë³´

2. **ìŠ¤í„°ë”” ID ì¶”ì¶œ**
   - `map(s => s.study?.id || s.studyId)` - ê° ìŠ¤í„°ë””ì˜ ID ì¶”ì¶œ
   - ì¤‘ì²©ëœ êµ¬ì¡° ëŒ€ì‘ (`study.id` ë˜ëŠ” `studyId`)

3. **í•„í„°ë§ ì ìš©**
   - `filter(study => !myStudyIds.includes(study.id))` - ë‚´ ìŠ¤í„°ë”” IDì— í¬í•¨ë˜ì§€ ì•Šì€ ê²ƒë§Œ í‘œì‹œ
   - íƒìƒ‰ ëª©ë¡ì—ì„œ ì†Œì†ëœ ìŠ¤í„°ë”” ì œì™¸

## ğŸ“Š ê²°ê³¼

### After:
- âœ… ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ì— ì†Œì†ë˜ì§€ ì•Šì€ ìŠ¤í„°ë””ë§Œ í‘œì‹œ
- âœ… ì¤‘ë³µ ì •ë³´ ì œê±°ë¡œ ê¹”ë”í•œ íƒìƒ‰ ê²½í—˜
- âœ… ìƒˆë¡œìš´ ìŠ¤í„°ë”” ë°œê²¬ì— ì§‘ì¤‘ ê°€ëŠ¥
- âœ… íƒìƒ‰ ëª©ë¡ì˜ ì‹¤ìš©ì„± í–¥ìƒ

## ğŸ” í•„í„°ë§ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ì‚¬ìš©ì
```
ì „ì²´ ê³µê°œ ìŠ¤í„°ë””: 50ê°œ
ë‚´ê°€ ì†Œì†ëœ ìŠ¤í„°ë””: 3ê°œ
íƒìƒ‰ í˜ì´ì§€ í‘œì‹œ: 47ê°œ (50 - 3)
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê´€ë¦¬ì
```
ì „ì²´ ê³µê°œ ìŠ¤í„°ë””: 50ê°œ
ë‚´ê°€ ì†Œì†ëœ ìŠ¤í„°ë””: 10ê°œ (ê´€ë¦¬ 5ê°œ + ì°¸ì—¬ 3ê°œ + ëŒ€ê¸° 2ê°œ)
íƒìƒ‰ í˜ì´ì§€ í‘œì‹œ: 40ê°œ (50 - 10)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì‹ ê·œ ì‚¬ìš©ì
```
ì „ì²´ ê³µê°œ ìŠ¤í„°ë””: 50ê°œ
ë‚´ê°€ ì†Œì†ëœ ìŠ¤í„°ë””: 0ê°œ
íƒìƒ‰ í˜ì´ì§€ í‘œì‹œ: 50ê°œ (í•„í„°ë§ ì—†ìŒ)
```

## ğŸ“ í•„í„°ë§ ìƒì„¸

### ì œì™¸ë˜ëŠ” ìŠ¤í„°ë””:
- âœ… **MEMBER** ì—­í•  - ì¼ë°˜ ì°¸ì—¬ì¤‘ì¸ ìŠ¤í„°ë””
- âœ… **ADMIN** ì—­í•  - ê´€ë¦¬ì¤‘ì¸ ìŠ¤í„°ë””
- âœ… **OWNER** ì—­í•  - ì†Œìœ í•˜ê³  ìˆëŠ” ìŠ¤í„°ë””
- âœ… **PENDING** ì—­í•  - ê°€ì… ì‹ ì²­ í›„ ëŒ€ê¸°ì¤‘ì¸ ìŠ¤í„°ë””

### í‘œì‹œë˜ëŠ” ìŠ¤í„°ë””:
- âœ… ì†Œì†ë˜ì§€ ì•Šì€ ëª¨ë“  ê³µê°œ ìŠ¤í„°ë””
- âœ… ê²€ìƒ‰/í•„í„° ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìŠ¤í„°ë””
- âœ… ê°€ì… ê°€ëŠ¥í•œ ìŠ¤í„°ë””

## ğŸ¨ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### Before:
```
ìŠ¤í„°ë”” íƒìƒ‰ ëª©ë¡:
[ë‚´ ìŠ¤í„°ë”” 1] - ì´ë¯¸ ì†Œì†ë¨ (í˜¼ë€ìŠ¤ëŸ¬ì›€)
[ë‹¤ë¥¸ ìŠ¤í„°ë”” 1]
[ë‚´ ìŠ¤í„°ë”” 2] - ì´ë¯¸ ì†Œì†ë¨ (ë¶ˆí•„ìš”)
[ë‹¤ë¥¸ ìŠ¤í„°ë”” 2]
...
```

### After:
```
ìŠ¤í„°ë”” íƒìƒ‰ ëª©ë¡:
[ë‹¤ë¥¸ ìŠ¤í„°ë”” 1] - ìƒˆë¡œìš´ ìŠ¤í„°ë””
[ë‹¤ë¥¸ ìŠ¤í„°ë”” 2] - ìƒˆë¡œìš´ ìŠ¤í„°ë””
[ë‹¤ë¥¸ ìŠ¤í„°ë”” 3] - ìƒˆë¡œìš´ ìŠ¤í„°ë””
...
(ì†Œì†ëœ ìŠ¤í„°ë””ëŠ” í‘œì‹œ ì•ˆ ë¨)
```

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

### 1. í˜ì´ì§€ ë¡œë“œ
```
1. ê³µê°œ ìŠ¤í„°ë”” ëª©ë¡ ì¡°íšŒ
2. ë‚´ ìŠ¤í„°ë”” ëª©ë¡ ì¡°íšŒ
3. ë‚´ ìŠ¤í„°ë”” ID ì¶”ì¶œ
4. í•„í„°ë§ ì ìš©
5. ê²°ê³¼ í‘œì‹œ
```

### 2. ê²€ìƒ‰/í•„í„° ì ìš©
```
1. ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ìŠ¤í„°ë”” ì¡°íšŒ
2. ë‚´ ìŠ¤í„°ë”” ì œì™¸ í•„í„°ë§ ì ìš©
3. ê²°ê³¼ í‘œì‹œ
```

### 3. ìŠ¤í„°ë”” ê°€ì… í›„
```
1. ìŠ¤í„°ë”” ê°€ì… ì™„ë£Œ
2. íƒìƒ‰ í˜ì´ì§€ë¡œ ëŒì•„ê°
3. ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í„°ë””ê°€ ëª©ë¡ì—ì„œ ì œì™¸ë¨
```

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### API í˜¸ì¶œ:
- `useStudies` - í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©ëœ ê³µê°œ ìŠ¤í„°ë”” ëª©ë¡
- `useMyStudies` - ë‚´ ìŠ¤í„°ë”” ì „ì²´ ëª©ë¡ (limit: 100)

### ìµœì í™”:
- í´ë¼ì´ì–¸íŠ¸ ì¸¡ í•„í„°ë§ìœ¼ë¡œ ì¶”ê°€ ì„œë²„ ìš”ì²­ ì—†ìŒ
- ë‚´ ìŠ¤í„°ë”” ëª©ë¡ì€ í•œ ë²ˆë§Œ ì¡°íšŒ (ìºì‹± í™œìš©)
- í•„í„°ë§ ì—°ì‚°ì€ O(n*m)ì´ì§€ë§Œ n, mì´ ì¶©ë¶„íˆ ì‘ìŒ

### í–¥í›„ ê°œì„  ê°€ëŠ¥:
- ì„œë²„ ì¸¡ì—ì„œ `excludeMyStudies` íŒŒë¼ë¯¸í„° ì§€ì›
- ë‚´ ìŠ¤í„°ë”” IDë§Œ ë³„ë„ APIë¡œ ì¡°íšŒ
- ë¬´í•œ ìŠ¤í¬ë¡¤ ì§€ì› ì‹œ ê³ ë ¤ í•„ìš”

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„í„°ë§ í…ŒìŠ¤íŠ¸:
- [ ] ì†Œì†ëœ ìŠ¤í„°ë””ê°€ íƒìƒ‰ ëª©ë¡ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ
- [ ] MEMBER ì—­í•  ìŠ¤í„°ë”” ì œì™¸ë¨
- [ ] OWNER ì—­í•  ìŠ¤í„°ë”” ì œì™¸ë¨
- [ ] ADMIN ì—­í•  ìŠ¤í„°ë”” ì œì™¸ë¨
- [ ] PENDING ì—­í•  ìŠ¤í„°ë”” ì œì™¸ë¨ (ëŒ€ê¸°ì¤‘)

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸:
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ ì •ìƒ ì‘ë™
- [ ] ì¹´í…Œê³ ë¦¬ í•„í„°ë§ ì •ìƒ ì‘ë™
- [ ] í˜ì´ì§€ë„¤ì´ì…˜ ì •ìƒ ì‘ë™
- [ ] ë¹ˆ ëª©ë¡ ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ

### ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤:
- [ ] ì‹ ê·œ ì‚¬ìš©ì - ëª¨ë“  ìŠ¤í„°ë”” í‘œì‹œ
- [ ] ì¼ë°˜ ì‚¬ìš©ì - ì†Œì† ìŠ¤í„°ë”” ì œì™¸
- [ ] ê´€ë¦¬ì - ê´€ë¦¬ ìŠ¤í„°ë””ë„ ì œì™¸
- [ ] ìŠ¤í„°ë”” ê°€ì… í›„ - ëª©ë¡ì—ì„œ ì¦‰ì‹œ ì œì™¸

## ğŸ‰ ê²°ê³¼

ì´ì œ ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ì—ì„œ:
- âœ… ì†Œì†ëœ ìŠ¤í„°ë””ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ
- âœ… ìƒˆë¡œìš´ ìŠ¤í„°ë”” ë°œê²¬ì— ì§‘ì¤‘ ê°€ëŠ¥
- âœ… ê¹”ë”í•˜ê³  ëª…í™•í•œ íƒìƒ‰ ê²½í—˜
- âœ… ì¤‘ë³µ ì •ë³´ ì—†ëŠ” ì‹¤ìš©ì ì¸ ëª©ë¡
- âœ… ìë™ìœ¼ë¡œ í•„í„°ë§ë˜ì–´ í¸ë¦¬í•¨

ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ìŠ¤í„°ë”” íƒìƒ‰ í˜ì´ì§€ì—ì„œ ì†Œì†ëœ ìŠ¤í„°ë””ê°€ ì œì™¸ëœ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ‰

## ğŸ’¡ ì¶”ê°€ ê°œì„  ì•„ì´ë””ì–´

### 1. íƒˆí‡´í•œ ìŠ¤í„°ë”” ì¬í‘œì‹œ
```javascript
// íƒˆí‡´í•œ ìŠ¤í„°ë””ëŠ” ë‹¤ì‹œ íƒìƒ‰ ê°€ëŠ¥
const activeStudyIds = (myStudiesData?.data || [])
  .filter(s => s.status !== 'LEFT')
  .map(s => s.study?.id || s.studyId);
```

### 2. í•„í„° í† ê¸€ ì˜µì…˜
```javascript
// "ë‚´ ìŠ¤í„°ë”” í¬í•¨" ì²´í¬ë°•ìŠ¤ ì˜µì…˜
const [includeMyStudies, setIncludeMyStudies] = useState(false);
const studies = includeMyStudies 
  ? data?.data || []
  : (data?.data || []).filter(study => !myStudyIds.includes(study.id));
```

### 3. ì„œë²„ ì¸¡ í•„í„°ë§
```javascript
// API íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
const queryParams = {
  ...queryParams,
  excludeMyStudies: true,
};
```

