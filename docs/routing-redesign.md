# 라우팅 구조 재설계: 스터디 탐색 vs 내 스터디

## ? 설계 목표

**명확한 분리**: 사용자가 "스터디를 찾는 모드"와 "스터디에서 활동하는 모드"를 명확히 구분

---

## ? 라우팅 구조

### 1. 스터디 탐색 영역 (`/studies`)

**목적**: 새로운 스터디 찾기, 가입하기, 스터디 만들기

```
/studies                    → 공개 스터디 탐색 (검색/필터)
/studies/create             → 새 스터디 만들기
/studies/[studyId]          → 공개 스터디 프리뷰 (미가입자용)
```

**특징**:
- 모든 공개 스터디 표시
- 가입 전 스터디 정보 미리보기
- 카테고리/태그 검색
- "가입하기" 버튼 중심
- **제한된 정보**: 기본 정보, 멤버 수, 공지 일부만 표시

**페이지 구성**:
```
/studies 페이지:
- 필터 바 (카테고리, 정렬, 검색)
- 스터디 카드 그리드
- 우측 위젯: 추천 스터디, 인기 카테고리

/studies/[studyId] 페이지 (미가입자):
- 스터디 소개
- 그룹장 정보
- 최근 공지 2개 (미리보기)
- 멤버 프로필 (일부)
- [가입하기] 큰 버튼
```

---

### 2. 내 스터디 영역 (`/my-studies`)

**목적**: 가입한 스터디에서 활동, 소통, 관리

```
/my-studies                          → 내가 참여한 스터디 목록
/my-studies/[studyId]                → 스터디 대시보드 (개요)
/my-studies/[studyId]/chat           → 채팅
/my-studies/[studyId]/notices        → 공지사항
/my-studies/[studyId]/files          → 파일
/my-studies/[studyId]/calendar       → 캘린더
/my-studies/[studyId]/tasks          → 할 일
/my-studies/[studyId]/video-call     → 화상 통화
/my-studies/[studyId]/settings       → 설정 (OWNER/ADMIN만)
```

**특징**:
- 내가 참여한 스터디만 표시
- 역할별 배지 (OWNER/ADMIN/MEMBER)
- 전체 기능 접근 가능
- 실시간 알림 (새 메시지, 공지)
- 관리 기능 (권한에 따라)

**페이지 구성**:
```
/my-studies 페이지:
- 탭: 전체/참여중/관리중/대기중
- 스터디 카드 (빠른 액션 버튼)
- 우측 위젯: 나의 활동, 급한 할일, 다가오는 일정

/my-studies/[studyId] 페이지:
- 좌측: 스터디 네비게이션 (탭 메뉴)
- 중앙: 탭별 콘텐츠
- 우측: 실시간 위젯 (온라인 멤버, 빠른 액세스)
```

---

## ? 사용자 플로우

### 플로우 1: 새로운 스터디 찾기
```
1. /studies (스터디 탐색)
2. 스터디 카드 클릭 → /studies/[studyId] (프리뷰)
3. [가입하기] 클릭
4. ? 가입 완료 → /my-studies/[studyId] (자동 이동)
```

### 플로우 2: 내 스터디에서 활동
```
1. /my-studies (내 스터디 목록)
2. 스터디 카드 클릭 → /my-studies/[studyId] (대시보드)
3. 탭 클릭 (채팅/공지/파일 등)
4. 활동 후 → /my-studies (목록으로 돌아가기)
```

### 플로우 3: 스터디 만들기
```
1. /studies → [스터디 만들기] 클릭
2. /studies/create (생성 폼)
3. ? 생성 완료 → /my-studies/[newStudyId] (자동 이동, OWNER)
```

---

## ? 네비게이션 메뉴 구조

### 좌측 전역 네비게이션
```
? 대시보드        → /dashboard
? 스터디 탐색      → /studies
? 내 스터디       → /my-studies
? 할 일          → /tasks (전체 스터디 통합)
? 알림           → /notifications
? 마이페이지      → /my-page
```

**명확한 구분**:
- **스터디 탐색**: 찾기 아이콘 (?)
- **내 스터디**: 그룹 아이콘 (?)

---

## ? 페이지별 비교

| 구분 | 스터디 탐색 | 내 스터디 |
|------|------------|-----------|
| **URL** | `/studies` | `/my-studies` |
| **대상** | 모든 공개 스터디 | 내가 참여한 스터디 |
| **목적** | 찾기, 가입하기 | 활동하기, 관리하기 |
| **상세 페이지** | `/studies/[id]` (프리뷰) | `/my-studies/[id]` (전체) |
| **주요 액션** | 가입하기 | 채팅, 공지, 파일 등 |
| **정보 수준** | 제한적 (미리보기) | 전체 접근 |
| **탭 메뉴** | ? 없음 | ? 있음 (8개 탭) |
| **실시간 기능** | ? 없음 | ? 있음 (채팅, 알림) |

---

## ? 구현 방향

### 1. 기존 `/studies/[studyId]` 수정
- **가입 여부 확인**: 사용자가 이미 가입한 스터디면 → `/my-studies/[studyId]`로 리다이렉트
- **미가입 상태**: 제한된 정보만 표시 (프리뷰 모드)

### 2. `/my-studies/[studyId]` 생성
- 기존 `/studies/[studyId]`의 전체 기능을 이동
- 탭 네비게이션 포함
- 역할별 권한 체크

### 3. 컴포넌트 분리
```
/components/studies/
  ├── explore/              # 스터디 탐색용
  │   ├── StudyCard.jsx
  │   ├── StudyPreview.jsx
  │   └── FilterBar.jsx
  │
  └── my-studies/           # 내 스터디용
      ├── MyStudyCard.jsx
      ├── StudyDashboard.jsx
      ├── StudyTabs.jsx
      └── StudySidebar.jsx
```

---

## ? 핵심 차이점 요약

### 스터디 탐색 (`/studies`)
```
? 모든 공개 스터디
? 검색/필터 중심
? 가입 전 미리보기
? 제한된 정보
? 채팅/파일 접근 불가
```

### 내 스터디 (`/my-studies`)
```
? 내가 참여한 스터디만
? 전체 기능 접근
? 실시간 알림/채팅
? 역할별 권한 관리
? 활동 중심
```

---

## ? 구현 체크리스트

### Phase 1: 라우팅 분리
- [ ] `/my-studies/[studyId]` 폴더 구조 생성
- [ ] 기존 `/studies/[studyId]` 하위 파일들을 `/my-studies/[studyId]`로 이동
- [ ] `/studies/[studyId]`를 프리뷰 페이지로 재작성

### Phase 2: 가입 여부 체크
- [ ] 미들웨어 또는 페이지 로직에서 가입 여부 확인
- [ ] 가입된 스터디는 `/my-studies/[studyId]`로 자동 리다이렉트
- [ ] 미가입 스터디는 `/studies/[studyId]`에서 프리뷰만 표시

### Phase 3: 네비게이션 업데이트
- [ ] 좌측 메뉴: "스터디 탐색"과 "내 스터디" 명확히 구분
- [ ] 내 스터디 카드 클릭 시 `/my-studies/[studyId]`로 이동
- [ ] 스터디 탐색 카드 클릭 시 `/studies/[studyId]`로 이동

### Phase 4: UI/UX 개선
- [ ] 스터디 탐색: "가입하기" 버튼 강조
- [ ] 내 스터디: 역할 배지, 새 알림 표시
- [ ] 빵가루 네비게이션 추가

---

## ? 예시 시나리오

### 시나리오 1: 신규 사용자
```
1. /dashboard 접속
2. "스터디 탐색" 클릭 → /studies
3. "알고리즘 스터디" 카드 클릭 → /studies/123 (프리뷰)
4. [가입하기] 클릭
5. ? 가입 완료 → /my-studies/123 (전체 기능 접근)
```

### 시나리오 2: 기존 사용자
```
1. /dashboard 접속
2. "내 스터디" 클릭 → /my-studies
3. "알고리즘 스터디" 카드 클릭 → /my-studies/123
4. [채팅] 탭 클릭 → /my-studies/123/chat
5. 메시지 전송 후 활동
```

### 시나리오 3: 잘못된 접근 (자동 리다이렉트)
```
1. 가입한 스터디 ID를 알고 있음
2. /studies/123 직접 접속
3. ?? 이미 가입된 스터디 감지
4. ? 자동으로 /my-studies/123으로 리다이렉트
```

---

이 구조로 재설계하면:
- ? 명확한 사용자 경험
- ? 혼란 없는 라우팅
- ? 역할 기반 기능 제어
- ? 확장 가능한 구조

구현을 시작하겠습니다!

