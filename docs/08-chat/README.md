# ì±„íŒ… ë„ë©”ì¸ (Chat)

## ê°œìš”

CoUp í”„ë¡œì íŠ¸ì˜ ì±„íŒ… ë„ë©”ì¸ì€ ìŠ¤í„°ë”” ë©¤ë²„ ê°„ ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
Socket.IO ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ , íŒŒì¼ ì²¨ë¶€, ë©”ì‹œì§€ ê²€ìƒ‰, ì½ìŒ ì²˜ë¦¬ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•

- **ì‹¤ì‹œê°„ í†µì‹ **: Socket.IO ê¸°ë°˜ ì–‘ë°©í–¥ í†µì‹ 
- **ë‚™ê´€ì  ì—…ë°ì´íŠ¸**: ë©”ì‹œì§€ ì „ì†¡ ì¦‰ì‹œ UI ë°˜ì˜
- **íŒŒì¼ ì²¨ë¶€**: ì´ë¯¸ì§€, ë¬¸ì„œ ë“± íŒŒì¼ ì „ì†¡ (50MB ì œí•œ)
- **íƒ€ì´í•‘ í‘œì‹œ**: ìƒëŒ€ë°© íƒ€ì´í•‘ ì‹¤ì‹œê°„ í‘œì‹œ
- **ë©”ì‹œì§€ ê²€ìƒ‰**: í‚¤ì›Œë“œ, ë‚ ì§œ, ì‚¬ìš©ì ê¸°ì¤€ ê²€ìƒ‰
- **ë³´ì•ˆ ê²€ì¦**: XSS ë°©ì§€, ìŠ¤íŒ¸ ê°ì§€

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì±„íŒ… ë„ë©”ì¸                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     Client (Next.js)                             â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚   â”‚ MyStudyChatPage                                          â”‚   â”‚    â”‚
â”‚  â”‚   â”‚ /my-studies/[studyId]/chat                               â”‚   â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                        â”‚                                        â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚    â”‚
â”‚  â”‚   â”‚                    â”‚                    â”‚                   â”‚    â”‚
â”‚  â”‚   â–¼                    â–¼                    â–¼                   â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚   â”‚ useApi   â”‚   â”‚useSocket â”‚   â”‚ Socket.IO Events â”‚           â”‚    â”‚
â”‚  â”‚   â”‚ Hooks    â”‚   â”‚ Hook     â”‚   â”‚                  â”‚           â”‚    â”‚
â”‚  â”‚   â”‚          â”‚   â”‚          â”‚   â”‚ â€¢ study:join     â”‚           â”‚    â”‚
â”‚  â”‚   â”‚â€¢ useMsg  â”‚   â”‚â€¢ socket  â”‚   â”‚ â€¢ study:leave    â”‚           â”‚    â”‚
â”‚  â”‚   â”‚â€¢ useSend â”‚   â”‚â€¢ isConn  â”‚   â”‚ â€¢ study:message  â”‚           â”‚    â”‚
â”‚  â”‚   â”‚â€¢ useDel  â”‚   â”‚          â”‚   â”‚ â€¢ study:typing   â”‚           â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â”‚        â”‚              â”‚                   â”‚                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚              â”‚                   â”‚                          â”‚
â”‚           â–¼              â”‚                   â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Next.js API     â”‚    â”‚    â”‚  Signaling Server (Socket.IO)    â”‚     â”‚
â”‚  â”‚  Routes          â”‚    â”‚    â”‚  localhost:4000                  â”‚     â”‚
â”‚  â”‚                  â”‚    â”‚    â”‚                                  â”‚     â”‚
â”‚  â”‚  /api/studies/   â”‚    â””â”€â”€â”€>â”‚  â€¢ ì‹¤ì‹œê°„ ë©”ì‹œì§€ ë¸Œë¡œë“œìºìŠ¤íŠ¸    â”‚     â”‚
â”‚  â”‚   [id]/chat/*    â”‚         â”‚  â€¢ íƒ€ì´í•‘ ì´ë²¤íŠ¸ ì „íŒŒ            â”‚     â”‚
â”‚  â”‚                  â”‚         â”‚  â€¢ ë°© ì…ì¥/í‡´ì¥ ê´€ë¦¬             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                                                             â”‚
â”‚           â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚    Prisma DB     â”‚                                                   â”‚
â”‚  â”‚                  â”‚                                                   â”‚
â”‚  â”‚  â€¢ Message ì €ì¥  â”‚                                                   â”‚
â”‚  â”‚  â€¢ File ì—°ê²°     â”‚                                                   â”‚
â”‚  â”‚  â€¢ ì½ìŒ ì²˜ë¦¬     â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í˜ì´ì§€ êµ¬ì¡°

```
/my-studies/[studyId]/chat
â”‚
â”œâ”€â”€ page.jsx              # ì±„íŒ… ë©”ì¸ í˜ì´ì§€
â”œâ”€â”€ page.module.css       # ìŠ¤íƒ€ì¼
â”‚
â””â”€â”€ ê¸°ëŠ¥
    â”œâ”€â”€ ë©”ì‹œì§€ ëª©ë¡ (ë¬´í•œ ìŠ¤í¬ë¡¤)
    â”œâ”€â”€ ë©”ì‹œì§€ ì „ì†¡ (í…ìŠ¤íŠ¸ + íŒŒì¼)
    â”œâ”€â”€ ì‹¤ì‹œê°„ ìˆ˜ì‹  (Socket.IO)
    â”œâ”€â”€ íƒ€ì´í•‘ í‘œì‹œ
    â”œâ”€â”€ ë©”ì‹œì§€ ìˆ˜ì •/ì‚­ì œ
    â””â”€â”€ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
```

---

## ë°ì´í„° ëª¨ë¸

### Message

```javascript
{
  id: String,
  studyId: String,            // ìŠ¤í„°ë”” ID
  userId: String,             // ë°œì‹ ì ID
  content: String,            // ë©”ì‹œì§€ ë‚´ìš© (ìµœëŒ€ 2000ì)
  fileId: String | null,      // ì²¨ë¶€ íŒŒì¼ ID
  readers: String[],          // ì½ì€ ì‚¬ìš©ì ID ë°°ì—´
  createdAt: DateTime,
  updatedAt: DateTime,
  user: {                     // ë°œì‹ ì ì •ë³´
    id: String,
    name: String,
    avatar: String
  },
  file: {                     // ì²¨ë¶€ íŒŒì¼ ì •ë³´
    id: String,
    name: String,
    url: String,
    type: String,
    size: Number
  } | null
}
```

---

## API ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… | ì¸ì¦ | ê¶Œí•œ |
|--------|------|------|------|------|
| GET | `/api/studies/[id]/chat` | ë©”ì‹œì§€ ëª©ë¡ | âœ… | MEMBER+ |
| POST | `/api/studies/[id]/chat` | ë©”ì‹œì§€ ì „ì†¡ | âœ… | MEMBER+ |
| PATCH | `/api/studies/[id]/chat/[messageId]` | ë©”ì‹œì§€ ìˆ˜ì • | âœ… | ì‘ì„±ì |
| DELETE | `/api/studies/[id]/chat/[messageId]` | ë©”ì‹œì§€ ì‚­ì œ | âœ… | ì‘ì„±ì/ADMIN+ |
| POST | `/api/studies/[id]/chat/[messageId]/read` | ì½ìŒ ì²˜ë¦¬ | âœ… | MEMBER+ |
| GET | `/api/studies/[id]/chat/search` | ë©”ì‹œì§€ ê²€ìƒ‰ | âœ… | MEMBER+ |

---

## Socket.IO ì´ë²¤íŠ¸

### í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„

| ì´ë²¤íŠ¸ | í˜ì´ë¡œë“œ | ì„¤ëª… |
|--------|----------|------|
| `study:join` | `{ studyId }` | ì±„íŒ…ë°© ì…ì¥ |
| `study:leave` | `{ studyId }` | ì±„íŒ…ë°© í‡´ì¥ |
| `study:message` | `{ studyId, message }` | ë©”ì‹œì§€ ì „ì†¡ |
| `study:typing` | `{ studyId, userId, userName }` | íƒ€ì´í•‘ ì•Œë¦¼ |

### ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸

| ì´ë²¤íŠ¸ | í˜ì´ë¡œë“œ | ì„¤ëª… |
|--------|----------|------|
| `study:message` | `{ ...message, sender }` | ìƒˆ ë©”ì‹œì§€ ìˆ˜ì‹  |
| `study:typing` | `{ userId, userName }` | íƒ€ì´í•‘ í‘œì‹œ |

---

## ë°ì´í„° í”Œë¡œìš°

### ë©”ì‹œì§€ ì „ì†¡ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚     â”‚   Socket.IO   â”‚     â”‚   API Route  â”‚     â”‚   DB     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚  ë©”ì‹œì§€ ì…ë ¥      â”‚                     â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚  ë‚™ê´€ì  ì—…ë°ì´íŠ¸  â”‚                     â”‚                  â”‚
     â”‚  (tempId ì¶”ê°€)    â”‚                     â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚                   â”‚ POST /api/.../chat  â”‚                  â”‚
     â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚                   â”‚                     â”‚  ë³´ì•ˆ ê²€ì¦       â”‚
     â”‚                   â”‚                     â”‚  (XSS, ìŠ¤íŒ¸)     â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚                   â”‚                     â”‚  Message ì €ì¥    â”‚
     â”‚                   â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚                   â”‚  ì„±ê³µ ì‘ë‹µ          â”‚                  â”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚  study:message    â”‚                     â”‚                  â”‚
     â”‚  (ë¸Œë¡œë“œìºìŠ¤íŠ¸)   â”‚                     â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
     â”‚  tempId ì œê±°      â”‚  ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸    â”‚                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€(ìˆ˜ì‹ )         â”‚                  â”‚
     â”‚                   â”‚                     â”‚                  â”‚
```

### ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹  í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sender   â”‚     â”‚   Socket.IO   â”‚     â”‚  Receiver    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                     â”‚
     â”‚  study:message    â”‚                     â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
     â”‚                   â”‚                     â”‚
     â”‚                   â”‚  ë¸Œë¡œë“œìºìŠ¤íŠ¸       â”‚
     â”‚                   â”‚  (ê°™ì€ studyId)     â”‚
     â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                     â”‚
     â”‚                   â”‚                     â”‚  ìì‹  ë©”ì‹œì§€ í•„í„°
     â”‚                   â”‚                     â”‚  (senderId í™•ì¸)
     â”‚                   â”‚                     â”‚
     â”‚                   â”‚                     â”‚  realtimeMessages
     â”‚                   â”‚                     â”‚  ì— ì¶”ê°€
     â”‚                   â”‚                     â”‚
     â”‚                   â”‚                     â”‚  scrollToBottom()
     â”‚                   â”‚                     â”‚
```

---

## ë³´ì•ˆ ê¸°ëŠ¥

### XSS ë°©ì§€

```javascript
// ë³´ì•ˆ ìœ„í˜‘ ê²€ì¦
const threats = validateSecurityThreats(content)

if (!threats.safe) {
  logSecurityEvent('XSS_ATTEMPT_DETECTED', {
    userId: session.user.id,
    studyId,
    field: 'chat_message',
    threats: threats.threats,
  })
  
  throw ChatMessageException.xssDetected(threats.threats, {
    studyId,
    userId: session.user.id
  })
}
```

### ìŠ¤íŒ¸ ê°ì§€

```javascript
// ìµœê·¼ 10ì´ˆ ë‚´ 5ê°œ ì´ìƒ ë©”ì‹œì§€ = ìŠ¤íŒ¸
const timeWindow = 10  // seconds
const maxMessages = 5

const recentMessages = await prisma.message.count({
  where: {
    studyId,
    userId: session.user.id,
    createdAt: {
      gte: new Date(Date.now() - timeWindow * 1000)
    }
  }
})

if (recentMessages >= maxMessages) {
  throw ChatMessageException.spamDetected({
    studyId,
    userId: session.user.id,
    messageCount: recentMessages,
    timeWindow
  })
}
```

### ì…ë ¥ ê²€ì¦

```javascript
// ë©”ì‹œì§€ ê¸¸ì´ ì œí•œ (2000ì)
if (content.length > 2000) {
  throw ChatMessageException.contentTooLong(content.length, 2000, context)
}

// ì…ë ¥ê°’ ì‚´ê· 
const validation = validateAndSanitize({ content, fileId }, 'CHAT_MESSAGE')
```

---

## ì˜ˆì™¸ í´ë˜ìŠ¤

### ChatException ê³„ì¸µ

```
ChatException (Base)
â”œâ”€â”€ ChatMessageException    # ë©”ì‹œì§€ ê´€ë ¨ ì˜ˆì™¸
â”œâ”€â”€ ChatPermissionException # ê¶Œí•œ ê´€ë ¨ ì˜ˆì™¸
â”œâ”€â”€ ChatBusinessException   # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸
â”œâ”€â”€ ChatValidationException # ìœ íš¨ì„± ê²€ì¦ ì˜ˆì™¸
â”œâ”€â”€ ConnectionException     # ì—°ê²° ê´€ë ¨ ì˜ˆì™¸
â”œâ”€â”€ FileException          # íŒŒì¼ ê´€ë ¨ ì˜ˆì™¸
â”œâ”€â”€ SyncException          # ë™ê¸°í™” ì˜ˆì™¸
â””â”€â”€ UIException            # UI ê´€ë ¨ ì˜ˆì™¸
```

### ì£¼ìš” ì—ëŸ¬ ì½”ë“œ

| ì½”ë“œ | ì„¤ëª… |
|------|------|
| CHAT-001 | ë©”ì‹œì§€ ë‚´ìš© í•„ìˆ˜ |
| CHAT-002 | ë©”ì‹œì§€ ê¸¸ì´ ì´ˆê³¼ (2000ì) |
| CHAT-003 | XSS ìœ„í˜‘ ê°ì§€ |
| CHAT-004 | ìŠ¤íŒ¸ ê°ì§€ |
| CHAT-010 | ë©”ì‹œì§€ ì—†ìŒ |
| CHAT-011 | ìˆ˜ì • ê¶Œí•œ ì—†ìŒ |
| CHAT-012 | ì‚­ì œ ê¶Œí•œ ì—†ìŒ |

---

## íŒŒì¼ ì²¨ë¶€

### íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš°

```javascript
// 1. íŒŒì¼ ì—…ë¡œë“œ
const formData = new FormData()
formData.append('file', selectedFile)
formData.append('category', getFileCategory(selectedFile.type))

const uploadResult = await api.post(`/api/studies/${studyId}/files`, formData)

// 2. ì±„íŒ… ë©”ì‹œì§€ ìƒì„± (fileId í¬í•¨)
const messageResult = await api.post(`/api/studies/${studyId}/chat`, {
  content: `ğŸ“ ${selectedFile.name}`,
  fileId: uploadResult.data.id
})

// 3. Socket.IOë¡œ ì‹¤ì‹œê°„ ì „ì†¡
socket.emit('study:message', { studyId, message: messageResult.data })
```

### íŒŒì¼ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜

```javascript
const getFileCategory = (mimeType) => {
  if (mimeType.startsWith('image/')) return 'IMAGE'
  if (mimeType.startsWith('video/')) return 'VIDEO'
  if (mimeType.startsWith('audio/')) return 'AUDIO'
  if (['application/zip', 'application/x-rar-compressed', ...].includes(mimeType)) return 'ARCHIVE'
  if (['text/javascript', 'text/css', ...].includes(mimeType)) return 'CODE'
  return 'DOCUMENT'
}
```

### íŒŒì¼ í¬ê¸° ì œí•œ

| ì œí•œ | ê°’ |
|------|-----|
| ìµœëŒ€ í¬ê¸° | 50MB |

---

## ê´€ë ¨ ë¬¸ì„œ

- [API ë ˆí¼ëŸ°ìŠ¤](./api-reference.md) - ìƒì„¸ API ëª…ì„¸
- [ì»´í¬ë„ŒíŠ¸ ê°€ì´ë“œ](./components.md) - UI ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œ
- [Hooks](./hooks.md) - React Hooks ë¬¸ì„œ

