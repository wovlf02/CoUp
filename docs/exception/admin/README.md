# CoUp ê´€ë¦¬ì ê¸°ëŠ¥ ì˜ˆì™¸ ì²˜ë¦¬ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-11-29  
**ë²„ì „**: 1.0.0  
**ì¹´í…Œê³ ë¦¬**: ê´€ë¦¬ì (Admin)  
**ìš°ì„ ìˆœìœ„**: ğŸ”´ ìµœê³  (ë³´ì•ˆ ë° ê¶Œí•œ ê´€ë¦¬)

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ë¬¸ì„œ êµ¬ì¡°](#ë¬¸ì„œ-êµ¬ì¡°)
3. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
4. [ë³´ì•ˆ ë° ê¶Œí•œ](#ë³´ì•ˆ-ë°-ê¶Œí•œ)
5. [í•µì‹¬ ì˜ˆì™¸ ìƒí™©](#í•µì‹¬-ì˜ˆì™¸-ìƒí™©)
6. [ë¬¸ì„œ ì¸ë±ìŠ¤](#ë¬¸ì„œ-ì¸ë±ìŠ¤)
7. [ë¹ ë¥¸ ì°¸ì¡°](#ë¹ ë¥¸-ì°¸ì¡°)

---

## ê°œìš”

### ê´€ë¦¬ì ê¸°ëŠ¥ì´ë€?

CoUpì˜ ê´€ë¦¬ì ê¸°ëŠ¥ì€ ì‹œìŠ¤í…œ ì „ì²´ë¥¼ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤:

- **ì‚¬ìš©ì ê´€ë¦¬**: ì‚¬ìš©ì í™œì„±í™”, ì •ì§€, ì‚­ì œ, ì œì¬
- **ìŠ¤í„°ë”” ê´€ë¦¬**: ìŠ¤í„°ë”” ìŠ¹ì¸, ê±°ì ˆ, ê°•ì œ ì¢…ë£Œ
- **ì‹ ê³  ì²˜ë¦¬**: ì‹ ê³  ëª©ë¡ ì¡°íšŒ, ì²˜ë¦¬, ìš°ì„ ìˆœìœ„ ê´€ë¦¬
- **í†µê³„ ë° ë¶„ì„**: ëŒ€ì‹œë³´ë“œ, ì°¨íŠ¸, íŠ¸ë Œë“œ ë¶„ì„
- **ì‹œìŠ¤í…œ ì„¤ì •**: ì „ì—­ ì„¤ì •, ê³µì§€ì‚¬í•­, ìºì‹œ ê´€ë¦¬
- **ë¡œê·¸ ê´€ë¦¬**: ê´€ë¦¬ì ì•¡ì…˜ ë¡œê·¸, ê°ì‚¬ ì¶”ì 
- **ê¶Œí•œ ê´€ë¦¬**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)

### ì™œ ì¤‘ìš”í•œê°€?

ê´€ë¦¬ì ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ íŠ¹ë³„íˆ ì¤‘ìš”í•©ë‹ˆë‹¤:

1. **ë³´ì•ˆ**: ê¶Œí•œì´ ì—†ëŠ” ì‚¬ìš©ìì˜ ì ‘ê·¼ ì°¨ë‹¨ í•„ìˆ˜
2. **ê°ì‚¬**: ëª¨ë“  ê´€ë¦¬ì í–‰ë™ ë¡œê¹… ë° ì¶”ì  í•„ìš”
3. **ì±…ì„**: ì˜ëª»ëœ ì¡°ì¹˜ì˜ ì˜í–¥ì´ ì „ì²´ ì‹œìŠ¤í…œì— ë¯¸ì¹¨
4. **ê·œì • ì¤€ìˆ˜**: GDPR, ê°œì¸ì •ë³´ë³´í˜¸ë²• ë“± ë²•ì  ìš”êµ¬ì‚¬í•­
5. **ì‹ ë¢°**: ì‚¬ìš©ì ë°ì´í„° ë³´í˜¸ì™€ ê³µì •í•œ ìš´ì˜

### íŠ¹ë³„í•œ ê³ ë ¤ì‚¬í•­

- **ëª¨ë“  APIëŠ” ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ í•„ìˆ˜**
- **ëª¨ë“  í–‰ë™ì€ ê°ì‚¬ ë¡œê·¸ì— ê¸°ë¡**
- **ë¯¼ê°í•œ ì •ë³´ëŠ” ë§ˆìŠ¤í‚¹ ì²˜ë¦¬**
- **ì¤‘ìš” ì‘ì—…ì€ í™•ì¸ ë‹¨ê³„ í•„ìˆ˜**
- **ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜ ê³ ë ¤**

---

## ë¬¸ì„œ êµ¬ì¡°

ì´ ë””ë ‰í† ë¦¬ëŠ” ê´€ë¦¬ì ê¸°ëŠ¥ì˜ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì¡°í™”í•©ë‹ˆë‹¤:

```
docs/exception/admin/
â”œâ”€â”€ README.md                          # ì´ íŒŒì¼ (ê°œìš” ë° ê°€ì´ë“œ)
â”œâ”€â”€ INDEX.md                           # ì „ì²´ ì˜ˆì™¸ ìƒí™© ìƒ‰ì¸
â”œâ”€â”€ 01-user-management.md              # ì‚¬ìš©ì ê´€ë¦¬ ì˜ˆì™¸
â”œâ”€â”€ 02-study-management.md             # ìŠ¤í„°ë”” ê´€ë¦¬ ì˜ˆì™¸
â”œâ”€â”€ 03-report-handling.md              # ì‹ ê³  ì²˜ë¦¬ ì˜ˆì™¸
â”œâ”€â”€ 04-analytics-stats.md              # í†µê³„/ë¶„ì„ ì˜ˆì™¸
â”œâ”€â”€ 05-system-settings.md              # ì‹œìŠ¤í…œ ì„¤ì • ì˜ˆì™¸
â”œâ”€â”€ 06-audit-logs.md                   # ë¡œê·¸ ê´€ë¦¬ ì˜ˆì™¸
â”œâ”€â”€ 07-permissions-rbac.md             # ê¶Œí•œ ê´€ë¦¬ ì˜ˆì™¸
â”œâ”€â”€ 08-edge-cases.md                   # ì—£ì§€ ì¼€ì´ìŠ¤
â””â”€â”€ 99-best-practices.md               # ëª¨ë²” ì‚¬ë¡€
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì‚¬ìš©ì ê´€ë¦¬ (User Management)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET    /api/admin/users              # ì‚¬ìš©ì ëª©ë¡
GET    /api/admin/users/[id]         # ì‚¬ìš©ì ìƒì„¸
PATCH  /api/admin/users/[id]         # ì‚¬ìš©ì ìˆ˜ì •
DELETE /api/admin/users/[id]         # ì‚¬ìš©ì ì‚­ì œ
POST   /api/admin/users/[id]/suspend # ì‚¬ìš©ì ì •ì§€
POST   /api/admin/users/[id]/activate # ì‚¬ìš©ì í™œì„±í™”
```

**ì£¼ìš” ì˜ˆì™¸**:
- ìê¸° ìì‹  ìˆ˜ì •/ì‚­ì œ ì‹œë„
- ë‹¤ë¥¸ ê´€ë¦¬ìì— ëŒ€í•œ ì‘ì—…
- ì´ë¯¸ ì²˜ë¦¬ëœ ìƒíƒœ ì¤‘ë³µ ì²˜ë¦¬
- ê¶Œí•œ ë¶€ì¡±

**ì°¸ì¡° ë¬¸ì„œ**: `01-user-management.md`

---

### 2. ìŠ¤í„°ë”” ê´€ë¦¬ (Study Management)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET    /api/admin/studies                  # ìŠ¤í„°ë”” ëª©ë¡
GET    /api/admin/studies/[id]             # ìŠ¤í„°ë”” ìƒì„¸
PATCH  /api/admin/studies/[id]             # ìŠ¤í„°ë”” ìˆ˜ì •
POST   /api/admin/studies/[id]/close       # ìŠ¤í„°ë”” ê°•ì œ ì¢…ë£Œ
POST   /api/admin/studies/[id]/hide        # ìŠ¤í„°ë”” ìˆ¨ê¸°ê¸°
DELETE /api/admin/studies/[id]             # ìŠ¤í„°ë”” ì‚­ì œ
```

**ì£¼ìš” ì˜ˆì™¸**:
- í™œì„± ë©¤ë²„ê°€ ìˆëŠ” ìŠ¤í„°ë”” ì¢…ë£Œ
- ì´ë¯¸ ì¢…ë£Œëœ ìŠ¤í„°ë”” ì¬ì²˜ë¦¬
- ìŠ¤í„°ë”” ë°ì´í„° ë¶ˆì¼ì¹˜
- ì—°ê´€ ë°ì´í„° ì •ë¦¬ ì‹¤íŒ¨

**ì°¸ì¡° ë¬¸ì„œ**: `02-study-management.md`

---

### 3. ì‹ ê³  ì²˜ë¦¬ (Report Handling)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET    /api/admin/reports              # ì‹ ê³  ëª©ë¡
GET    /api/admin/reports/[id]         # ì‹ ê³  ìƒì„¸
PATCH  /api/admin/reports/[id]         # ì‹ ê³  ì²˜ë¦¬
POST   /api/admin/reports/[id]/action  # ì œì¬ ì¡°ì¹˜
```

**ì£¼ìš” ì˜ˆì™¸**:
- ì‹ ê³  ëŒ€ìƒì´ ì‚­ì œëœ ê²½ìš°
- ì¤‘ë³µ ì‹ ê³  ì²˜ë¦¬
- ì²˜ë¦¬ì ì¶©ëŒ (ë™ì‹œ ì²˜ë¦¬)
- ì œì¬ ì´ë ¥ ê´€ë¦¬

**ì°¸ì¡° ë¬¸ì„œ**: `03-report-handling.md`

---

### 4. í†µê³„ ë° ë¶„ì„ (Analytics & Stats)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET /api/admin/stats                    # ê¸°ë³¸ í†µê³„
GET /api/admin/analytics/overview       # ì „ì²´ ê°œìš”
GET /api/admin/analytics/users          # ì‚¬ìš©ì ë¶„ì„
GET /api/admin/analytics/studies        # ìŠ¤í„°ë”” ë¶„ì„
```

**ì£¼ìš” ì˜ˆì™¸**:
- ëŒ€ëŸ‰ ë°ì´í„° ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ
- ë‚ ì§œ ë²”ìœ„ ì˜¤ë¥˜
- ì§‘ê³„ ê³„ì‚° ì˜¤ë¥˜
- ìºì‹œ ë¶ˆì¼ì¹˜

**ì°¸ì¡° ë¬¸ì„œ**: `04-analytics-stats.md`

---

### 5. ì‹œìŠ¤í…œ ì„¤ì • (System Settings)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET  /api/admin/settings                 # ì„¤ì • ì¡°íšŒ
PUT  /api/admin/settings                 # ì„¤ì • ì—…ë°ì´íŠ¸
GET  /api/admin/settings/history         # ì„¤ì • ì´ë ¥
POST /api/admin/settings/cache/clear     # ìºì‹œ ì´ˆê¸°í™”
```

**ì£¼ìš” ì˜ˆì™¸**:
- ìœ íš¨í•˜ì§€ ì•Šì€ ì„¤ì • ê°’
- íƒ€ì… ë¶ˆì¼ì¹˜
- ìˆœí™˜ ì˜ì¡´ì„±
- ìºì‹œ ë™ê¸°í™” ì‹¤íŒ¨

**ì°¸ì¡° ë¬¸ì„œ**: `05-system-settings.md`

---

### 6. ë¡œê·¸ ê´€ë¦¬ (Audit Logs)

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET  /api/admin/audit-logs        # ë¡œê·¸ ì¡°íšŒ
GET  /api/admin/audit-logs/export # ë¡œê·¸ ë‚´ë³´ë‚´ê¸°
```

**ì£¼ìš” ì˜ˆì™¸**:
- ëŒ€ëŸ‰ ë¡œê·¸ ì¡°íšŒ ì„±ëŠ¥
- ë¡œê·¸ ì €ì¥ ì‹¤íŒ¨
- ë¯¼ê° ì •ë³´ ë…¸ì¶œ
- ë¡œê·¸ í•„í„°ë§ ì˜¤ë¥˜

**ì°¸ì¡° ë¬¸ì„œ**: `06-audit-logs.md`

---

### 7. ê¶Œí•œ ê´€ë¦¬ (Permissions & RBAC)

**í•µì‹¬ ê°œë…**:
```javascript
// ê¶Œí•œ ì²´ê³„
const PERMISSIONS = {
  USER_VIEW: 'user:view',
  USER_EDIT: 'user:edit',
  USER_DELETE: 'user:delete',
  STUDY_VIEW: 'study:view',
  STUDY_EDIT: 'study:edit',
  STUDY_DELETE: 'study:delete',
  REPORT_VIEW: 'report:view',
  REPORT_PROCESS: 'report:process',
  ANALYTICS_VIEW: 'analytics:view',
  SETTINGS_VIEW: 'settings:view',
  SETTINGS_UPDATE: 'settings:update',
  AUDIT_VIEW: 'audit:view',
}

// ì—­í• ë³„ ê¶Œí•œ
SUPER_ADMIN: ëª¨ë“  ê¶Œí•œ
ADMIN: ëŒ€ë¶€ë¶„ ê¶Œí•œ (settings:update ì œì™¸)
MODERATOR: ë³´ê¸° ë° ì‹ ê³  ì²˜ë¦¬ë§Œ
```

**ì£¼ìš” ì˜ˆì™¸**:
- ê¶Œí•œ ë¶€ì¡±
- ë§Œë£Œëœ ì„¸ì…˜
- ì—­í•  ë³€ê²½ í›„ ê¶Œí•œ ë¶ˆì¼ì¹˜
- ìˆœí™˜ ê¶Œí•œ ì°¸ì¡°

**ì°¸ì¡° ë¬¸ì„œ**: `07-permissions-rbac.md`

---

## ë³´ì•ˆ ë° ê¶Œí•œ

### ì¸ì¦ íë¦„

```mermaid
graph TD
    A[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B{ì„¸ì…˜ í™•ì¸}
    B -->|ì—†ìŒ| C[401 Unauthorized]
    B -->|ìˆìŒ| D{ì‚¬ìš©ì í™•ì¸}
    D -->|ì—†ìŒ| C
    D -->|ìˆìŒ| E{ê´€ë¦¬ì í™•ì¸}
    E -->|ì•„ë‹˜| F[403 Forbidden]
    E -->|ë§ìŒ| G{ê¶Œí•œ í™•ì¸}
    G -->|ì—†ìŒ| F
    G -->|ìˆìŒ| H[ìš”ì²­ ì²˜ë¦¬]
    H --> I[ë¡œê·¸ ê¸°ë¡]
    I --> J[ì‘ë‹µ ë°˜í™˜]
```

### ê¶Œí•œ ê²€ì¦ ì½”ë“œ

```javascript
// lib/admin/auth.js
export async function requireAdmin(request, requiredPermission) {
  // 1. ì„¸ì…˜ í™•ì¸
  const session = await getServerSession(authOptions)
  if (!session?.user?.id) {
    return NextResponse.json(
      { error: 'ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤' },
      { status: 401 }
    )
  }

  // 2. ê´€ë¦¬ì ì—­í•  í™•ì¸
  const adminRole = await prisma.adminRole.findUnique({
    where: { userId: session.user.id },
    include: { user: true }
  })

  if (!adminRole) {
    return NextResponse.json(
      { error: 'ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤' },
      { status: 403 }
    )
  }

  // 3. íŠ¹ì • ê¶Œí•œ í™•ì¸
  if (requiredPermission && !hasPermission(adminRole, requiredPermission)) {
    return NextResponse.json(
      { error: 'í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤' },
      { status: 403 }
    )
  }

  return { adminRole }
}
```

### ë¡œê¹… ì½”ë“œ

```javascript
// lib/admin/auth.js
export async function logAdminAction({
  adminId,
  action,
  targetType,
  targetId,
  details,
  request,
}) {
  await prisma.adminLog.create({
    data: {
      adminId,
      action,
      targetType,
      targetId,
      details,
      ipAddress: request.headers.get('x-forwarded-for') || 'unknown',
      userAgent: request.headers.get('user-agent') || 'unknown',
    }
  })
}
```

---

## í•µì‹¬ ì˜ˆì™¸ ìƒí™©

### 1. ê¶Œí•œ ê´€ë ¨ ì˜ˆì™¸

| ì˜ˆì™¸ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|-----------|
| **AUTH001** | ì„¸ì…˜ ì—†ìŒ | ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| **AUTH002** | ê´€ë¦¬ì ì•„ë‹˜ | 403 ì—ëŸ¬ í‘œì‹œ |
| **AUTH003** | ê¶Œí•œ ë¶€ì¡± | í•„ìš” ê¶Œí•œ ì•ˆë‚´ |
| **AUTH004** | ì„¸ì…˜ ë§Œë£Œ | ì¬ë¡œê·¸ì¸ ìš”ì²­ |
| **AUTH005** | IP ì œí•œ | ê´€ë¦¬ì ì—°ë½ ì•ˆë‚´ |

### 2. ë°ì´í„° ì‘ì—… ì˜ˆì™¸

| ì˜ˆì™¸ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|-----------|
| **DATA001** | ëŒ€ìƒ ì—†ìŒ | 404 ì—ëŸ¬ + ëª©ë¡ ìƒˆë¡œê³ ì¹¨ |
| **DATA002** | ì¤‘ë³µ ì²˜ë¦¬ | í˜„ì¬ ìƒíƒœ í‘œì‹œ |
| **DATA003** | ë™ì‹œì„± ì¶©ëŒ | ë‚™ê´€ì  ë½ ì‚¬ìš© |
| **DATA004** | íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ | ë¡¤ë°± + ì¬ì‹œë„ |
| **DATA005** | ì™¸ë˜ í‚¤ ì œì•½ | ì˜ì¡´ì„± ë¨¼ì € ì²˜ë¦¬ |

### 3. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì˜ˆì™¸

| ì˜ˆì™¸ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|-----------|
| **BIZ001** | ìê¸° ìì‹  ìˆ˜ì • | ë‹¤ë¥¸ ê´€ë¦¬ì ìš”ì²­ |
| **BIZ002** | ë§ˆì§€ë§‰ ê´€ë¦¬ì ì‚­ì œ | ì‚­ì œ ë°©ì§€ |
| **BIZ003** | í™œì„± ìŠ¤í„°ë”” ì¢…ë£Œ | ë©¤ë²„ í†µë³´ í›„ ì¢…ë£Œ |
| **BIZ004** | ì²˜ë¦¬ ì™„ë£Œ ì‹ ê³  ì¬ì²˜ë¦¬ | í˜„ì¬ ìƒíƒœ í‘œì‹œ |
| **BIZ005** | ìœ íš¨í•˜ì§€ ì•Šì€ ì„¤ì • | ê²€ì¦ + ê¸°ë³¸ê°’ |

### 4. ì„±ëŠ¥ ê´€ë ¨ ì˜ˆì™¸

| ì˜ˆì™¸ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|-----------|
| **PERF001** | ëŒ€ëŸ‰ ë°ì´í„° ì¿¼ë¦¬ | í˜ì´ì§€ë„¤ì´ì…˜ ê°•ì œ |
| **PERF002** | ëŠë¦° ì§‘ê³„ | ìºì‹œ ì‚¬ìš© |
| **PERF003** | íƒ€ì„ì•„ì›ƒ | ì¿¼ë¦¬ ìµœì í™” |
| **PERF004** | ë©”ëª¨ë¦¬ ë¶€ì¡± | ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ |
| **PERF005** | ì¦ì€ ë¡œê·¸ ì“°ê¸° | ë°°ì¹˜ ì²˜ë¦¬ |

---

## ë¬¸ì„œ ì¸ë±ìŠ¤

ê° ë¬¸ì„œëŠ” íŠ¹ì • ì˜ì—­ì˜ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤:

### 1. [ì‚¬ìš©ì ê´€ë¦¬](./01-user-management.md)
- ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì˜ˆì™¸
- ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ ì˜ˆì™¸
- ì‚¬ìš©ì ì •ì§€/í™œì„±í™” ì˜ˆì™¸
- ì‚¬ìš©ì ì‚­ì œ ì˜ˆì™¸
- ê²½ê³  ë° ì œì¬ ê´€ë¦¬

### 2. [ìŠ¤í„°ë”” ê´€ë¦¬](./02-study-management.md)
- ìŠ¤í„°ë”” ëª©ë¡ ì¡°íšŒ ì˜ˆì™¸
- ìŠ¤í„°ë”” ìƒì„¸ ì¡°íšŒ ì˜ˆì™¸
- ìŠ¤í„°ë”” ê°•ì œ ì¢…ë£Œ ì˜ˆì™¸
- ìŠ¤í„°ë”” ìˆ¨ê¸°ê¸°/ì‚­ì œ ì˜ˆì™¸
- ë©¤ë²„ ê´€ë¦¬ ì˜ˆì™¸

### 3. [ì‹ ê³  ì²˜ë¦¬](./03-report-handling.md)
- ì‹ ê³  ëª©ë¡ ì¡°íšŒ ì˜ˆì™¸
- ì‹ ê³  ìƒì„¸ ì¡°íšŒ ì˜ˆì™¸
- ì‹ ê³  ì²˜ë¦¬ ì˜ˆì™¸
- ì œì¬ ì¡°ì¹˜ ì˜ˆì™¸
- ì‹ ê³  ìš°ì„ ìˆœìœ„ ê´€ë¦¬

### 4. [í†µê³„ ë° ë¶„ì„](./04-analytics-stats.md)
- ì „ì²´ í†µê³„ ì¡°íšŒ ì˜ˆì™¸
- ì‚¬ìš©ì ë¶„ì„ ì˜ˆì™¸
- ìŠ¤í„°ë”” ë¶„ì„ ì˜ˆì™¸
- ì°¨íŠ¸ ë°ì´í„° ì˜ˆì™¸
- ì„±ëŠ¥ ìµœì í™”

### 5. [ì‹œìŠ¤í…œ ì„¤ì •](./05-system-settings.md)
- ì„¤ì • ì¡°íšŒ ì˜ˆì™¸
- ì„¤ì • ì—…ë°ì´íŠ¸ ì˜ˆì™¸
- ì„¤ì • ê²€ì¦ ì˜ˆì™¸
- ìºì‹œ ê´€ë¦¬ ì˜ˆì™¸
- ì„¤ì • ì´ë ¥ ê´€ë¦¬

### 6. [ë¡œê·¸ ê´€ë¦¬](./06-audit-logs.md)
- ë¡œê·¸ ì¡°íšŒ ì˜ˆì™¸
- ë¡œê·¸ í•„í„°ë§ ì˜ˆì™¸
- ë¡œê·¸ ë‚´ë³´ë‚´ê¸° ì˜ˆì™¸
- ë¯¼ê° ì •ë³´ ë§ˆìŠ¤í‚¹
- ë¡œê·¸ ë³´ê´€ ì •ì±…

### 7. [ê¶Œí•œ ê´€ë¦¬](./07-permissions-rbac.md)
- ê¶Œí•œ ê²€ì¦ ì˜ˆì™¸
- ì—­í•  ê´€ë¦¬ ì˜ˆì™¸
- ê¶Œí•œ ìƒì† ì˜ˆì™¸
- ì„¸ì…˜ ê´€ë¦¬ ì˜ˆì™¸
- IP ì œí•œ ì˜ˆì™¸

### 8. [ì—£ì§€ ì¼€ì´ìŠ¤](./08-edge-cases.md)
- ê·¹í•œ ìƒí™© (ëŒ€ëŸ‰ ë°ì´í„°)
- ë™ì‹œì„± ë¬¸ì œ
- ë„¤íŠ¸ì›Œí¬ ì¥ì• 
- ë°ì´í„°ë² ì´ìŠ¤ ì¥ì• 
- íƒ€ì‚¬ ì„œë¹„ìŠ¤ ì¥ì• 

### 9. [ëª¨ë²” ì‚¬ë¡€](./99-best-practices.md)
- ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
- ì½”ë“œ ë¦¬ë·° ê°€ì´ë“œ
- í…ŒìŠ¤íŠ¸ ì „ëµ
- ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
- ìš´ì˜ ê°€ì´ë“œ

---

## ë¹ ë¥¸ ì°¸ì¡°

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

#### 1. "ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤" (403)

**ì›ì¸**:
- ì¼ë°˜ ì‚¬ìš©ìê°€ ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼
- ê¶Œí•œì´ ì—†ëŠ” ê´€ë¦¬ìê°€ íŠ¹ì • ì‘ì—… ì‹œë„

**í•´ê²°**:
```javascript
// 1. ê´€ë¦¬ì ì—¬ë¶€ í™•ì¸
const admin = await prisma.adminRole.findUnique({
  where: { userId: session.user.id }
})

if (!admin) {
  // ì¼ë°˜ ì‚¬ìš©ì - í™ˆìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  redirect('/')
}

// 2. íŠ¹ì • ê¶Œí•œ í™•ì¸
if (!hasPermission(admin, 'USER_DELETE')) {
  // ê¶Œí•œ ì—†ìŒ - ì•ˆë‚´ ë©”ì‹œì§€
  toast.error('ì‚¬ìš©ì ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤')
}
```

#### 2. "ìê¸° ìì‹ ì„ ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"

**ì›ì¸**:
- ê´€ë¦¬ìê°€ ìì‹ ì˜ ê³„ì • ì¡°ì‘ ì‹œë„

**í•´ê²°**:
```javascript
// APIì—ì„œ ê²€ì¦
if (targetUserId === session.user.id) {
  return NextResponse.json(
    { error: 'ìê¸° ìì‹ ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤' },
    { status: 400 }
  )
}

// UIì—ì„œ ë¹„í™œì„±í™”
<button
  disabled={user.id === session.user.id}
  onClick={handleSuspend}
>
  ì •ì§€
</button>
```

#### 3. "ë¡œê·¸ ê¸°ë¡ ì‹¤íŒ¨" ê²½ê³ 

**ì›ì¸**:
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ì œ
- ë¡œê·¸ í…Œì´ë¸” ìš©ëŸ‰ ì´ˆê³¼
- ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„°

**í•´ê²°**:
```javascript
// ë¹„ë™ê¸° ë¡œê¹… (ì‹¤íŒ¨í•´ë„ ìš”ì²­ ì²˜ë¦¬ ê³„ì†)
async function safeLogAdminAction(data) {
  try {
    await logAdminAction(data)
  } catch (error) {
    console.error('ë¡œê·¸ ê¸°ë¡ ì‹¤íŒ¨:', error)
    // ë³„ë„ ë¡œê¹… ì‹œìŠ¤í…œìœ¼ë¡œ í´ë°±
    await fallbackLogger.log(data)
  }
}

// ë©”ì¸ ë¡œì§ì€ ì˜í–¥ ë°›ì§€ ì•ŠìŒ
const result = await updateUser(...)
await safeLogAdminAction({ ... })
return result
```

#### 4. "í†µê³„ ì¡°íšŒ íƒ€ì„ì•„ì›ƒ"

**ì›ì¸**:
- ëŒ€ëŸ‰ ë°ì´í„° ì§‘ê³„
- ë³µì¡í•œ JOIN ì¿¼ë¦¬
- ì¸ë±ìŠ¤ ë¶€ì¡±

**í•´ê²°**:
```javascript
// 1. ìºì‹œ ì‚¬ìš©
const cachedStats = await redis.get('admin:stats:overview')
if (cachedStats) {
  return JSON.parse(cachedStats)
}

const stats = await calculateStats()
await redis.setex('admin:stats:overview', 300, JSON.stringify(stats))

// 2. í˜ì´ì§€ë„¤ì´ì…˜
const limit = Math.min(searchParams.get('limit') || 20, 100)

// 3. ì¸ë±ìŠ¤ ì¶”ê°€
// schema.prisma
@@index([createdAt, status])
@@index([userId, action])
```

#### 5. "ì„¤ì • ì—…ë°ì´íŠ¸ í›„ ìºì‹œ ë¶ˆì¼ì¹˜"

**ì›ì¸**:
- ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ìºì‹œ ì‚¬ìš©
- ìºì‹œ ë¬´íš¨í™” ì‹¤íŒ¨

**í•´ê²°**:
```javascript
// Redis pub/subë¡œ ì „ì²´ ì¸ìŠ¤í„´ìŠ¤ ìºì‹œ ë¬´íš¨í™”
async function updateSettings(settings) {
  await prisma.systemSetting.updateMany(...)
  
  // ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ì•Œë¦¼
  await redis.publish('settings:invalidate', JSON.stringify({
    timestamp: Date.now()
  }))
}

// ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” êµ¬ë…
redis.subscribe('settings:invalidate')
redis.on('message', (channel, message) => {
  if (channel === 'settings:invalidate') {
    settingsCache = null
  }
})
```

---

## ê¸´ê¸‰ ìƒí™© ëŒ€ì‘

### ê´€ë¦¬ì ê³„ì • ì ê¹€

```bash
# ìŠ¤í¬ë¦½íŠ¸ë¡œ ê´€ë¦¬ì í™œì„±í™”
node scripts/activate-users.js --email admin@example.com

# ë˜ëŠ” ì§ì ‘ DB ìˆ˜ì •
psql -U postgres -d coup
UPDATE "User" SET status = 'ACTIVE' WHERE email = 'admin@example.com';
```

### ëª¨ë“  ê´€ë¦¬ìê°€ ì‚­ì œë¨

```bash
# ê¸´ê¸‰ ê´€ë¦¬ì ìƒì„±
node scripts/create-test-admin.js \
  --email emergency@coup.com \
  --password secure_password \
  --role SUPER_ADMIN
```

### ì„¤ì • ì˜¤ë¥˜ë¡œ ì‹œìŠ¤í…œ ë‹¤ìš´

```bash
# ì„¤ì • ë¡¤ë°±
node scripts/rollback-settings.js --to-version 1.2.3

# ë˜ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹
node scripts/reset-settings.js --confirm
```

### ëŒ€ëŸ‰ ìŠ¤íŒ¸ ì‹ ê³ 

```bash
# ì¼ê´„ ì‹ ê³  ê±°ì ˆ
node scripts/bulk-reject-reports.js \
  --from "2025-11-29 00:00" \
  --to "2025-11-29 23:59" \
  --reason "spam"
```

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ê´€ë ¨ ë¬¸ì„œ
- [ê´€ë¦¬ì ê¸°ëŠ¥ ìµœì¢… ê°€ì´ë“œ](../../admin/FINAL-README.md)
- [ê´€ë¦¬ì ìš´ì˜ ë§¤ë‰´ì–¼](../../admin/OPERATIONS-MANUAL.md)
- [API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œ](../../admin/API-ENDPOINTS.md)

### ì½”ë“œ ìœ„ì¹˜
- **API**: `src/app/api/admin/**`
- **í˜ì´ì§€**: `src/app/admin/**`
- **ì»´í¬ë„ŒíŠ¸**: `src/components/admin/**`
- **ìœ í‹¸**: `src/lib/admin/**`
- **ìŠ¤í¬ë¦½íŠ¸**: `scripts/**`

### í…ŒìŠ¤íŠ¸ ë„êµ¬
- **ê´€ë¦¬ì ìƒì„±**: `scripts/create-test-admin.js`
- **ì‚¬ìš©ì ìƒíƒœ í™•ì¸**: `scripts/check-user-status.js`
- **ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸**: `scripts/test-login.js`

---

## ê¸°ì—¬ ê°€ì´ë“œ

ë¬¸ì„œ ê°œì„  ì œì•ˆì´ë‚˜ ìƒˆë¡œìš´ ì˜ˆì™¸ ì¼€ì´ìŠ¤ ë°œê²¬ ì‹œ:

1. í•´ë‹¹ ë¬¸ì„œ íŒŒì¼ ìˆ˜ì •
2. INDEX.mdì— ì˜ˆì™¸ ì½”ë“œ ì¶”ê°€
3. ì´ READMEì˜ ë¹ ë¥¸ ì°¸ì¡° ì—…ë°ì´íŠ¸
4. ì‹¤ì œ ì½”ë“œ ì˜ˆì œ í¬í•¨

---

**ë‹¤ìŒ ë¬¸ì„œ**: [ì „ì²´ ìƒ‰ì¸ (INDEX.md)](./INDEX.md)

