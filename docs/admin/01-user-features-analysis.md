# 일반 사용자 기능 분석

> **작성일**: 2025-11-26  
> **목적**: CoUp의 일반 사용자 기능을 체계적으로 분석하여 관리자가 관리해야 할 대상 파악

---

## 📋 목차

1. [인증 및 계정 관리](#1-인증-및-계정-관리)
2. [대시보드](#2-대시보드)
3. [스터디 기능](#3-스터디-기능)
4. [마이페이지](#4-마이페이지)
5. [알림 시스템](#5-알림-시스템)
6. [모달 및 인터랙션](#6-모달-및-인터랙션)

---

## 1. 인증 및 계정 관리

### 1.1 회원가입
**경로**: `/sign-up`

**기능**:
- 이메일 + 비밀번호 회원가입
- 소셜 로그인 (Google, GitHub)
- 이용약관 동의
- 이메일 인증

**관리 필요 사항**:
- ❌ 부적절한 이름/닉네임 필터링
- ❌ 스팸 계정 탐지 및 차단
- ❌ 소셜 계정 연동 오류 처리

### 1.2 로그인
**경로**: `/sign-in`

**기능**:
- 이메일/비밀번호 로그인
- 소셜 로그인
- 로그인 상태 유지
- 비밀번호 찾기

**관리 필요 사항**:
- ❌ 비정상 로그인 시도 모니터링
- ❌ 계정 정지 시 로그인 차단
- ❌ 세션 관리 및 강제 로그아웃

### 1.3 프로필 관리
**경로**: `/me` (마이페이지)

**기능**:
- 프로필 사진 업로드
- 이름, 자기소개 수정
- 비밀번호 변경
- 계정 탈퇴

**관리 필요 사항**:
- ❌ 부적절한 프로필 사진 검열
- ❌ 욕설/혐오 발언 자기소개 차단
- ❌ 탈퇴 계정 데이터 처리

---

## 2. 대시보드

### 2.1 메인 대시보드
**경로**: `/dashboard`

**표시 정보**:
- 내 스터디 목록 (참여 중인 스터디)
- 최근 활동 (메시지, 공지)
- 오늘의 할일
- 다가오는 일정
- 추천 스터디

**관리 필요 사항**:
- ✅ 전체 스터디 활동 모니터링
- ✅ 비활성 스터디 정리 권장
- ✅ 추천 알고리즘 개선

---

## 3. 스터디 기능

### 3.1 스터디 탐색
**경로**: `/studies`

**기능**:
- 스터디 검색 (이름, 태그, 카테고리)
- 필터링 (카테고리, 최대 인원, 공개/비공개)
- 정렬 (최신순, 인기순, 평점순)
- 스터디 상세 미리보기

**관리 필요 사항**:
- ✅ 부적절한 스터디 숨김
- ✅ 우수 스터디 추천 마크
- ✅ 스팸 스터디 차단

### 3.2 스터디 생성
**경로**: `/studies/create`

**입력 정보**:
- 스터디 이름, 이모지
- 설명
- 카테고리, 서브카테고리
- 최대 인원
- 공개 여부, 자동 승인 여부
- 태그

**관리 필요 사항**:
- ❌ 스터디 생성 제한 (스팸 방지)
- ❌ 부적절한 스터디명/설명 필터링
- ✅ 중복 스터디 감지

### 3.3 스터디 상세 페이지
**경로**: `/my-studies/[studyId]`

**탭 구조**:
1. **개요** (`/my-studies/[studyId]`)
   - 스터디 기본 정보
   - 멤버 목록
   - 최근 활동
   - 가입 신청 버튼

2. **채팅** (`/my-studies/[studyId]/chat`)
   - 실시간 채팅
   - 파일 첨부
   - 이모지 반응
   - 읽음 표시

3. **공지사항** (`/my-studies/[studyId]/notices`)
   - 공지 작성/수정/삭제 (관리자만)
   - 중요 공지 고정
   - 조회수 표시

4. **파일** (`/my-studies/[studyId]/files`)
   - 파일 업로드/다운로드
   - 폴더 구조
   - 파일 검색

5. **캘린더** (`/my-studies/[studyId]/calendar`)
   - 일정 생성/수정/삭제
   - 월간/주간 뷰
   - 구글 캘린더 연동

6. **할일** (`/my-studies/[studyId]/tasks`)
   - 할일 생성/완료
   - 담당자 지정
   - 마감일 관리
   - 우선순위 설정

7. **멤버** (`/my-studies/[studyId]/members`) - 관리자만
   - 멤버 목록
   - 역할 변경 (OWNER, ADMIN, MEMBER)
   - 멤버 추방
   - 가입 신청 승인/거절

8. **설정** (`/my-studies/[studyId]/settings`) - 관리자만
   - 스터디 정보 수정
   - 공개 설정
   - 모집 상태
   - 스터디 삭제

**관리 필요 사항**:
- ✅ 채팅 내 욕설/혐오 발언 필터링
- ✅ 불법 파일 업로드 차단
- ✅ 스터디 분쟁 조정
- ✅ 비활성 스터디 정리

### 3.4 화상 스터디
**경로**: `/my-studies/[studyId]/video-call`

**기능**:
- WebRTC 기반 화상 통화
- 화면 공유
- 채팅
- 참여자 관리

**관리 필요 사항**:
- ✅ 화상 통화 품질 모니터링
- ❌ 부적절한 행위 신고 처리
- ✅ 서버 리소스 관리

---

## 4. 마이페이지

### 4.1 프로필
**경로**: `/me`

**표시 정보**:
- 프로필 사진
- 이름, 이메일
- 자기소개
- 가입일
- 참여 스터디 수

**수정 가능 항목**:
- 프로필 사진
- 이름
- 자기소개
- 비밀번호

**관리 필요 사항**:
- ✅ 프로필 정보 검열
- ✅ 사용자 활동 이력 조회

### 4.2 내 스터디
**경로**: `/my-studies`

**필터**:
- 전체
- 내가 만든 스터디
- 관리 중인 스터디
- 가입 대기 중

**관리 필요 사항**:
- ✅ 스터디 참여 이력 조회
- ✅ 강제 탈퇴 처리

### 4.3 할일 목록
**경로**: `/tasks`

**기능**:
- 전체 할일 통합 뷰
- 스터디별 필터링
- 완료 상태 토글
- 우선순위 정렬

**관리 필요 사항**:
- ℹ️ 관리 불필요 (개인 데이터)

### 4.4 알림 설정
**경로**: `/settings`

**설정 항목**:
- 이메일 알림
- 푸시 알림
- 알림 카테고리별 on/off

**관리 필요 사항**:
- ℹ️ 관리 불필요 (개인 설정)

---

## 5. 알림 시스템

### 5.1 알림 목록
**경로**: `/notifications`

**알림 유형**:
1. **스터디 초대**: 스터디 가입 요청
2. **가입 승인/거절**: 신청 결과
3. **멤버 활동**: 새 메시지, 공지, 파일
4. **할일**: 할일 할당, 마감 임박
5. **일정**: 일정 생성, 변경, 시작 임박
6. **시스템**: 공지사항, 업데이트

**기능**:
- 읽음/안읽음 표시
- 알림 삭제
- 알림 클릭 시 해당 페이지 이동

**관리 필요 사항**:
- ✅ 시스템 공지 발송
- ✅ 긴급 알림 발송
- ✅ 알림 통계 분석

---

## 6. 모달 및 인터랙션

### 6.1 주요 모달

#### 스터디 가입 신청 모달
- 자기소개 입력
- 동기 입력
- 레벨 선택

#### 멤버 추방 확인 모달
- 추방 사유 입력
- 확인/취소

#### 스터디 삭제 확인 모달
- 삭제 확인 문구 입력
- 확인/취소

#### 파일 업로드 모달
- 파일 선택 (드래그 앤 드롭)
- 폴더 선택
- 진행률 표시

#### 일정 생성/수정 모달
- 제목, 날짜, 시간
- 장소, 색상

#### 할일 생성/수정 모달
- 제목, 설명
- 담당자, 마감일, 우선순위

### 6.2 토스트 알림
- 성공 메시지 (초록색)
- 에러 메시지 (빨간색)
- 정보 메시지 (파란색)
- 경고 메시지 (노란색)

**관리 필요 사항**:
- ℹ️ UI/UX 개선 참고용

---

## 7. 신고 기능

### 7.1 신고 유형
1. **사용자 신고**:
   - 욕설/혐오 발언
   - 스팸/광고
   - 사칭
   - 기타

2. **스터디 신고**:
   - 부적절한 콘텐츠
   - 스팸/광고
   - 사기
   - 기타

3. **메시지/공지 신고**:
   - 욕설/혐오 발언
   - 불법 콘텐츠
   - 스팸
   - 기타

### 7.2 신고 프로세스
1. 사용자가 신고 버튼 클릭
2. 신고 유형 선택
3. 상세 사유 입력 (선택)
4. 제출
5. 관리자 검토 대기

**관리 필요 사항**:
- ✅ 신고 접수 및 검토
- ✅ 조치 결정 (경고, 정지, 삭제)
- ✅ 신고자/피신고자 알림
- ✅ 신고 통계 분석

---

## 8. 사용자 역할 및 권한

### 8.1 스터디 내 역할
1. **OWNER** (스터디 생성자)
   - 모든 권한
   - 스터디 삭제 가능
   - 소유권 이전 가능

2. **ADMIN** (관리자)
   - 멤버 관리 (승인, 추방)
   - 공지 작성
   - 설정 변경
   - 스터디 삭제 불가

3. **MEMBER** (일반 멤버)
   - 채팅 참여
   - 파일 업로드/다운로드
   - 일정/할일 생성
   - 읽기 전용 권한 (공지, 멤버 목록)

### 8.2 플랫폼 역할
1. **USER** (일반 사용자)
   - 모든 일반 기능 사용

2. **ADMIN** (관리자)
   - 사용자 관리
   - 스터디 관리
   - 신고 처리
   - 통계 조회

3. **SYSTEM_ADMIN** (시스템 관리자)
   - 모든 관리자 권한
   - 시스템 설정 변경
   - 다른 관리자 권한 부여

---

## 9. 데이터베이스 스키마 (사용자 관련)

### User 테이블
```prisma
model User {
  id             String       @id @default(cuid())
  email          String       @unique
  password       String?      // OAuth 사용자는 null
  name           String?
  avatar         String?
  bio            String?
  provider       Provider     @default(CREDENTIALS)
  role           UserRole     @default(USER)
  
  // 소셜 로그인
  googleId       String?      @unique
  githubId       String?      @unique
  
  // 상태
  status         UserStatus   @default(ACTIVE)
  suspendedUntil DateTime?
  suspendReason  String?
  
  // 타임스탬프
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  lastLoginAt    DateTime?
}

enum UserRole {
  USER
  ADMIN
  SYSTEM_ADMIN
}

enum UserStatus {
  ACTIVE      // 정상
  SUSPENDED   // 정지
  DELETED     // 탈퇴
}
```

---

## 10. 관리 대상 요약

### 🔴 긴급 관리 필요 (보안/안전)
- ❌ 욕설/혐오 발언 필터링
- ❌ 불법 콘텐츠 차단
- ❌ 스팸 계정/스터디 차단
- ❌ 신고 처리

### 🟡 일상 관리 필요 (품질)
- ✅ 스터디 품질 모니터링
- ✅ 비활성 스터디 정리
- ✅ 사용자 활동 분석
- ✅ 시스템 공지 발송

### 🟢 선택적 관리 (개선)
- ℹ️ 추천 알고리즘 개선
- ℹ️ 통계 분석 및 리포트
- ℹ️ UX 개선 피드백

---

## 📊 관리자가 모니터링할 지표

### 사용자 지표
- 신규 가입자 수
- 활성 사용자 수 (DAU, MAU)
- 탈퇴 사용자 수
- 정지 사용자 수

### 스터디 지표
- 신규 스터디 생성 수
- 활성 스터디 수
- 평균 멤버 수
- 평균 메시지 수

### 콘텐츠 지표
- 메시지 전송 수
- 파일 업로드 수
- 공지 작성 수
- 일정 생성 수

### 신고 지표
- 미처리 신고 수
- 처리 완료 신고 수
- 신고 유형별 통계
- 평균 처리 시간

---

**다음 문서**: `02-admin-roles.md` - 관리자 역할 및 권한 정의

