# 관리자 역할 및 권한 정의

> **작성일**: 2025-11-26  
> **목적**: CoUp 플랫폼 관리자가 수행해야 할 역할과 책임, 권한을 상세히 정의

---

## 📋 목차

1. [관리자의 핵심 역할](#1-관리자의-핵심-역할)
2. [ADMIN 권한](#2-admin-권한)
3. [SYSTEM_ADMIN 권한](#3-system_admin-권한)
4. [권한 매트릭스](#4-권한-매트릭스)
5. [워크플로우](#5-워크플로우)

---

## 1. 관리자의 핵심 역할

### 1.1 플랫폼 관리자가 해야 할 일

#### 보안 및 안전
- **콘텐츠 검열**: 부적절한 콘텐츠 감지 및 삭제
- **신고 처리**: 사용자 신고 검토 및 조치
- **스팸 차단**: 스팸 계정, 스터디, 메시지 차단
- **제재 실행**: 규칙 위반 사용자 경고/정지

#### 품질 관리
- **스터디 모니터링**: 스터디 활동 상태 확인
- **사용자 지원**: 사용자 문의 및 분쟁 조정
- **우수 스터디 선정**: 추천 스터디 큐레이션
- **비활성 정리**: 장기 비활성 스터디 정리

#### 운영 및 분석
- **통계 모니터링**: 핵심 지표 추적
- **트렌드 분석**: 사용자 행동 패턴 분석
- **리포트 작성**: 주간/월간 리포트 생성
- **시스템 공지**: 중요 공지사항 발송

---

## 2. ADMIN (일반 관리자)

### 2.1 사용자 관리

#### 조회 권한
- ✅ 전체 사용자 목록
- ✅ 사용자 상세 정보 (이메일, 프로필, 가입일)
- ✅ 사용자 활동 이력 (스터디 참여, 메시지 수)
- ✅ 제재 이력 조회
- ❌ 비밀번호 조회 불가

#### 제재 권한
**1) 경고**
- 사용자에게 경고 메시지 발송
- 누적 경고 기록
- 3회 경고 시 자동 1일 정지 (선택 설정)

**2) 정지**
- 기간: 1일, 3일, 7일, 30일, 영구
- 정지 중 로그인 차단
- 정지 해제 (조기 해제 가능)
- 정지 사유 필수 입력 (최소 10자)

**3) 기능 제한** (부분 정지)
- 채팅 금지
- 스터디 생성 금지
- 파일 업로드 금지
- 공지 작성 금지

**제재 시 필수 정보**:
- 제재 유형
- 제재 사유 (최소 10자)
- 제재 기간
- 관련 신고 번호 (있는 경우)

#### 복구 권한
- ✅ 정지 해제
- ✅ 제재 이력에 주석 추가
- ❌ 제재 이력 삭제 불가

### 2.2 스터디 관리

#### 조회 권한
- ✅ 전체 스터디 목록 (공개/비공개 포함)
- ✅ 스터디 상세 정보
- ✅ 멤버 목록 및 역할
- ✅ 채팅 내역 조회 (읽기만)
- ✅ 파일 목록 및 다운로드
- ✅ 공지사항 조회

#### 제재 권한
**1) 숨김**
- 검색 결과에서 제외
- 기존 멤버는 계속 사용 가능
- 신규 가입 불가
- 해제 가능

**2) 모집 중단**
- 신규 멤버 가입 차단
- 기존 활동은 정상

**3) 종료 (강제)**
- 스터디 비활성화
- 모든 활동 중단
- 채팅/파일/일정 모두 읽기 전용
- 복구 불가 (SYSTEM_ADMIN만 가능)

**제재 시 필수 정보**:
- 제재 유형
- 제재 사유
- 멤버 알림 여부
- 관련 신고 번호 (있는 경우)

#### 콘텐츠 삭제 권한
- ✅ 부적절한 채팅 메시지 삭제
- ✅ 불법 파일 삭제
- ✅ 욕설/혐오 발언 공지 삭제
- ✅ 부적절한 스터디 설명 수정
- ❌ 삭제된 콘텐츠 복구 불가

**삭제 시 로깅**:
- 삭제 일시
- 관리자 ID
- 삭제 사유
- 원본 콘텐츠 백업 (30일간)

#### 추천 권한
- ✅ 우수 스터디 선정
- ✅ 추천 스터디 목록에 표시
- ✅ 배지 부여 (⭐ 추천 스터디)
- ✅ 추천 해제

### 2.3 신고 관리

#### 신고 조회
**필터**:
- 상태별: 대기, 처리중, 완료, 기각
- 유형별: 사용자, 스터디, 콘텐츠
- 우선순위별: 긴급, 높음, 보통, 낮음
- 기간별: 오늘, 최근 7일, 최근 30일

**표시 정보**:
- 신고 번호
- 신고 유형
- 신고 대상 (사용자/스터디/콘텐츠)
- 신고자 (익명 처리 가능)
- 신고 사유
- 접수 일시
- 처리 상태
- 담당자

#### 신고 처리
**1) 검토**
- 신고 내용 확인
- 증거 자료 검토 (스크린샷, 링크 등)
- 대상 이력 조회 (과거 신고 이력)
- 유사 신고 조회

**2) 처리 결정**
- **승인**: 신고 내용 인정 → 제재 실행
- **기각**: 신고 내용 부적절 or 증거 부족
- **보류**: 추가 검토 필요 (댓글로 사유 작성)
- **에스컬레이션**: SYSTEM_ADMIN에게 전달 (중대한 사안)

**3) 조치 실행**
- 사용자 경고/정지
- 콘텐츠 삭제
- 스터디 종료/숨김
- 제재 알림 발송

**4) 알림 발송**
- 신고자: 처리 완료 통지
- 피신고자: 제재 내용 안내

**필수 입력 정보**:
- 처리 결과 (승인/기각/보류)
- 관리자 코멘트 (최소 10자)
- 조치 내용 (승인 시)

#### 신고 통계
- ✅ 미처리 신고 수
- ✅ 평균 처리 시간
- ✅ 유형별 통계
- ✅ 담당자별 처리 건수

### 2.4 콘텐츠 검열

#### 자동 필터링
- ✅ 규칙 조회만 가능
- ❌ 규칙 수정 불가 (SYSTEM_ADMIN만)

**확인 가능 정보**:
- 금지어 목록 (마스킹 처리)
- 필터링 강도 (높음/중간/낮음)
- 차단 통계

#### 수동 검열
**검열 대상**:
- 신고된 메시지
- 신고된 공지
- 신고된 파일
- 신고된 프로필 (사진, 자기소개)

**조치**:
- 콘텐츠 삭제
- 작성자 경고/정지
- 재발 방지 교육

### 2.5 통계 및 분석

#### 대시보드
**조회 가능 지표**:
- 신규 가입자 수 (일간/주간/월간)
- 활성 사용자 수 (DAU, MAU)
- 정지 사용자 수
- 신규 스터디 생성 수
- 활성 스터디 수
- 종료 스터디 수
- 미처리 신고 수
- 평균 신고 처리 시간

**그래프**:
- 가입자 추이 (선 그래프)
- 활성 사용자 추이 (선 그래프)
- 스터디 생성 추이 (막대 그래프)
- 신고 유형별 분포 (원 그래프)

#### 리포트 생성
**리포트 유형**:
- 일간 리포트 (전날 요약)
- 주간 리포트 (지난 주 요약)
- 월간 리포트 (지난 달 요약)

**포함 내용**:
- 핵심 지표
- 주요 이벤트
- 처리한 신고
- 제재 현황

#### 데이터 익스포트
**제한**:
- ⚠️ 최대 1,000건
- ⚠️ 개인정보 자동 마스킹 (이메일 일부, 전화번호 등)
- ⚠️ 익스포트 로그 기록
- ⚠️ SYSTEM_ADMIN 승인 필요 (민감 데이터)

**익스포트 형식**:
- CSV
- Excel
- JSON

### 2.6 공지 및 알림

#### 시스템 공지 발송
**발송 대상**:
- 전체 사용자
- 활성 사용자만
- 특정 스터디 멤버
- 특정 사용자 그룹

**발송 방법**:
- 인앱 알림 (필수)
- 이메일 (선택)

**발송 시점**:
- 즉시 발송
- 예약 발송 (날짜/시간 지정)

**필수 입력**:
- 제목 (최대 100자)
- 내용 (최대 500자)
- 발송 대상
- 발송 시점

#### 긴급 알림
**사용 사례**:
- 시스템 점검 안내 (30분 전)
- 보안 이슈 경고
- 중대 업데이트 공지

**특징**:
- 빨간색 배지
- 푸시 알림 강제 발송
- 팝업 표시 (선택)

---

## 3. SYSTEM_ADMIN (시스템 관리자)

### 3.1 ADMIN의 모든 권한 + 추가 권한

### 3.2 시스템 설정

#### 플랫폼 설정
**1) 회원가입 제한**
- 이메일 도메인 화이트리스트/블랙리스트
- 최소 연령 제한
- 가입 승인 제도 (ON/OFF)

**2) 스터디 생성 제한**
- 최소 가입 기간 (예: 가입 후 3일)
- 최대 생성 개수 (예: 사용자당 5개)
- 스터디 생성 승인 제도 (ON/OFF)

**3) 파일 업로드 제한**
- 최대 파일 크기 (기본: 50MB)
- 허용 확장자 목록
- 금지 확장자 목록
- 바이러스 스캔 (ON/OFF)

**4) 자동 필터링 규칙**
- 금지어 목록 관리
- 필터링 강도 (높음/중간/낮음)
- 자동 제재 규칙 (예: 욕설 3회 시 1일 정지)

#### 이메일 템플릿
**템플릿 종류**:
- 회원가입 환영 이메일
- 이메일 인증 이메일
- 비밀번호 재설정 이메일
- 제재 알림 이메일 (경고/정지)
- 시스템 공지 이메일
- 신고 처리 완료 이메일

**편집 기능**:
- HTML 에디터
- 변수 삽입 ({{userName}}, {{studyName}} 등)
- 미리보기
- 테스트 발송

#### 서비스 이용약관
**관리**:
- 이용약관 수정
- 개인정보 처리방침 수정
- 버전 관리 (이전 버전 보관)
- 변경 이력 로그

**사용자 동의**:
- 중대 변경 시 재동의 요청
- 동의 이력 기록

### 3.3 관리자 권한 관리

#### 관리자 임명
**절차**:
1. 일반 사용자 검색
2. 사용자 정보 확인 (가입일, 활동 이력)
3. 권한 부여 (USER → ADMIN)
4. 권한 부여 사유 기록 (필수)
5. 이메일 통지

**임명 조건 (권장)**:
- 가입 후 30일 이상
- 스터디 참여 2개 이상
- 제재 이력 없음
- 신뢰할 수 있는 활동 이력

#### 관리자 해임
**절차**:
1. 관리자 목록에서 선택
2. 해임 사유 확인
3. 권한 회수 (ADMIN → USER)
4. 해임 사유 기록 (필수)
5. 이메일 통지

**해임 사유 (예)**:
- 권한 남용
- 장기 비활성
- 본인 요청
- 기타

#### 관리자 활동 모니터링
**추적 항목**:
- 관리자별 작업 내역
- 제재 실행 건수
- 신고 처리 건수
- 평균 처리 시간
- 비정상 패턴 탐지

**비정상 패턴 예시**:
- 과도한 제재 (예: 1일 10건 이상)
- 특정 사용자만 타겟
- 정당한 사유 없는 제재

### 3.4 데이터베이스 관리

#### 백업 및 복구
- ✅ 수동 백업 실행
- ✅ 자동 백업 스케줄 설정
- ✅ 백업 복구 (긴급 시)
- ✅ 백업 파일 다운로드

#### 데이터 정리
- ✅ 탈퇴 계정 완전 삭제 (30일 후)
- ✅ 오래된 로그 삭제 (1년 이상)
- ✅ 임시 파일 정리
- ✅ 캐시 초기화

#### 사용자 완전 삭제
**사용 사례**:
- GDPR 삭제 요청 (법적 의무)
- 법원 명령
- 중대한 규칙 위반

**절차**:
1. 삭제 사유 입력 (필수)
2. 백업 생성 (복구용)
3. 관련 데이터 확인
4. 완전 삭제 실행
5. 삭제 완료 로그

**삭제 대상**:
- 사용자 정보
- 프로필 데이터
- 작성한 콘텐츠 (공지, 파일, 메시지)
- 활동 이력
- 로그인 로그

### 3.5 감사 로그

#### 로그 조회
**로그 유형**:
- 관리자 작업 로그
- 사용자 활동 로그 (민감 작업만)
- 시스템 에러 로그
- 보안 이벤트 로그

**필터**:
- 관리자별
- 작업 유형별
- 기간별
- 대상별

#### 로그 분석
**자동 탐지**:
- 비정상 로그인 패턴
- 권한 남용 패턴
- 시스템 에러 급증
- 보안 위협 징후

**알림**:
- 긴급: SYSTEM_ADMIN에게 즉시 알림
- 중요: 일간 요약 이메일
- 일반: 주간 리포트

---

## 4. 권한 매트릭스

| 기능 | USER | ADMIN | SYSTEM_ADMIN |
|------|------|-------|--------------|
| **사용자 관리** |
| 사용자 목록 조회 (전체) | ❌ | ✅ | ✅ |
| 사용자 상세 조회 | 본인만 | ✅ | ✅ |
| 사용자 경고 | ❌ | ✅ | ✅ |
| 사용자 정지 | ❌ | ✅ | ✅ |
| 사용자 완전 삭제 | 본인만 | ❌ | ✅ |
| **스터디 관리** |
| 공개 스터디 조회 | ✅ | ✅ | ✅ |
| 비공개 스터디 조회 | 참여 중만 | ✅ | ✅ |
| 스터디 숨김 | ❌ | ✅ | ✅ |
| 스터디 종료 | OWNER만 | ✅ | ✅ |
| 스터디 추천 | ❌ | ✅ | ✅ |
| **신고 관리** |
| 신고 제출 | ✅ | ✅ | ✅ |
| 신고 목록 조회 | 본인만 | ✅ | ✅ |
| 신고 처리 | ❌ | ✅ | ✅ |
| **통계** |
| 개인 통계 | ✅ | ✅ | ✅ |
| 플랫폼 통계 | ❌ | ✅ | ✅ |
| 리포트 생성 | ❌ | ✅ | ✅ |
| 데이터 익스포트 | 본인만 | 제한 | ✅ |
| **시스템** |
| 플랫폼 설정 | ❌ | ❌ | ✅ |
| 이메일 템플릿 | ❌ | ❌ | ✅ |
| 자동 필터링 규칙 | ❌ | 조회만 | ✅ |
| 관리자 권한 관리 | ❌ | ❌ | ✅ |
| 감사 로그 | ❌ | ❌ | ✅ |

---

## 5. 워크플로우

### 5.1 신고 처리 워크플로우

```
[신고 접수]
     ↓
[자동 우선순위 배정]
- 긴급: 욕설/혐오/불법 콘텐츠
- 높음: 스팸/사기
- 보통: 기타
     ↓
[관리자 배정]
- 라운드 로빈 or
- 수동 배정
     ↓
[검토]
- 신고 내용 확인
- 증거 검토
- 대상 이력 조회
     ↓
[결정] ────► [기각] → 신고자 알림
     │
     ├─► [보류] → 댓글 작성
     │
     ├─► [에스컬레이션] → SYSTEM_ADMIN
     │
     └─► [승인]
          ↓
     [제재 실행]
     - 경고/정지
     - 콘텐츠 삭제
     - 스터디 종료
          ↓
     [알림 발송]
     - 신고자: 처리 완료
     - 피신고자: 제재 내용
          ↓
     [완료 & 로깅]
```

### 5.2 사용자 정지 워크플로우

```
[정지 사유 확인]
- 신고 기반
- 규칙 위반
- 관리자 판단
     ↓
[증거 수집]
- 관련 메시지
- 스크린샷
- 신고 내역
     ↓
[정지 기간 결정]
- 경고: 0일 (기록만)
- 1일: 경미한 위반
- 3일: 중간 위반
- 7일: 심각한 위반
- 30일: 매우 심각
- 영구: 반복적/중대한 위반
     ↓
[정지 실행]
- status: SUSPENDED
- suspendedUntil: Date
- suspendReason: String
     ↓
[사용자 알림]
- 정지 사유
- 정지 기간
- 이의 제기 방법
     ↓
[로그 기록]
- 관리자 ID
- 정지 내용
- 타임스탬프
```

### 5.3 스터디 종료 워크플로우

```
[종료 사유 확인]
- 신고 기반
- 규칙 위반
- 장기 비활성 (90일 이상)
     ↓
[스터디 검토]
- 콘텐츠 확인
- 멤버 활동 이력
- 신고 이력
     ↓
[멤버 알림] (선택)
- 종료 예정 안내 (3일 전)
- 데이터 백업 권장
     ↓
[스터디 종료]
- 상태 변경 (CLOSED)
- 신규 가입 차단
- 검색 숨김
- 모든 활동 읽기 전용
     ↓
[로그 기록]
- 종료 사유
- 관리자 ID
- 타임스탬프
```

---

**다음 단계**: 영역별 기능 명세 작성 → `features/`

