# 관리자 시스템 설계 문서

> **프로젝트**: CoUp 플랫폼 관리자 시스템  
> **버전**: 2.0  
> **작성일**: 2025-11-26  
> **상태**: 설계 단계

---

## 📋 개요

CoUp 플랫폼의 관리자 시스템 전체 설계 문서입니다. 일반 사용자 기능 분석을 기반으로 플랫폼 관리자가 필요로 하는 모든 기능을 체계적으로 설계했습니다.

---

## 🗂️ 문서 구조

### 1. 핵심 설계 문서 (`docs/admin/`)
| 문서 | 설명 | 라인 수 |
|------|------|---------|
| `01-user-features-summary.md` | 일반 사용자 기능 요약 | ~250 |
| `02-admin-roles.md` | 관리자 역할 및 권한 정의 | ~200 |
| `03-features-spec.md` | 관리자 기능 명세 (영역별) | ~280 |
| `04-architecture.md` | 시스템 아키텍처 설계 | ~260 |
| `05-optimization.md` | CSR/SSR/SEO 최적화 전략 | ~220 |

### 2. API 명세 (`docs/backend/api/admin/`)
| 문서 | 설명 | 라인 수 |
|------|------|---------|
| `01-overview.md` | API 개요 및 공통 사항 | ~180 |
| `02-auth.md` | 인증 및 권한 API | ~150 |
| `03-users.md` | 사용자 관리 API | ~280 |
| `04-studies.md` | 스터디 관리 API | ~260 |
| `05-reports.md` | 신고 관리 API | ~240 |
| `06-content.md` | 콘텐츠 모니터링 API | ~220 |
| `07-stats.md` | 통계 및 분석 API | ~250 |
| `08-settings.md` | 시스템 설정 API | ~200 |

### 3. UI/UX 설계 (`docs/screens/admin/`)
| 문서 | 설명 | 라인 수 |
|------|------|---------|
| `01-layout.md` | 전체 레이아웃 (네비게이션, 헤더) | ~250 |
| `02-dashboard.md` | 대시보드 화면 | ~280 |
| `03-users.md` | 사용자 관리 화면 | ~270 |
| `04-studies.md` | 스터디 관리 화면 | ~260 |
| `05-reports.md` | 신고 관리 화면 | ~240 |
| `06-content.md` | 콘텐츠 모니터링 화면 | ~230 |
| `07-stats.md` | 통계 분석 화면 | ~260 |
| `08-settings.md` | 시스템 설정 화면 | ~220 |
| `09-components.md` | 공통 컴포넌트 설계 | ~280 |
| `10-modals.md` | 모달 설계 | ~200 |

---

## 📖 읽기 순서

### 신규 개발자 / 기획자
1. `01-user-features-summary.md` - 일반 사용자 기능 이해
2. `02-admin-roles.md` - 관리자 역할 파악
3. `03-features-spec.md` - 관리자 기능 전체 파악
4. `screens/01-layout.md` ~ `10-modals.md` - UI/UX 이해

### 백엔드 개발자
1. `02-admin-roles.md` - 권한 체계 이해
2. `04-architecture.md` - 시스템 아키텍처 파악
3. `backend/api/admin/01-overview.md` - API 공통 사항
4. `backend/api/admin/02-auth.md` ~ `08-settings.md` - API 상세 명세

### 프론트엔드 개발자
1. `03-features-spec.md` - 기능 명세 파악
2. `04-architecture.md` - RSC/CSR 전략 이해
3. `05-optimization.md` - 최적화 전략
4. `screens/01-layout.md` - 레이아웃 구조
5. `screens/09-components.md` - 공통 컴포넌트
6. `screens/02-dashboard.md` ~ `08-settings.md` - 각 화면 상세

---

## 🎯 핵심 설계 원칙

### 1. 모듈화 (High Cohesion, Low Coupling)
- **영역별 분리**: 사용자, 스터디, 신고, 콘텐츠, 통계, 설정
- **레이어 분리**: 화면 - 액션 - API - DB
- **컴포넌트 재사용**: 공통 컴포넌트 최대 활용

### 2. 렌더링 최적화
- **SSR**: 대시보드, 통계 (초기 로딩 속도)
- **RSC**: 테이블 목록, 상세 정보 (서버 컴포넌트)
- **CSR**: 실시간 모니터링, 필터링 (클라이언트 컴포넌트)
- **ISR**: 통계 차트 (주기적 재생성)

### 3. 성능 최적화
- **React Query**: 데이터 캐싱 및 자동 갱신
- **가상 스크롤**: 대용량 목록 (1000+ 항목)
- **페이지네이션**: 기본 20개, 최대 100개
- **Debounce**: 검색 입력 (300ms)
- **Lazy Loading**: 차트, 이미지

### 4. 보안
- **역할 기반 접근 제어**: SYSTEM_ADMIN만 접근
- **API 권한 검증**: 모든 엔드포인트에 인증 미들웨어
- **민감 정보 마스킹**: 이메일, 전화번호
- **감사 로그**: 모든 관리 작업 기록

### 5. 사용자 경험
- **일관된 UI**: 디자인 시스템 준수
- **즉각적인 피드백**: Optimistic UI, Toast
- **빈 상태**: 모든 화면에 Empty State
- **에러 처리**: 명확한 에러 메시지 및 재시도
- **반응형**: Desktop 우선, Tablet 지원

---

## 🏗️ 기술 스택

### 프론트엔드
- **프레임워크**: Next.js 14 (App Router)
- **언어**: JavaScript
- **스타일**: Tailwind CSS + CSS Modules
- **상태 관리**: React Query (서버 상태), Zustand (클라이언트 상태)
- **차트**: Recharts
- **폼**: React Hook Form + Zod
- **테이블**: TanStack Table

### 백엔드
- **프레임워크**: Next.js API Routes
- **ORM**: Prisma
- **DB**: PostgreSQL
- **인증**: NextAuth.js v4
- **파일 업로드**: AWS S3 (또는 로컬)
- **실시간**: WebSocket (선택적)

---

## 📊 관리 영역

### 1. 사용자 관리 (Users)
- 사용자 목록 조회 및 검색
- 사용자 상세 정보 및 활동 통계
- 계정 정지/해제
- 계정 삭제
- 역할 변경 (USER ↔ SYSTEM_ADMIN)

### 2. 스터디 관리 (Studies)
- 스터디 목록 조회 및 검색
- 스터디 상세 정보 및 활동 통계
- 스터디 숨김 처리
- 스터디 강제 삭제
- 멤버 관리

### 3. 신고 관리 (Reports)
- 신고 접수 및 목록 조회
- 신고 유형별 필터링
- 신고 처리 (경고, 정지, 삭제, 기각)
- 신고 이력 관리

### 4. 콘텐츠 모니터링 (Content)
- 공지사항 모니터링 및 삭제
- 채팅 메시지 모니터링 및 삭제
- 파일 모니터링 및 삭제
- 부적절한 콘텐츠 일괄 처리

### 5. 통계 분석 (Stats)
- 사용자 증가 추이
- 스터디 생성 추이
- 활동 통계 (공지, 파일, 할일, 채팅)
- 카테고리별 분포
- 신고 통계

### 6. 시스템 설정 (Settings)
- 플랫폼 공지사항 관리
- 카테고리 관리 (CRUD, 순서 변경)
- 이용약관 및 개인정보 처리방침 관리
- 시스템 설정 (최대 파일 크기, 최대 멤버 수 등)

---

## 🚀 구현 로드맵

### Phase 1: 기반 구조 (Week 1)
- [ ] 폴더 구조 생성
- [ ] 공통 컴포넌트 (DataTable, Modal, StatCard 등)
- [ ] 레이아웃 (AdminNav, AdminHeader, AdminLayout)
- [ ] 인증 미들웨어
- [ ] API 공통 유틸리티

### Phase 2: 대시보드 (Week 1-2)
- [ ] 통계 카드 (사용자, 스터디, 신고, 활동)
- [ ] 사용자 증가 차트
- [ ] 최근 신고 목록
- [ ] 실시간 온라인 사용자

### Phase 3: 핵심 관리 기능 (Week 2-3)
- [ ] 사용자 관리 (목록, 상세, 정지, 삭제)
- [ ] 스터디 관리 (목록, 상세, 숨김, 삭제)
- [ ] 신고 관리 (목록, 처리)

### Phase 4: 추가 기능 (Week 3-4)
- [ ] 콘텐츠 모니터링
- [ ] 통계 분석 (고급 차트)
- [ ] 시스템 설정

### Phase 5: 최적화 및 테스트 (Week 4)
- [ ] 성능 최적화 (캐싱, 지연 로딩)
- [ ] 에러 처리 및 로깅
- [ ] E2E 테스트
- [ ] 접근성 개선

---

## 📝 파일 크기 제한

모든 파일은 **100줄 권장, 최대 300줄 제한**을 준수합니다.

- **문서**: 300줄 이하 (코드 블록 제외)
- **컴포넌트**: 200줄 이하 (주석 포함)
- **API Route**: 150줄 이하 (유틸리티 함수 분리)
- **Server Action**: 100줄 이하 (함수별 파일 분리)

---

## 🔗 관련 문서

- [일반 사용자 기능 분석](./01-user-features-summary.md)
- [관리자 역할 정의](./02-admin-roles.md)
- [기능 명세](./03-features-spec.md)
- [시스템 아키텍처](./04-architecture.md)
- [최적화 전략](./05-optimization.md)
- [API 명세 개요](../backend/api/admin/01-overview.md)
- [화면 설계 - 레이아웃](../screens/admin/01-layout.md)

---

## 📞 문의

관리자 시스템 관련 문의사항이나 제안이 있으시면 이슈를 생성해주세요.

---

**작성자**: CoUp 개발팀  
**최종 업데이트**: 2025-11-26

