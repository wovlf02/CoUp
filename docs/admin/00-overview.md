# CoUp 관리자 시스템 설계 - 개요

> **작성일**: 2025-11-26  
> **버전**: 2.0 (완전 재설계)  
> **목적**: 플랫폼 관리자의 역할, 권한, 기능 전체 재정의

---

## 📋 문서 구조

### 기본 문서
- `00-overview.md` - **[이 문서]** 관리자 시스템 개요
- `01-user-features-analysis.md` - 일반 사용자 기능 분석
- `02-admin-roles.md` - 관리자 역할 및 권한 정의
- `03-functional-requirements.md` - 관리자 기능 요구사항

### 영역별 기능 명세
- `features/01-dashboard.md` - 대시보드 및 통계
- `features/02-user-management.md` - 사용자 관리
- `features/03-study-management.md` - 스터디 관리
- `features/04-report-management.md` - 신고 및 제재 관리
- `features/05-content-moderation.md` - 콘텐츠 검열 및 관리
- `features/06-system-settings.md` - 시스템 설정
- `features/07-analytics.md` - 분석 및 리포트
- `features/08-notification-management.md` - 공지 및 알림 관리

---

## 🎯 관리자 시스템의 목표

### 핵심 목표
1. **플랫폼 건전성 유지**: 부적절한 콘텐츠 및 행위 차단
2. **사용자 보호**: 신고 처리 및 분쟁 조정
3. **서비스 품질 관리**: 스터디 품질 모니터링 및 개선
4. **데이터 기반 의사결정**: 통계 및 분석을 통한 서비스 개선
5. **효율적인 운영**: 자동화된 관리 도구 제공

### 설계 원칙
1. **권한 분리**: 역할별 명확한 권한 구분
2. **감사 추적**: 모든 관리 작업 로깅
3. **사용자 중심**: 관리자 UX 최적화
4. **확장 가능성**: 향후 기능 추가 용이
5. **보안 우선**: 민감 정보 보호

---

## 🏗️ 시스템 아키텍처

### 계층 구조
```
┌─────────────────────────────────────────┐
│         관리자 프론트엔드                 │
│  (Next.js App Router - /admin/*)        │
├─────────────────────────────────────────┤
│         관리자 API 레이어                 │
│  (REST API - /api/admin/*)              │
├─────────────────────────────────────────┤
│         비즈니스 로직 레이어              │
│  (Services, Validators)                 │
├─────────────────────────────────────────┤
│         데이터 접근 레이어                │
│  (Prisma ORM)                           │
├─────────────────────────────────────────┤
│         데이터베이스                      │
│  (PostgreSQL)                           │
└─────────────────────────────────────────┘
```

### 인증 및 권한
- **인증**: NextAuth.js 세션 기반
- **권한 체크**: Middleware + API 레벨 이중 검증
- **역할**: USER, ADMIN, SYSTEM_ADMIN (3단계)

---

## 📊 일반 사용자 vs 관리자

### 일반 사용자 기능 (참고용)
1. **인증**: 로그인, 회원가입, 소셜 로그인
2. **대시보드**: 내 스터디 현황, 할일, 알림
3. **스터디**:
   - 탐색 및 검색
   - 생성 및 참여
   - 채팅, 공지, 파일, 캘린더
   - 할일 관리
   - 화상 스터디
4. **마이페이지**: 프로필, 설정, 알림
5. **신고**: 사용자/스터디/콘텐츠 신고

### 관리자 전용 기능
1. **모니터링**: 실시간 플랫폼 현황
2. **사용자 관리**: 회원 정보, 정지, 탈퇴 처리
3. **스터디 관리**: 스터디 검열, 종료, 추천
4. **신고 처리**: 신고 검토 및 조치
5. **콘텐츠 검열**: 부적절한 콘텐츠 삭제
6. **통계 분석**: 가입, 활동, 유지율 분석
7. **시스템 설정**: 정책, 공지, 설정 관리

---

## 🎨 UI/UX 설계 방향

### 레이아웃
```
┌────────────────────────────────────────────────────────┐
│  Header: 관리자 모드 표시 + 알림 + 프로필              │
├───────────┬────────────────────────────────────────────┤
│           │                                            │
│  Sidebar  │          Content Area                     │
│  (15%)    │          (85%)                            │
│           │                                            │
│  대시보드  │   - 페이지 헤더                            │
│  사용자    │   - 필터/검색                              │
│  스터디    │   - 데이터 테이블/차트                     │
│  신고      │   - 액션 버튼                              │
│  콘텐츠    │                                            │
│  통계      │                                            │
│  설정      │                                            │
│           │                                            │
└───────────┴────────────────────────────────────────────┘
```

### 디자인 시스템
- **색상**: 일반 사용자와 구별되는 관리자 테마
  - Primary: `#7C3AED` (보라색 - 관리자 전용)
  - Success: `#10B981` (승인, 완료)
  - Warning: `#F59E0B` (경고, 검토 필요)
  - Danger: `#EF4444` (정지, 삭제)
- **컴포넌트**: 통일된 관리자 전용 컴포넌트
  - AdminTable (정렬, 필터, 페이징)
  - AdminStats (통계 카드)
  - AdminModal (확인, 입력)
  - AdminTimeline (활동 로그)

---

## 🔐 보안 고려사항

### 인증 및 권한
1. **세션 검증**: 모든 관리자 페이지/API 접근 시
2. **역할 기반 접근 제어 (RBAC)**: 
   - ADMIN: 일반 관리 작업
   - SYSTEM_ADMIN: 시스템 설정 변경
3. **IP 화이트리스트** (선택): 특정 IP에서만 접근
4. **2FA (Two-Factor Authentication)**: 선택적 적용

### 감사 로그
- **모든 관리 작업 기록**:
  - 누가 (관리자 ID)
  - 무엇을 (작업 유형)
  - 언제 (타임스탬프)
  - 어디서 (IP 주소)
  - 결과 (성공/실패)
- **로그 보존 기간**: 최소 1년

### 데이터 보호
- **민감 정보 마스킹**: 이메일, 전화번호 일부 가림
- **개인정보 접근 로그**: GDPR 준수
- **데이터 익스포트 제한**: 대량 다운로드 승인 필요

---

## 📈 성능 최적화

### 데이터 로딩
1. **Pagination**: 대량 데이터 목록 페이징 처리
2. **Virtual Scrolling**: 긴 목록 최적화
3. **Lazy Loading**: 차트 및 이미지 지연 로딩
4. **Caching**: Redis 기반 통계 캐싱

### 실시간 업데이트
1. **WebSocket**: 신고 접수, 긴급 알림
2. **Polling**: 통계 자동 새로고침 (30초)
3. **Server-Sent Events**: 시스템 알림

---

## 🚀 개발 로드맵

### Phase 1: 핵심 기능 (2주)
- [ ] 관리자 인증 및 권한 체계
- [ ] 대시보드 (기본 통계)
- [ ] 사용자 관리 (목록, 검색, 정지)
- [ ] 스터디 관리 (목록, 검색, 종료)

### Phase 2: 신고 및 검열 (2주)
- [ ] 신고 관리 시스템
- [ ] 콘텐츠 검열 도구
- [ ] 제재 이력 관리
- [ ] 자동 필터링 규칙

### Phase 3: 통계 및 분석 (1주)
- [ ] 종합 통계 대시보드
- [ ] 사용자 활동 분석
- [ ] 스터디 품질 분석
- [ ] 리포트 생성 및 익스포트

### Phase 4: 시스템 관리 (1주)
- [ ] 시스템 설정 UI
- [ ] 공지사항 발송
- [ ] 이메일 템플릿 관리
- [ ] 로그 뷰어

---

## 📝 다음 단계

1. ✅ 일반 사용자 기능 분석 (`01-user-features-analysis.md`)
2. ✅ 관리자 역할 정의 (`02-admin-roles.md`)
3. ✅ 기능 요구사항 작성 (`03-functional-requirements.md`)
4. ✅ 영역별 기능 명세 작성 (`features/`)
5. ✅ API 명세서 작성 (`../backend/api/admin/`)
6. ✅ 화면 설계 작성 (`../screens/admin/`)
7. 🔄 개발 시작

---

**작성자**: GitHub Copilot  
**문서 상태**: ✅ 완료

